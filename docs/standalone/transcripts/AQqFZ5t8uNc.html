<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>AQqFZ5t8uNc</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/AQqFZ5t8uNc?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.56" data-end="3.41">[Music]</span> <span data-start="3.41" data-end="6.14">[Applause]</span> <span data-start="6.14" data-end="12.249">[Music]</span> <span data-start="12.259" data-end="15.269">hey folks my name is addy osmani and</span> <span data-start="15.269" data-end="17.73">welcome to optimizing for core web</span> <span data-start="17.73" data-end="20.22">vitals so today we're going to talk</span> <span data-start="20.22" data-end="22.65">about optimizing user experiences on the</span> <span data-start="22.65" data-end="25.769">web with a case study on French luxury</span> <span data-start="25.769" data-end="28.529">fashion house Chloe Chloe we've recently</span> <span data-start="28.529" data-end="30.359">been taking a fresh look at web</span> <span data-start="30.359" data-end="32.25">performance and I'm really excited to</span> <span data-start="32.25" data-end="33.93">share their learnings with you now you</span> <span data-start="33.93" data-end="36.329">may have seen Google search announced an</span> <span data-start="36.329" data-end="38.489">upcoming search ranking change recently</span> <span data-start="38.489" data-end="40.8">that incorporates page experience</span> <span data-start="40.8" data-end="43.079">metrics now these metrics include the</span> <span data-start="43.079" data-end="45.51">core web vitals which together with a</span> <span data-start="45.51" data-end="47.16">few other signals paint a pretty</span> <span data-start="47.16" data-end="49.62">holistic picture about the quality of</span> <span data-start="49.62" data-end="52.53">user experiences on a page but what are</span> <span data-start="52.53" data-end="54.69">the core Web vitals and how do you go</span> <span data-start="54.69" data-end="57.21">about optimizing for them well or web</span> <span data-start="57.21" data-end="59.489">vitals are a set of metrics related to</span> <span data-start="59.489" data-end="62.489">speed responsiveness and visual</span> <span data-start="62.489" data-end="65.04">stability now these three aspects of</span> <span data-start="65.04" data-end="67.77">user experience are measured using three</span> <span data-start="67.77" data-end="71.07">metrics so first of all we have largest</span> <span data-start="71.07" data-end="72.96">content full paint which measures</span> <span data-start="72.96" data-end="74.97">loading performance next up we have</span> <span data-start="74.97" data-end="77.03">first input delay which measures</span> <span data-start="77.03" data-end="79.409">interactivity and last we've got</span> <span data-start="79.409" data-end="81.509">cumulative layout shift which measures</span> <span data-start="81.509" data-end="83.939">layout stability let's kick things off</span> <span data-start="83.939" data-end="86.1">by talking about cumulative layout shift</span> <span data-start="86.1" data-end="89.85">or CLS now CLS is a pretty important</span> <span data-start="89.85" data-end="91.65">metric for measuring visual stability</span> <span data-start="91.65" data-end="93.659">because it helps quantify all those</span> <span data-start="93.659" data-end="96.09">times when we see really surprising</span> <span data-start="96.09" data-end="99.81">shifts in the content on page it helps</span> <span data-start="99.81" data-end="101.579">make sure that the page is as delightful</span> <span data-start="101.579" data-end="104.729">as possible have you ever been reading</span> <span data-start="104.729" data-end="108.54">like an article online when all of a</span> <span data-start="108.54" data-end="111.93">sudden something suddenly changes on the</span> <span data-start="111.93" data-end="115.649">page and without warning the text moves</span> <span data-start="115.649" data-end="117.619">and you've lost your place</span> <span data-start="117.619" data-end="121.02">that's literally what happens a giant</span> <span data-start="121.02" data-end="124.38">chicken kicks your content away and he</span> <span data-start="124.38" data-end="126.57">has no regrets look at him he's</span> <span data-start="126.57" data-end="129.899">basically CLS so what causes poor CLS</span> <span data-start="129.899" data-end="131.97">well first of all we've got images</span> <span data-start="131.97" data-end="134.56">without dimension</span> <span data-start="134.56" data-end="137.08">adds embeds or iframes without</span> <span data-start="137.08" data-end="139.99">dimensions dynamically injected content</span> <span data-start="139.99" data-end="142.93">and web fonts that might cause a flash</span> <span data-start="142.93" data-end="146.47">of unstyled content now as I mentioned</span> </p>
<p><span data-start="146.47" data-end="149.26">Chloe is a French luxury fashion house</span> <span data-start="149.26" data-end="151.03">and it's become a bit of a go-to brand</span> <span data-start="151.03" data-end="153.1">not just for like luxury apparel but</span> <span data-start="153.1" data-end="155.44">also handbags and fragrances and things</span> <span data-start="155.44" data-end="157.99">like that and they have recently been</span> <span data-start="157.99" data-end="160.15">focused on improving cumulative layout</span> <span data-start="160.15" data-end="162.82">shift on all their like main pages so</span> <span data-start="162.82" data-end="165.13">their home page their product listings</span> <span data-start="165.13" data-end="167.31">page and their product details page</span> <span data-start="167.31" data-end="169.27">through a bunch of work they've been</span> <span data-start="169.27" data-end="171.43">able to reduce their CLS all the way</span> <span data-start="171.43" data-end="173.98">down to zero which is about as perfect</span> <span data-start="173.98" data-end="176.14">as you can get so how did they get here</span> <span data-start="176.14" data-end="178.75">this is the before view of the Cloe</span> <span data-start="178.75" data-end="180.94">homepage where we can observe a number</span> <span data-start="180.94" data-end="183.16">of surprising layout shifts due to</span> <span data-start="183.16" data-end="185.74">elements on the page not following CLS</span> <span data-start="185.74" data-end="188.86">best practices so let's dive into a few</span> <span data-start="188.86" data-end="191.08">tips that worked well here first off</span> <span data-start="191.08" data-end="193.51">always include width and height size</span> <span data-start="193.51" data-end="195.52">attributes on your images and video</span> <span data-start="195.52" data-end="198.1">elements alternatively you can always do</span> <span data-start="198.1" data-end="200.56">things like reserve the required space</span> <span data-start="200.56" data-end="203.95">with CSS aspect ratio boxes but in</span> <span data-start="203.95" data-end="205.36">general this approach just make sure</span> <span data-start="205.36" data-end="207.37">that the browser can allocate the</span> <span data-start="207.37" data-end="209.14">correct amount of space in the document</span> <span data-start="209.14" data-end="211.09">while the image is loading so here's a</span> <span data-start="211.09" data-end="213.67">demo of this in action these are some</span> <span data-start="213.67" data-end="215.85">images that don't have width and height</span> <span data-start="215.85" data-end="218.26">specified and what you see happening is</span> <span data-start="218.26" data-end="220.21">that they're pushing content in the page</span> <span data-start="220.21" data-end="222.82">all the way down this is something</span> <span data-start="222.82" data-end="224.68">that's reflected in our tools like</span> <span data-start="224.68" data-end="226.27">lighthouse and I've got a little bit of</span> <span data-start="226.27" data-end="227.53">a clip out here you can see the</span> <span data-start="227.53" data-end="229.6">lighthouse report where CLS is in the</span> <span data-start="229.6" data-end="231.61">red and not quite where we want it to be</span> <span data-start="231.61" data-end="234.76">so how do we address this well in the</span> <span data-start="234.76" data-end="237.55">early days of the web developers would</span> <span data-start="237.55" data-end="240.25">add width and height attributes all over</span> <span data-start="240.25" data-end="241.69">the place they'd add them to their image</span> <span data-start="241.69" data-end="244.03">tags they make sure that they kept</span> <span data-start="244.03" data-end="245.8">enough space allocated on the page</span> <span data-start="245.8" data-end="248.14">before browsers would start fetching</span> <span data-start="248.14" data-end="250.39">images that was great because it would</span> <span data-start="250.39" data-end="253.06">minimize reflow and relay out</span> <span data-start="253.06" data-end="256.63">now when responsive web design was</span> <span data-start="256.63" data-end="258.97">introduced developers began to omit</span> <span data-start="258.97" data-end="260.739">these width and height attributes and</span> <span data-start="260.739" data-end="263.38">they started to use CSS to resize their</span> <span data-start="263.38" data-end="265.06">images instead</span> <span data-start="265.06" data-end="266.919">one of the downsides to this approach is</span> <span data-start="266.919" data-end="268.93">that space could only be allocated for</span> <span data-start="268.93" data-end="271.36">an image once it began to download and</span> <span data-start="271.36" data-end="273.85">you know at that point the browser could</span> <span data-start="273.85" data-end="276.85">determine its dimensions as images load</span> <span data-start="276.85" data-end="279.58">in in that old world you know the page</span> <span data-start="279.58" data-end="282.13">would reflow was each image appears on</span> <span data-start="282.13" data-end="284.919">the screen and a lot of us got used to</span> <span data-start="284.919" data-end="287.47">you know our text suddenly popping down</span> <span data-start="287.47" data-end="289.54">the screen which wasn't a very great</span> <span data-start="289.54" data-end="292.03">user experience and this is where your</span> <span data-start="292.03" data-end="295">aspect ratio comes in so the aspect</span> <span data-start="295" data-end="297.76">ratio of an image is the ratio of its</span> <span data-start="297.76" data-end="300.28">width to its height it's pretty common</span> <span data-start="300.28" data-end="302.35">to see this expressed as two numbers</span> <span data-start="302.35" data-end="305.65">separated by a colon so for example 16</span> <span data-start="305.65" data-end="309.76">colon 9 or 4 colon 3 for an x colon y</span> <span data-start="309.76" data-end="313">aspect ratio the image is X units wide</span> <span data-start="313" data-end="316.27">and Y units hide what that means is that</span> <span data-start="316.27" data-end="318.82">if we know one of the dimensions the</span> <span data-start="318.82" data-end="321.58">other one can be determined so for a 16</span> <span data-start="321.58" data-end="325.889">to 9 aspect ratio if dress jpg has got a</span> <span data-start="325.889" data-end="330.43">360 PX height the width is 360</span> <span data-start="330.43" data-end="334.289">multiplied by 16 over 9 which gives us</span> <span data-start="334.289" data-end="336.27">640 PX</span> </p>
<p><span data-start="336.27" data-end="339.76">I'm not very good at math so hopefully</span> <span data-start="339.76" data-end="340.419">that was helpful</span> <span data-start="340.419" data-end="344.53">now modern browsers now set the default</span> <span data-start="344.53" data-end="346.81">aspect ratio of images based on an</span> <span data-start="346.81" data-end="349.45">images width and height attributes so</span> <span data-start="349.45" data-end="351.94">it's really valuable to set them if you</span> <span data-start="351.94" data-end="354.46">want to avoid those layout shifts this</span> <span data-start="354.46" data-end="356.68">is a change in modern browsers and it's</span> <span data-start="356.68" data-end="358.389">all thanks to the CSS working group</span> <span data-start="358.389" data-end="360.31">they've done some work that basically</span> <span data-start="360.31" data-end="362.59">allows us to just set width and height</span> <span data-start="362.59" data-end="365.32">as normal and this calculates an aspect</span> <span data-start="365.32" data-end="367.21">ratio based on the width and height the</span> <span data-start="367.21" data-end="369.789">attributes before the image is loaded so</span> <span data-start="369.789" data-end="371.56">what we're seeing on screen here this is</span> <span data-start="371.56" data-end="373.389">something that's added to the default</span> <span data-start="373.389" data-end="376.51">style sheet of all browsers and it</span> <span data-start="376.51" data-end="378.34">calculates aspect ratio based on the</span> <span data-start="378.34" data-end="380.86">elements width and height attributes so</span> <span data-start="380.86" data-end="383.08">as long as you're providing width and</span> <span data-start="383.08" data-end="385.18">height the aspect ratio can be</span> <span data-start="385.18" data-end="387.28">calculated and everything will will</span> <span data-start="387.28" data-end="389.44">hopefully avoid layout shifts so this is</span> <span data-start="389.44" data-end="390.85">a great best practice to be following</span> <span data-start="390.85" data-end="392.74">this is also something that works well</span> <span data-start="392.74" data-end="395.729">with responsive images so with</span> <span data-start="395.729" data-end="398.879">set your generally defining images that</span> <span data-start="398.879" data-end="400.74">you want to allow the browser to select</span> <span data-start="400.74" data-end="402.9">between you need to find sizes for those</span> <span data-start="402.9" data-end="405.569">images to make sure that your image</span> <span data-start="405.569" data-end="407.969">width and height attributes can be set</span> <span data-start="407.969" data-end="410.49">just make sure that each image is using</span> <span data-start="410.49" data-end="414.449">the same aspect ratio and here's that</span> <span data-start="414.449" data-end="416.639">demo once again width width and height</span> <span data-start="416.639" data-end="419.129">attributes added notice that in a modern</span> <span data-start="419.129" data-end="421.349">browser you won't see any layout shifts</span> <span data-start="421.349" data-end="423.089">there and the user will get a much more</span> <span data-start="423.089" data-end="424.62">pleasant experience</span> <span data-start="424.62" data-end="427.08">so another reminder set those width and</span> <span data-start="427.08" data-end="428.639">height attributes as much as you can</span> <span data-start="428.639" data-end="430.469">here's the impact that this change has</span> <span data-start="430.469" data-end="432.389">on lighthouse as we can see before we</span> <span data-start="432.389" data-end="435.749">went from a CLS of 0.36 so we're in the</span> <span data-start="435.749" data-end="437.52">red all the way back to something that's</span> <span data-start="437.52" data-end="439.289">a little bit better there one or two</span> <span data-start="439.289" data-end="440.789">other things in this page that could</span> <span data-start="440.789" data-end="442.589">have been improved but on the whole</span> <span data-start="442.589" data-end="444.449">we've had a relatively significant</span> <span data-start="444.449" data-end="446.639">impact on reducing layout shift you</span> <span data-start="446.639" data-end="448.74">might be wondering how can I figure out</span> <span data-start="448.74" data-end="450.719">what elements on my page are</span> <span data-start="450.719" data-end="452.52">contributing to CLS</span> <span data-start="452.52" data-end="455.46">we've got you covered so in lighthouse</span> <span data-start="455.46" data-end="458.309">we have an avoid large layout shifts</span> <span data-start="458.309" data-end="460.589">audit that highlights the top Dom</span> <span data-start="460.589" data-end="463.11">elements contributing most of the CLS to</span> <span data-start="463.11" data-end="466.199">the page so check out that audit in dev</span> <span data-start="466.199" data-end="468.089">tools we also have a good story here so</span> <span data-start="468.089" data-end="469.83">if you're using the dev tools</span> <span data-start="469.83" data-end="472.349">performance panel it has an experience</span> <span data-start="472.349" data-end="473.969">section that can help you detect</span> <span data-start="473.969" data-end="476.789">unexpected layout shifts super helpful</span> <span data-start="476.789" data-end="478.919">for finding and fixing visual</span> <span data-start="478.919" data-end="481.349">instability issues they highlighted in</span> <span data-start="481.349" data-end="483.419">this experience section with some kind</span> <span data-start="483.419" data-end="485.909">of reddish pinkish layout shift records</span> <span data-start="485.909" data-end="487.559">and if you click on one of those records</span> <span data-start="487.559" data-end="489.3">we'll be able to get more details about</span> <span data-start="489.3" data-end="492.18">you know what was the score where did</span> <span data-start="492.18" data-end="494.729">this element move to and from really</span> <span data-start="494.729" data-end="496.589">great diagnostics to help you nail down</span> <span data-start="496.589" data-end="499.709">how to fix your CLS so khloe's approach</span> <span data-start="499.709" data-end="501.27">to image loading is that they use a</span> <span data-start="501.27" data-end="504.089">skeleton pattern with a SAS CSS mixin</span> <span data-start="504.089" data-end="505.379">called bruschetta</span> <span data-start="505.379" data-end="509.43">loading bruschetta is one of those</span> <span data-start="509.43" data-end="510.959">things that are a little bit of a luxury</span> <span data-start="510.959" data-end="513.3">term ager in quarantine they're they're</span> <span data-start="513.3" data-end="515.729">right up there with toilet paper and</span> <span data-start="515.729" data-end="518.55">antibacterial soap but let's stick with</span> <span data-start="518.55" data-end="521.279">bruschetta loading so this is Chloe's</span> <span data-start="521.279" data-end="523.26">approach to image loading they have a</span> <span data-start="523.26" data-end="526.319">parent container with a color similar to</span> <span data-start="526.319" data-end="529.199">the final image that's being loaded now</span> <span data-start="529.199" data-end="530.01">lo that Lisa</span> <span data-start="530.01" data-end="532.53">strategies like this where you have a</span> <span data-start="532.53" data-end="534.75">little bit of a preview of what's</span> <span data-start="534.75" data-end="536.52">finally gonna be shown are sometimes</span> <span data-start="536.52" data-end="538.29">referred to as low quality image</span> <span data-start="538.29" data-end="540.69">placeholders you can use a you know a</span> <span data-start="540.69" data-end="543.45">predominant color from the final image</span> <span data-start="543.45" data-end="545.97">you can use a low resolution image</span> <span data-start="545.97" data-end="548.31">sometimes people will use like a 1 pixel</span> <span data-start="548.31" data-end="550.41">by 1 pixel image or something like 10</span> <span data-start="550.41" data-end="552.27">pixels by 10 pixel something very low</span> <span data-start="552.27" data-end="553.95">resolution that just gives you a preview</span> <span data-start="553.95" data-end="555.98">of what's finally going to be displayed</span> <span data-start="555.98" data-end="560.04">now lazy loading strategies like this</span> <span data-start="560.04" data-end="561.78">which either use a color or that kind of</span> <span data-start="561.78" data-end="565.29">placeholder they don't strictly improve</span> <span data-start="565.29" data-end="567.12">largest content full paint but they do</span> <span data-start="567.12" data-end="569.01">improve perceived performance so they</span> <span data-start="569.01" data-end="570.45">can still be pretty good for the user</span> <span data-start="570.45" data-end="572.58">experience now</span> <span data-start="572.58" data-end="574.35">what Chloe did here in addition to using</span> <span data-start="574.35" data-end="576.9">this skeleton loading approach was that</span> <span data-start="576.9" data-end="579.09">they do use responsive images and they</span> <span data-start="579.09" data-end="580.5">do make sure that they're setting</span> <span data-start="580.5" data-end="582.81">dimensions on their images as well to</span> <span data-start="582.81" data-end="585.3">avoid CLS let's shift up and things up</span> <span data-start="585.3" data-end="587.94">chef things up let's go on to the next</span> <span data-start="587.94" data-end="590.97">tip so reserve enough space for any of</span> <span data-start="590.97" data-end="593.88">your dynamic content things like ads or</span> <span data-start="593.88" data-end="597.3">promos ideally you want to make sure</span> <span data-start="597.3" data-end="599.55">that you were giving any of that content</span> <span data-start="599.55" data-end="601.71">a container that it's not going to just</span> <span data-start="601.71" data-end="604.29">you know bounce out of and suddenly</span> <span data-start="604.29" data-end="607.5">cause shifts in the page a related tip</span> <span data-start="607.5" data-end="610.74">to this one is avoid inserting new</span> <span data-start="610.74" data-end="613.83">content above existing content unless</span> <span data-start="613.83" data-end="616.17">it's in reaction to a user interaction</span> <span data-start="616.17" data-end="618.33">you want to make sure that any layout</span> <span data-start="618.33" data-end="620.64">shifts in your page are ones that you</span> <span data-start="620.64" data-end="622.71">are making a conscious decision around</span> <span data-start="622.71" data-end="625.95">and like occur as as expected so let's</span> <span data-start="625.95" data-end="627.96">try to visualize this here's an example</span> <span data-start="627.96" data-end="631.08">of a promo where we're dynamically</span> <span data-start="631.08" data-end="632.4">injected into the page</span> <span data-start="632.4" data-end="634.65">we haven't reserved space and it's just</span> <span data-start="634.65" data-end="637.2">pushed everything all the way down we</span> <span data-start="637.2" data-end="638.94">can see this reflected in our lighthouse</span> <span data-start="638.94" data-end="641.31">call-out at the bottom of the screen now</span> <span data-start="641.31" data-end="642.87">this is something that very typically</span> <span data-start="642.87" data-end="646.41">happens with ads Ifrah iframes</span> <span data-start="646.41" data-end="649.44">promos and these types of assets can</span> <span data-start="649.44" data-end="651.33">sometimes be the largest contributors to</span> <span data-start="651.33" data-end="654">layout shifts on the web now many ad</span> <span data-start="654" data-end="656.22">networks and publishers will often</span> <span data-start="656.22" data-end="660.15">support dynamic ad sizes and ad sizes</span> <span data-start="660.15" data-end="662.46">that are you know dynamic or something</span> <span data-start="662.46" data-end="663.72">that can sometimes increase</span> <span data-start="663.72" data-end="665.22">in you because you're giving people a</span> <span data-start="665.22" data-end="667.56">lot of flexibility around you know what</span> <span data-start="667.56" data-end="669.689">can go inside there your ad slots but it</span> <span data-start="669.689" data-end="670.92">can also be something that can</span> <span data-start="670.92" data-end="673.199">potentially negatively impact the user</span> <span data-start="673.199" data-end="675.54">experience by pushing things down so</span> <span data-start="675.54" data-end="677.009">that's something that you want to avoid</span> <span data-start="677.009" data-end="679.379">so how do we approach this well one</span> <span data-start="679.379" data-end="682.319">solution to the problem is statically</span> <span data-start="682.319" data-end="685.62">reserving space for the slot so you can</span> <span data-start="685.62" data-end="687.54">make sure that you're defining a</span> <span data-start="687.54" data-end="690.24">container for these ads or embed frames</span> <span data-start="690.24" data-end="693.149">so that regardless of what goes inside</span> <span data-start="693.149" data-end="696.449">you're not shifting the content of the</span> <span data-start="696.449" data-end="699.149">page around so here I've got a container</span> <span data-start="699.149" data-end="701.459">where I set my width and my height I've</span> <span data-start="701.459" data-end="703.769">set a background color but I've also set</span> <span data-start="703.769" data-end="705.389">it to overflow:hidden just in case</span> <span data-start="705.389" data-end="707.759">anything dynamic is a little bit you</span> <span data-start="707.759" data-end="710.819">know a little bit taller than the</span> <span data-start="710.819" data-end="712.86">container I don't I still don't want it</span> <span data-start="712.86" data-end="714">to be able to break out of it</span> <span data-start="714" data-end="716.279">ideally the content fits inside of our</span> <span data-start="716.279" data-end="718.29">container like our iframes or whatever</span> <span data-start="718.29" data-end="720.54">else we might inject in there and what</span> <span data-start="720.54" data-end="722.279">you can do if you're in the you know if</span> <span data-start="722.279" data-end="724.889">you're somebody that has lots of dynamic</span> <span data-start="724.889" data-end="726.509">content that gets injected into your</span> <span data-start="726.509" data-end="729.269">page you can take a look at your your</span> <span data-start="729.269" data-end="732.87">data look at what are the medians or the</span> <span data-start="732.87" data-end="735.48">95th percentile widths and Heights for</span> <span data-start="735.48" data-end="737.49">this dynamic content and size your</span> <span data-start="737.49" data-end="739.949">container accordingly that'll just mean</span> <span data-start="739.949" data-end="741.809">that you have the best chance at still</span> <span data-start="741.809" data-end="743.579">being able to present that content users</span> <span data-start="743.579" data-end="745.98">without negatively impacting the rest of</span> <span data-start="745.98" data-end="747.93">the user experience so here's what it</span> <span data-start="747.93" data-end="749.699">looks with with my pattern in place a</span> <span data-start="749.699" data-end="752.67">reserved enough space and that content</span> <span data-start="752.67" data-end="755.1">pops in but there are no layout shifts</span> <span data-start="755.1" data-end="756.899">in the page so I'm really happy about</span> <span data-start="756.899" data-end="759.87">that slightly better is my baseline for</span> <span data-start="759.87" data-end="762.66">everything in life at the moment so yeah</span> <span data-start="762.66" data-end="764.879">this is the lighthouse 6 dotto impact we</span> <span data-start="764.879" data-end="766.68">can see that we reduced our layout</span> <span data-start="766.68" data-end="768.629">shifts from zero point two four all the</span> <span data-start="768.629" data-end="771.75">way down to about zero I'm gonna give</span> <span data-start="771.75" data-end="774.089">myself about zero it's in the green so</span> <span data-start="774.089" data-end="776.899">that's great so let's talk about a</span> <span data-start="776.899" data-end="779.22">production example of something like</span> <span data-start="779.22" data-end="782.879">this on Chloe so Chloe had a promotion</span> <span data-start="782.879" data-end="785.639">banner for shipping at the top of their</span> <span data-start="785.639" data-end="788.49">product listings page and you'll see</span> <span data-start="788.49" data-end="789.689">this like free standard shipping</span> <span data-start="789.689" data-end="792.36">promotion listed the very top but this</span> <span data-start="792.36" data-end="795.24">wasn't always there there was a time</span> <span data-start="795.24" data-end="797.43">when this product listings page</span> <span data-start="797.43" data-end="801.45">a CLS of 0.4 which is like really not</span> <span data-start="801.45" data-end="803.58">great because of two things the first</span> <span data-start="803.58" data-end="805.74">was the way they approached their</span> <span data-start="805.74" data-end="808.62">dynamic promo banner and the way that</span> <span data-start="808.62" data-end="811.29">they approached filters let's talk about</span> <span data-start="811.29" data-end="815.13">the banner first now this banner used to</span> <span data-start="815.13" data-end="818.22">be positioned in line underneath the</span> <span data-start="818.22" data-end="821.58">main page header and as you can see here</span> <span data-start="821.58" data-end="823.8">it looks it looks kind of harmless but</span> <span data-start="823.8" data-end="825.39">what's the impact of having a</span> <span data-start="825.39" data-end="827.94">dynamically sized banner on the user</span> <span data-start="827.94" data-end="829.47">experience well we have a video here</span> <span data-start="829.47" data-end="832.08">let's take a look as we can see here</span> <span data-start="832.08" data-end="835.98">once the content is fetched and rendered</span> <span data-start="835.98" data-end="838.47">for this banner it pushes the content</span> <span data-start="838.47" data-end="840.06">for the rest of the page all the way</span> <span data-start="840.06" data-end="843.27">down and that's not very ideal so how</span> <span data-start="843.27" data-end="845.79">did Chloe go about fixing this well they</span> <span data-start="845.79" data-end="848.339">reserved space for this banner the</span> <span data-start="848.339" data-end="851.01">content for this banner was also coming</span> <span data-start="851.01" data-end="853.11">from a client-side request</span> <span data-start="853.11" data-end="856.14">therefore messages were causing a pretty</span> <span data-start="856.14" data-end="858.48">visual layout shift occurring a few</span> <span data-start="858.48" data-end="861.12">seconds into page load now they moved</span> <span data-start="861.12" data-end="863.64">this API call Street to the server and</span> <span data-start="863.64" data-end="865.86">they made sure to reserve enough space</span> <span data-start="865.86" data-end="867.75">for the banner with a simple height</span> <span data-start="867.75" data-end="870.06">setting as a part of this work they</span> <span data-start="870.06" data-end="871.5">moved the position of the banner up a</span> <span data-start="871.5" data-end="874.35">little bit but altogether like moving</span> <span data-start="874.35" data-end="876.12">more work to the server always a good</span> <span data-start="876.12" data-end="878.97">idea and just making sure that they're</span> <span data-start="878.97" data-end="880.589">reserving space these things made a bit</span> <span data-start="880.589" data-end="882.6">of a difference so here's here's the</span> <span data-start="882.6" data-end="886.08">after view here we can see the impact to</span> <span data-start="886.08" data-end="888.18">their product listings pages after these</span> <span data-start="888.18" data-end="889.62">pages after the changes have been made</span> <span data-start="889.62" data-end="893.1">it's uh it's a lot less shifty some I'm</span> <span data-start="893.1" data-end="893.91">happy about that</span> <span data-start="893.91" data-end="896.52">so we talked about their promo banner</span> <span data-start="896.52" data-end="900.42">the other big CLS issue for product</span> <span data-start="900.42" data-end="902.459">listing pages was that Chloe had a</span> <span data-start="902.459" data-end="904.89">filters widget for filtering products</span> <span data-start="904.89" data-end="908.43">now this would rehydrate to become</span> <span data-start="908.43" data-end="911.25">dynamic once it booted up and so on the</span> <span data-start="911.25" data-end="915.209">client it was pending xha our calls for</span> <span data-start="915.209" data-end="917.85">data was waiting on session state based</span> <span data-start="917.85" data-end="920.22">on filter choices in order to be able to</span> <span data-start="920.22" data-end="922.26">like finally render this thing on the</span> <span data-start="922.26" data-end="925.29">screen so this is what this basically</span> <span data-start="925.29" data-end="928.95">looked like we wait for kind of contest</span> <span data-start="928.95" data-end="930.39">to be sent down for the filter widget we</span> <span data-start="930.39" data-end="931.08">wait for Hydra</span> <span data-start="931.08" data-end="932.94">it would still push content on the</span> <span data-start="932.94" data-end="934.86">screen all the way down now what they</span> <span data-start="934.86" data-end="936.63">ended up doing here was that they</span> <span data-start="936.63" data-end="939">adapted this widget to contain more of</span> <span data-start="939" data-end="941.04">the information needed to render the</span> <span data-start="941.04" data-end="942.66">filter widget server-side</span> <span data-start="942.66" data-end="944.88">they'd rendered it with better defaults</span> <span data-start="944.88" data-end="947.16">this helped avoid those layout shifts</span> <span data-start="947.16" data-end="949.19">and I just wanted to give a call out</span> <span data-start="949.19" data-end="952.35">here to the right of the screen we can</span> <span data-start="952.35" data-end="955.62">see the web vitals Chrome extension this</span> <span data-start="955.62" data-end="957.63">gives you a real-time view of all of</span> <span data-start="957.63" data-end="959.73">your vitals metrics and can just be</span> <span data-start="959.73" data-end="961.8">helpful as you were building your site's</span> <span data-start="961.8" data-end="964.5">locally or you're just browsing the web</span> <span data-start="964.5" data-end="965.7">and want to get a sense for the</span> <span data-start="965.7" data-end="967.23">performance of different sites that you</span> <span data-start="967.23" data-end="970.11">you check out on the regular and here's</span> <span data-start="970.11" data-end="972.75">what things look like after their</span> <span data-start="972.75" data-end="976.5">rehydration fix for filters as you can</span> <span data-start="976.5" data-end="979.32">see CLS reduced by a decent amount</span> <span data-start="979.32" data-end="982.29">looking at the before and after and it</span> <span data-start="982.29" data-end="983.91">was just another case of like pay</span> <span data-start="983.91" data-end="985.35">attention to the little things in your</span> <span data-start="985.35" data-end="987.69">pages that might be in aggregate causing</span> <span data-start="987.69" data-end="989.97">lots of things to be pushed down every</span> <span data-start="989.97" data-end="993.9">little CLS fix helps and here's the</span> <span data-start="993.9" data-end="996.06">overall impact of these changes on</span> <span data-start="996.06" data-end="998.22">desktop we can see that the above the</span> <span data-start="998.22" data-end="1000.8">full content is relatively stable and</span> <span data-start="1000.8" data-end="1003.5">offers a much better user experience on</span> <span data-start="1003.5" data-end="1006.08">the whole and this is also reflected in</span> <span data-start="1006.08" data-end="1008.63">lighthouse work on my house got to give</span> <span data-start="1008.63" data-end="1010.67">got a give lighthouse shut up as we can</span> <span data-start="1010.67" data-end="1012.29">see here cumulative layout shift is in</span> <span data-start="1012.29" data-end="1014.24">the green we've hit zero so it's in a</span> <span data-start="1014.24" data-end="1017.27">really solid place so to improve CLS</span> </p>
<p><span data-start="1017.27" data-end="1019.76">Chloe acted on a number of different</span> <span data-start="1019.76" data-end="1022.37">elements it wasn't just one thing they</span> <span data-start="1022.37" data-end="1024.65">reserved space for the promo content in</span> <span data-start="1024.65" data-end="1026.9">terms of its ratio they made sure to set</span> <span data-start="1026.9" data-end="1028.55">width and height dimensions on their</span> <span data-start="1028.55" data-end="1031.16">images and they adopted a skeleton</span> <span data-start="1031.16" data-end="1032.9">pattern with improved perceived</span> <span data-start="1032.9" data-end="1036.02">performance they reserved space for</span> <span data-start="1036.02" data-end="1038.06">their promo banners requests before</span> <span data-start="1038.06" data-end="1039.83">receiving messages and they also</span> <span data-start="1039.83" data-end="1041.75">reserved space for the filters dynamic</span> <span data-start="1041.75" data-end="1043.67">component as well as making a few other</span> <span data-start="1043.67" data-end="1045.61">optimizations to just help with</span> <span data-start="1045.61" data-end="1048.98">rendering so on the whole it was it was</span> <span data-start="1048.98" data-end="1052.82">definitely worth it alright so I have a</span> <span data-start="1052.82" data-end="1054.11">big surprise for you</span> <span data-start="1054.11" data-end="1059">we've got more metrics to talk about put</span> <span data-start="1059" data-end="1060.67">a lot of work into this light</span> <span data-start="1060.67" data-end="1063.05">historically it's been a bit of a</span> <span data-start="1063.05" data-end="1064.22">challenge for web</span> <span data-start="1064.22" data-end="1066.11">developers to measure just how quickly</span> <span data-start="1066.11" data-end="1068.45">the main content of the webpage loads</span> <span data-start="1068.45" data-end="1071.36">and is visible to users thankfully we</span> <span data-start="1071.36" data-end="1073.159">now have metrics like largest content</span> <span data-start="1073.159" data-end="1075.35">full paint that are able to report the</span> <span data-start="1075.35" data-end="1077.48">render time of the largest content</span> <span data-start="1077.48" data-end="1079.49">element that's visible within the</span> <span data-start="1079.49" data-end="1081.95">viewport now you might be wondering what</span> <span data-start="1081.95" data-end="1084.11">causes a poor LCP well there are there</span> <span data-start="1084.11" data-end="1086.03">are lots of things slow server response</span> <span data-start="1086.03" data-end="1088.52">times or a big one this could be your</span> <span data-start="1088.52" data-end="1090.86">back-end infrastructure it could be</span> <span data-start="1090.86" data-end="1094.1">unoptimized database queries API</span> <span data-start="1094.1" data-end="1096.02">responses that are just taking a while</span> <span data-start="1096.02" data-end="1098.419">to resolve it could be render blocking</span> </p>
<p><span data-start="1098.419" data-end="1101.27">JavaScript and CSS slow resource times</span> <span data-start="1101.27" data-end="1104.419">are another big one you could have an</span> <span data-start="1104.419" data-end="1107.12">optimized images slowing down your LCP</span> <span data-start="1107.12" data-end="1109.15">and then there's client-side rendering</span> <span data-start="1109.15" data-end="1112.419">there's a whole class of problems where</span> <span data-start="1112.419" data-end="1114.62">those of us who love working in</span> </p>
<p><span data-start="1114.62" data-end="1116.659">JavaScript and using modern libraries</span> <span data-start="1116.659" data-end="1118.76">and frameworks and bumblers can</span> <span data-start="1118.76" data-end="1122.39">sometimes get into a place where we have</span> <span data-start="1122.39" data-end="1125.6">our requests for assets like images in</span> <span data-start="1125.6" data-end="1129.02">particular hero images behind JavaScript</span> <span data-start="1129.02" data-end="1131.059">fetches so the browser first of all has</span> <span data-start="1131.059" data-end="1133.4">to fetch your JavaScript then it has to</span> <span data-start="1133.4" data-end="1135.559">parse and process that JavaScript to</span> <span data-start="1135.559" data-end="1138.26">fetch your image and that whole process</span> <span data-start="1138.26" data-end="1140.929">can take so long that you delay showing</span> <span data-start="1140.929" data-end="1143.539">meaningful content to your user so it's</span> <span data-start="1143.539" data-end="1144.74">just things like that you should keep an</span> <span data-start="1144.74" data-end="1146.929">eye on there are plenty of tools that</span> <span data-start="1146.929" data-end="1149.15">can help diagnose these issues so let's</span> <span data-start="1149.15" data-end="1150.77">take a look at a at some real-world</span> <span data-start="1150.77" data-end="1153.89">production challenges around LCP and how</span> <span data-start="1153.89" data-end="1155.299">to work around them</span> </p>
<p><span data-start="1155.299" data-end="1157.909">Chloe started off with an L CP of about</span> <span data-start="1157.909" data-end="1160.52">10 or 11 seconds in this view here we</span> <span data-start="1160.52" data-end="1162.95">can see that their primary hero image</span> <span data-start="1162.95" data-end="1165.11">content wasn't wasn't getting fetched</span> <span data-start="1165.11" data-end="1167.09">and rendered until about 11 seconds in</span> <span data-start="1167.09" data-end="1169.429">to our trace their home page suffers</span> <span data-start="1169.429" data-end="1171.98">from in this case it suffered from a few</span> <span data-start="1171.98" data-end="1173.75">different things it had heavy</span> <span data-start="1173.75" data-end="1176.72">full-screen image downloads poorly</span> <span data-start="1176.72" data-end="1179.27">optimized images some images that were</span> <span data-start="1179.27" data-end="1181.64">requested late in the network chain and</span> <span data-start="1181.64" data-end="1183.919">these are very common issues there's</span> <span data-start="1183.919" data-end="1185.99">nothing here that's just like that</span> <span data-start="1185.99" data-end="1187.4">they're doing crazy wrong it's just very</span> <span data-start="1187.4" data-end="1189.559">common issues and it's useful to be</span> <span data-start="1189.559" data-end="1191.86">aware of some of the things that impacts</span> </p>
<p><span data-start="1191.86" data-end="1195.799">LCP so things that impact LCP are image</span> <span data-start="1195.799" data-end="1198.14">elements image elements the</span> <span data-start="1198.14" data-end="1200.63">be inside of an SVG element video</span> <span data-start="1200.63" data-end="1202.73">elements block level elements containing</span> <span data-start="1202.73" data-end="1205.91">text nodes and so let's let's talk about</span> <span data-start="1205.91" data-end="1207.83">images first because they're there</span> <span data-start="1207.83" data-end="1210.44">they're pretty often a cause for poor</span> </p>
<p><span data-start="1210.44" data-end="1214.34">LCP so for many sites images are the</span> <span data-start="1214.34" data-end="1217.22">largest element in view when the page is</span> <span data-start="1217.22" data-end="1220.79">finished loading especially as UX</span> <span data-start="1220.79" data-end="1223.43">patterns have shifted towards us using</span> <span data-start="1223.43" data-end="1225.95">more hero images in our pages so it's</span> <span data-start="1225.95" data-end="1229.07">very very important to optimize our</span> <span data-start="1229.07" data-end="1230.6">images especially anything that's</span> <span data-start="1230.6" data-end="1233.3">visible within the initial viewport now</span> <span data-start="1233.3" data-end="1234.92">there are a few techniques that you can</span> <span data-start="1234.92" data-end="1238.58">use here you can consider not having you</span> <span data-start="1238.58" data-end="1240.95">know an image in the first place if it's</span> <span data-start="1240.95" data-end="1242.27">if it's not that relevant maybe you</span> <span data-start="1242.27" data-end="1246.26">remove it compress those images use you</span> <span data-start="1246.26" data-end="1247.94">know love letters are plenty of image</span> <span data-start="1247.94" data-end="1249.5">optimization tools out there compress</span> <span data-start="1249.5" data-end="1251.09">your images maybe consider converting</span> <span data-start="1251.09" data-end="1253.07">them to more efficient modern formats</span> <span data-start="1253.07" data-end="1255.89">use responsive images and you can also</span> <span data-start="1255.89" data-end="1259.07">consider using an image CDN I'm seeing</span> <span data-start="1259.07" data-end="1261.77">an increasing number of sites leveraging</span> <span data-start="1261.77" data-end="1265.61">image CDNs just to help them get control</span> <span data-start="1265.61" data-end="1269.39">over a ability to just tweak parameters</span> <span data-start="1269.39" data-end="1272.27">in a URL for an image and change what</span> <span data-start="1272.27" data-end="1274.7">format gets served down or what quality</span> <span data-start="1274.7" data-end="1277.76">you have and it's just using an image</span> </p>
<p><span data-start="1277.76" data-end="1279.59">CDN can be a really good way of staying</span> <span data-start="1279.59" data-end="1282.4">on top of modern best practices because</span> <span data-start="1282.4" data-end="1285.4">even even us like that are you know web</span> <span data-start="1285.4" data-end="1287.57">pursues iasts sometimes I have a hard</span> <span data-start="1287.57" data-end="1289.43">time staying on top of all everything</span> <span data-start="1289.43" data-end="1290.63">happening in the image optimization</span> <span data-start="1290.63" data-end="1293.45">world now you might be wondering how can</span> </p>
<p><span data-start="1293.45" data-end="1296.87">I identify the element that is my like</span> <span data-start="1296.87" data-end="1300.74">LCP thankfully we've got some solutions</span> <span data-start="1300.74" data-end="1303.32">here in dev tools in the performance</span> <span data-start="1303.32" data-end="1306.35">panel if you record a trace and you go</span> <span data-start="1306.35" data-end="1308.96">to timings you should find a record for</span> <span data-start="1308.96" data-end="1312.47">LCP click on that record and you'll get</span> <span data-start="1312.47" data-end="1314.45">the summary pane showing up that</span> <span data-start="1314.45" data-end="1315.98">includes things like the size of the</span> <span data-start="1315.98" data-end="1318.41">image and more importantly the related</span> <span data-start="1318.41" data-end="1320.6">note so if you hover over that related</span> <span data-start="1320.6" data-end="1322.58">node it will highlight what in your page</span> <span data-start="1322.58" data-end="1324.95">was considered LCP I personally find</span> <span data-start="1324.95" data-end="1327.68">this really valuable as kind of a</span> <span data-start="1327.68" data-end="1329.52">stepping stone to where</span> </p>
<p><span data-start="1329.52" data-end="1331.62">I'd be spending my time optimizing so</span> <span data-start="1331.62" data-end="1333.57">check that out if you use the</span> <span data-start="1333.57" data-end="1335.28">performance panel this is also something</span> <span data-start="1335.28" data-end="1337.38">that we try to capture in lighthouse so</span> <span data-start="1337.38" data-end="1339.87">lighthouse has got a largest content</span> <span data-start="1339.87" data-end="1343.05">full paint element audit and we try to</span> <span data-start="1343.05" data-end="1345.15">highlight what element was responsible</span> <span data-start="1345.15" data-end="1347.94">here too so if you use lighthouse check</span> <span data-start="1347.94" data-end="1349.86">that out so back to Chloe</span> <span data-start="1349.86" data-end="1351.66">so Chloe discovered that they were</span> <span data-start="1351.66" data-end="1354.81">delivering very high resolution images</span> <span data-start="1354.81" data-end="1357.12">even to even very high resolution for</span> <span data-start="1357.12" data-end="1359.61">retina screens because there is a bit of</span> <span data-start="1359.61" data-end="1362.37">a cutoff point where if you're serving</span> <span data-start="1362.37" data-end="1366.87">kind of two by three by images the human</span> <span data-start="1366.87" data-end="1368.96">eye is is not going to be able to</span> <span data-start="1368.96" data-end="1371.91">perceive large amounts of difference</span> <span data-start="1371.91" data-end="1374.55">there and there are kind of you know you</span> <span data-start="1374.55" data-end="1376.77">have diminishing values that you get out</span> <span data-start="1376.77" data-end="1378.39">of just serving very very very high</span> <span data-start="1378.39" data-end="1380.91">resolution images now in this case we're</span> <span data-start="1380.91" data-end="1382.47">in Ren dev tools were in the elements</span> <span data-start="1382.47" data-end="1384.33">panel we're looking at a specific image</span> <span data-start="1384.33" data-end="1387.36">and what we see is that the maximum</span> <span data-start="1387.36" data-end="1390.74">width of image is being served down is</span> <span data-start="1390.74" data-end="1393.87">1920 pixels it's pretty it's pretty</span> <span data-start="1393.87" data-end="1396.6">large so one of the things that Co we</span> <span data-start="1396.6" data-end="1398.4">actually decided to do was change things</span> <span data-start="1398.4" data-end="1401.04">up here they resized their images to not</span> <span data-start="1401.04" data-end="1403.17">be more than two times the image</span> <span data-start="1403.17" data-end="1406.32">viewport size so they removed source of</span> <span data-start="1406.32" data-end="1411">sizes over 828 width to keep an image</span> <span data-start="1411" data-end="1412.68">maximum size that they were comfortable</span> <span data-start="1412.68" data-end="1414.57">with and that actually ended up being</span> <span data-start="1414.57" data-end="1417.33">pretty fine on retina devices as well so</span> <span data-start="1417.33" data-end="1419.43">is this nice trade-off of how do we</span> <span data-start="1419.43" data-end="1422.49">deliver rich imagery without negatively</span> <span data-start="1422.49" data-end="1425.67">impacting the user experience now by</span> <span data-start="1425.67" data-end="1429.6">doing this work on an iPhone X or a</span> <span data-start="1429.6" data-end="1433.08">pixel to excel that was previously</span> <span data-start="1433.08" data-end="1436.14">seeing any were up to 245 kilobytes</span> <span data-start="1436.14" data-end="1437.79">worth an image bytes being downloaded</span> <span data-start="1437.79" data-end="1440.66">they were able to reduce it down to 125</span> <span data-start="1440.66" data-end="1444.48">that's that's huge that's like a 51</span> <span data-start="1444.48" data-end="1447.03">percent decrease in image bytes being</span> <span data-start="1447.03" data-end="1448.68">served down with no noticeable</span> <span data-start="1448.68" data-end="1451.5">difference so optimize your images</span> <span data-start="1451.5" data-end="1453.12">people the next thing we're going to</span> <span data-start="1453.12" data-end="1455.52">talk about is some of the other image</span> <span data-start="1455.52" data-end="1458.67">optimizations that they performed so on</span> <span data-start="1458.67" data-end="1460.47">the product listings page Chloe</span> <span data-start="1460.47" data-end="1462.85">use image lazy loading which</span> <span data-start="1462.85" data-end="1464.559">you know it's a relatively popular</span> <span data-start="1464.559" data-end="1466.36">pattern what they discovered was that</span> <span data-start="1466.36" data-end="1469.059">there were four primary images being</span> <span data-start="1469.059" data-end="1472.12">loaded above the fold however there was</span> <span data-start="1472.12" data-end="1474.46">one off-screen image that seemed to be</span> <span data-start="1474.46" data-end="1476.14">tripping up their lazy loading</span> <span data-start="1476.14" data-end="1478.27">heuristics and was still being fetched</span> <span data-start="1478.27" data-end="1481.2">now this particular image happened to be</span> <span data-start="1481.2" data-end="1484.51">248 kilobytes in size about 200 plus</span> <span data-start="1484.51" data-end="1487.87">kilobytes in size and this was this was</span> <span data-start="1487.87" data-end="1489.67">negatively impacting the user experience</span> <span data-start="1489.67" data-end="1493">so they wanted to try improving this now</span> <span data-start="1493" data-end="1494.59">on the whole there were a number of</span> <span data-start="1494.59" data-end="1498.16">things Chloe did they were able to bring</span> <span data-start="1498.16" data-end="1500.86">down their above-the-fold image download</span> <span data-start="1500.86" data-end="1503.02">size all the way to 14 and a half</span> <span data-start="1503.02" data-end="1505.66">kilobytes they were able able to tune</span> <span data-start="1505.66" data-end="1508.15">their lazy loading heuristics so that</span> <span data-start="1508.15" data-end="1509.95">off-screen images like the one I was</span> <span data-start="1509.95" data-end="1511.63">just talking about were no longer a</span> <span data-start="1511.63" data-end="1512.169">problem</span> <span data-start="1512.169" data-end="1515.44">they adopted an image CDN they adopted</span> <span data-start="1515.44" data-end="1519.1">wet pee by defaults improved their image</span> <span data-start="1519.1" data-end="1522.309">resizing strategy and the results of</span> <span data-start="1522.309" data-end="1524.41">this outside of just having a nice like</span> <span data-start="1524.41" data-end="1527.049">lighthouse report with lots of greens is</span> <span data-start="1527.049" data-end="1530.59">that each product page now weighs 57%</span> <span data-start="1530.59" data-end="1532.69">less than it did before which is a</span> <span data-start="1532.69" data-end="1534.79">really nice outcome to have as a result</span> <span data-start="1534.79" data-end="1537.34">of like optimizing your images taking a</span> <span data-start="1537.34" data-end="1540.82">step back here's what the homepage LCP</span> <span data-start="1540.82" data-end="1543.309">look like after these changes we can see</span> <span data-start="1543.309" data-end="1546.46">that again previously those hero images</span> <span data-start="1546.46" data-end="1548.919">were not rendering in a total about 11</span> <span data-start="1548.919" data-end="1552.309">seconds in now LCP happens at about 4</span> <span data-start="1552.309" data-end="1554.44">seconds into the process and it's</span> <span data-start="1554.44" data-end="1556.809">complete just a few seconds later the</span> <span data-start="1556.809" data-end="1559.24">request time for our LCP related note</span> <span data-start="1559.24" data-end="1562.33">for kind of our hero images is about 1.3</span> <span data-start="1562.33" data-end="1564.79">seconds in so on the whole this is this</span> <span data-start="1564.79" data-end="1566.59">is really great there's still work they</span> <span data-start="1566.59" data-end="1567.73">could do here but on the whole this is</span> <span data-start="1567.73" data-end="1570.07">like fantastic to see so let's switch</span> <span data-start="1570.07" data-end="1574.14">things up to our next tip defer any</span> <span data-start="1574.14" data-end="1577.48">non-critical JavaScript and CSS to speed</span> <span data-start="1577.48" data-end="1580.03">up loading the main content of your page</span> <span data-start="1580.03" data-end="1582.19">now this is guidance that is it's not</span> <span data-start="1582.19" data-end="1584.59">new it's been around for a few years but</span> <span data-start="1584.59" data-end="1586.15">for anyone that's not familiar with this</span> <span data-start="1586.15" data-end="1587.86">guidance I'll give you a very quick</span> <span data-start="1587.86" data-end="1591.19">recap of it now before a browser can</span> <span data-start="1591.19" data-end="1593.559">render any content it needs to parse</span> </p>
<p><span data-start="1593.559" data-end="1596.26">HTML markup into a Dom tree the</span> <span data-start="1596.26" data-end="1598.66">Arthur needs to pause if it encounters</span> <span data-start="1598.66" data-end="1601.03">any external stylesheets your</span> <span data-start="1601.03" data-end="1604.15">synchronous script and scripts and</span> <span data-start="1604.15" data-end="1606.73">stylesheets can both you know render</span> <span data-start="1606.73" data-end="1609.4">bbbb render blocking resources which can</span> <span data-start="1609.4" data-end="1612.15">delay your first content full paint</span> <span data-start="1612.15" data-end="1614.59">consequently your largest content will</span> <span data-start="1614.59" data-end="1616.51">paint as well and so what we tell people</span> <span data-start="1616.51" data-end="1618.73">to do is defer any of your non-critical</span> <span data-start="1618.73" data-end="1621.49">scripts and stylesheets the speed upload</span> <span data-start="1621.49" data-end="1623.92">so let's take a look once again at the</span> <span data-start="1623.92" data-end="1626.53">product listings page for Chloe as we</span> <span data-start="1626.53" data-end="1628.3">can see this is a trace independent of</span> <span data-start="1628.3" data-end="1630.28">their image optimizations and as we can</span> <span data-start="1630.28" data-end="1632.92">see here light house highlights that</span> <span data-start="1632.92" data-end="1635.17">there are a few render blocking style</span> <span data-start="1635.17" data-end="1637.81">sheets that are delaying early paints on</span> <span data-start="1637.81" data-end="1640.45">the product listings page now this is</span> <span data-start="1640.45" data-end="1642.28">this is kind of manifested in terms of</span> <span data-start="1642.28" data-end="1644.23">like just how much white we're seeing in</span> <span data-start="1644.23" data-end="1645.91">our film strip so one approach to</span> <span data-start="1645.91" data-end="1648.52">addressing this problem is by inlining</span> <span data-start="1648.52" data-end="1651.37">your critical CSS and deferring the load</span> <span data-start="1651.37" data-end="1653.71">of non-critical styles we often call</span> <span data-start="1653.71" data-end="1656.71">this technique critical CSS so critical</span> </p>
<p><span data-start="1656.71" data-end="1660.4">CSS is all about extracting CSS for</span> <span data-start="1660.4" data-end="1661.96">above-the-fold content</span> <span data-start="1661.96" data-end="1664.81">ideally across a number of different</span> <span data-start="1664.81" data-end="1668.32">breakpoints and making sure that you can</span> <span data-start="1668.32" data-end="1670.93">render the above-the-fold content as</span> <span data-start="1670.93" data-end="1673.15">quickly as possible in the first few our</span> <span data-start="1673.15" data-end="1673.81">TTS</span> <span data-start="1673.81" data-end="1676.24">and deferring the load of the rest of</span> <span data-start="1676.24" data-end="1677.98">your style sheets for the page you know</span> <span data-start="1677.98" data-end="1680.26">for things below the fold as soon as</span> <span data-start="1680.26" data-end="1683.08">possible otherwise so how did Chloe do</span> <span data-start="1683.08" data-end="1686.44">this well they built some tooling they</span> <span data-start="1686.44" data-end="1688.66">implemented critical CSS in their sass</span> <span data-start="1688.66" data-end="1691.36">build process and they constructed a</span> <span data-start="1691.36" data-end="1693.81">syntax allowing their developers to</span> <span data-start="1693.81" data-end="1697.33">specify for each widget what part of the</span> </p>
<p><span data-start="1697.33" data-end="1699.45">CSS code goes into their critical CSS</span> <span data-start="1699.45" data-end="1702.22">this is highlighted using the critical</span> <span data-start="1702.22" data-end="1704.11">keywords you see on the screen right now</span> <span data-start="1704.11" data-end="1707.02">now at Build time they're able to build</span> <span data-start="1707.02" data-end="1709.48">both the critical CSS and the</span> <span data-start="1709.48" data-end="1711.7">non-critical CSS so that every single</span> <span data-start="1711.7" data-end="1714.76">build is consistent with both there are</span> <span data-start="1714.76" data-end="1716.5">many ways that you can approach critical</span> <span data-start="1716.5" data-end="1719.53">CSS I've contributed to some tooling on</span> <span data-start="1719.53" data-end="1723.4">this topic in the past and you can you</span> <span data-start="1723.4" data-end="1725.65">can automate it you can go very custom I</span> <span data-start="1725.65" data-end="1727.36">see some teams that will just have a</span> <span data-start="1727.36" data-end="1729.549">critical dot CSS file</span> <span data-start="1729.549" data-end="1732.669">that they manually curate and regardless</span> <span data-start="1732.669" data-end="1734.679">of the the approach that you take what's</span> <span data-start="1734.679" data-end="1736.419">key is just making sure that you're</span> <span data-start="1736.419" data-end="1739.239">delivering important content to the user</span> <span data-start="1739.239" data-end="1741.369">as quickly as possible so we talked</span> <span data-start="1741.369" data-end="1743.679">about the need for you know loading in</span> <span data-start="1743.679" data-end="1746.08">the other style sheets for the page will</span> <span data-start="1746.08" data-end="1748.809">quit what Chloe do is their non-critical</span> </p>
<p><span data-start="1748.809" data-end="1751.419">CSS style sheets are stored in an array</span> <span data-start="1751.419" data-end="1753.61">so they point to references to them on</span> <span data-start="1753.61" data-end="1756.129">their servers and that's injected with a</span> <span data-start="1756.129" data-end="1759.009">deferred script so that it's hopefully</span> <span data-start="1759.009" data-end="1760.929">not render blocking but it's still</span> <span data-start="1760.929" data-end="1763.45">loaded with a relatively high priority</span> <span data-start="1763.45" data-end="1765.58">that isn't going to interfere with the</span> </p>
<p><span data-start="1765.58" data-end="1768.779">HTML parser so what was the impact of</span> <span data-start="1768.779" data-end="1771.789">optimizing their critical CSS Leanne the</span> <span data-start="1771.789" data-end="1773.739">answer is pretty large they were able to</span> <span data-start="1773.739" data-end="1776.139">bring down their first content full</span> <span data-start="1776.139" data-end="1779.399">paint from 2.1 seconds to about 1.1 and</span> <span data-start="1779.399" data-end="1784.32">their LCP from 2.9 seconds to about 1.5</span> <span data-start="1784.32" data-end="1787.08">now this is this is really great work</span> <span data-start="1787.08" data-end="1789.609">optimizing your critical CSS can be a</span> <span data-start="1789.609" data-end="1791.379">bit of a time investment but is</span> <span data-start="1791.379" data-end="1792.999">something that can just make sure that</span> <span data-start="1792.999" data-end="1795.159">your page is getting styled as soon as</span> <span data-start="1795.159" data-end="1797.98">possible so let's talk about another tip</span> </p>
<p><span data-start="1797.98" data-end="1801.159">I mentioned slow server response times</span> <span data-start="1801.159" data-end="1802.629">when we were discussing like what what</span> <span data-start="1802.629" data-end="1806.35">impacts LCP now the longer that it takes</span> <span data-start="1806.35" data-end="1809.109">a browser to receive content from the</span> <span data-start="1809.109" data-end="1811.239">server the longer that it takes to</span> <span data-start="1811.239" data-end="1813.509">render anything on the screen</span> <span data-start="1813.509" data-end="1817.72">the faster server it can respond that</span> <span data-start="1817.72" data-end="1819.1">that's going to improve every single</span> <span data-start="1819.1" data-end="1822.46">page load metric including LCP so you</span> <span data-start="1822.46" data-end="1823.899">might be wondering how can I tell if I</span> <span data-start="1823.899" data-end="1825.1">have a slow server response time</span> <span data-start="1825.1" data-end="1827.289">lighthouse has you covered in lighthouse</span> <span data-start="1827.289" data-end="1829.72">we have an audit called reduce initial</span> <span data-start="1829.72" data-end="1832.509">server response time and if you if you</span> <span data-start="1832.509" data-end="1835.359">see this it's a good hint to spend more</span> <span data-start="1835.359" data-end="1838.21">time diagnosing the problem and causes</span> <span data-start="1838.21" data-end="1840.46">of the problem as I mentioned earlier it</span> <span data-start="1840.46" data-end="1842.399">can be plenty of things on your back-end</span> <span data-start="1842.399" data-end="1845.649">and we're trying to optimize our server</span> <span data-start="1845.649" data-end="1847.509">response times there's plenty that we</span> <span data-start="1847.509" data-end="1851.669">can do in terms of optimizing you know</span> <span data-start="1851.669" data-end="1856.179">our DNS our pre connects all of those</span> <span data-start="1856.179" data-end="1857.409">types of things but there are also</span> <span data-start="1857.409" data-end="1858.999">things that we can do to optimize</span> <span data-start="1858.999" data-end="1861.999">loading priority this is where</span> <span data-start="1861.999" data-end="1863.08">techniques like</span> <span data-start="1863.08" data-end="1865.12">well preload and serverpush can come</span> <span data-start="1865.12" data-end="1867.19">into play now if you're new to server</span> <span data-start="1867.19" data-end="1869.44">push I'll give you a quick summary of it</span> <span data-start="1869.44" data-end="1873.61">to improve latency hb2 introduced this</span> <span data-start="1873.61" data-end="1876.669">idea server push which basically allows</span> <span data-start="1876.669" data-end="1879.19">a server to push resources to the</span> <span data-start="1879.19" data-end="1881.14">browser before they're explicitly</span> <span data-start="1881.14" data-end="1884.74">requested now you and I as developers we</span> <span data-start="1884.74" data-end="1886.84">can as well as anyone else watching</span> <span data-start="1886.84" data-end="1889.659">you're all awesome too we often know</span> <span data-start="1889.659" data-end="1892.45">what the most important resources are on</span> <span data-start="1892.45" data-end="1895.12">a page and so we can start pushing those</span> <span data-start="1895.12" data-end="1899.35">as soon as you know things respond with</span> <span data-start="1899.35" data-end="1901.87">the initial requests this allows the</span> <span data-start="1901.87" data-end="1904.389">server to fully utilize was otherwise an</span> <span data-start="1904.389" data-end="1907.59">idle network to improve page load times</span> <span data-start="1907.59" data-end="1910.899">now server push is is not without its</span> <span data-start="1910.899" data-end="1914.649">it's nuanced this is one of those</span> <span data-start="1914.649" data-end="1916">optimizations where you need to be</span> <span data-start="1916" data-end="1920.919">careful it's possible to over push so</span> <span data-start="1920.919" data-end="1925.059">server push is not HTTP cache aware so I</span> <span data-start="1925.059" data-end="1926.74">could push something for a particular</span> <span data-start="1926.74" data-end="1929.139">page the user could come back to another</span> <span data-start="1929.139" data-end="1931.179">related page and the server would push</span> <span data-start="1931.179" data-end="1934.21">those exact same resources again the way</span> <span data-start="1934.21" data-end="1937.57">to avoid that is by either using cookies</span> <span data-start="1937.57" data-end="1942.279">or a serviceworker to avoid those those</span> <span data-start="1942.279" data-end="1944.11">refetch is for those types of resources</span> <span data-start="1944.11" data-end="1946.48">and track what's in the cache but it</span> <span data-start="1946.48" data-end="1948.25">does involve a little bit more work in</span> <span data-start="1948.25" data-end="1950.32">general server pushes an optimization</span> <span data-start="1950.32" data-end="1952.059">that can have a big impact but just just</span> <span data-start="1952.059" data-end="1954.19">be aware of some of that nuance it's not</span> <span data-start="1954.19" data-end="1956.11">quite as simple as just like turning it</span> <span data-start="1956.11" data-end="1960.399">on sometimes now Chloe use automatic</span> <span data-start="1960.399" data-end="1962.169">server push which is an implementation</span> <span data-start="1962.169" data-end="1965.98">provided by Akamai it uses data to</span> <span data-start="1965.98" data-end="1967.99">decide you know when to push critical</span> </p>
<p><span data-start="1967.99" data-end="1971.049">CSS fonts and script and if you're</span> <span data-start="1971.049" data-end="1974.289">manually using server push yourself you</span> <span data-start="1974.289" data-end="1975.97">might end up looking at syntax that</span> <span data-start="1975.97" data-end="1978.01">looks a little bit like this what we see</span> <span data-start="1978.01" data-end="1982.059">here is the link HTTP header this is</span> <span data-start="1982.059" data-end="1984.61">actually the preload resource hint in</span> <span data-start="1984.61" data-end="1987.7">action and it's a separate but distinct</span> <span data-start="1987.7" data-end="1990.72">optimization from server push but in</span> <span data-start="1990.72" data-end="1994.45">reality most hb2 implementations will</span> <span data-start="1994.45" data-end="1996.22">push an asset</span> <span data-start="1996.22" data-end="1998.679">specified in a link header containing a</span> <span data-start="1998.679" data-end="2000.929">preload resource hint so you can use the</span> <span data-start="2000.929" data-end="2003.99">syntax in order to enable server pushes</span> <span data-start="2003.99" data-end="2007.2">for for a page so what was the impact of</span> <span data-start="2007.2" data-end="2009.48">this optimization without server push</span> </p>
<p><span data-start="2009.48" data-end="2011.789">Chloe you're finding in their lab tests</span> <span data-start="2011.789" data-end="2015.51">that LCP was closer to four seconds but</span> <span data-start="2015.51" data-end="2018.69">with it it was closer to 2.5 seconds</span> <span data-start="2018.69" data-end="2021.21">which is like a huge amount of impact on</span> <span data-start="2021.21" data-end="2022.86">screen at the moment we've been</span> <span data-start="2022.86" data-end="2025.02">verifying that using lighthouse but you</span> <span data-start="2025.02" data-end="2028.559">can also tell if individual requests in</span> <span data-start="2028.559" data-end="2030.87">you know we're server pushed using</span> <span data-start="2030.87" data-end="2033.179">things like dev tools and using things</span> <span data-start="2033.179" data-end="2035.7">like webpage tests Network waterfall</span> <span data-start="2035.7" data-end="2038.909">view both are very very handy now we're</span> <span data-start="2038.909" data-end="2042.809">on to our very last metric right Chloe</span> <span data-start="2042.809" data-end="2044.94">didn't optimize her forced input delay</span> <span data-start="2044.94" data-end="2047.34">but I did want to very quickly cover it</span> <span data-start="2047.34" data-end="2050.159">now first input delay measures the time</span> <span data-start="2050.159" data-end="2052.71">from when a user first interacts with a</span> <span data-start="2052.71" data-end="2055.59">page so that moment when they start to</span> <span data-start="2055.59" data-end="2059.609">click on a button or or tap some UI some</span> </p>
<p><span data-start="2059.609" data-end="2062.159">JavaScript powered control so the time</span> <span data-start="2062.159" data-end="2063.899">that the browser is actually able to</span> <span data-start="2063.899" data-end="2066.99">respond to that interaction now there</span> <span data-start="2066.99" data-end="2069.599">are many things that cause a poor first</span> <span data-start="2069.599" data-end="2072.599">input delay there can be long tasks on</span> <span data-start="2072.599" data-end="2075.54">the main thread heavy JavaScript</span> <span data-start="2075.54" data-end="2078.72">execution large JavaScript bundles can</span> <span data-start="2078.72" data-end="2082.08">delay how soon script can be processed</span> <span data-start="2082.08" data-end="2084.119">by the browser and it can have an impact</span> <span data-start="2084.119" data-end="2085.95">here and then you have things like</span> <span data-start="2085.95" data-end="2088.8">render blocking script now in general I</span> <span data-start="2088.8" data-end="2091.5">would strongly recommend using</span> <span data-start="2091.5" data-end="2093.389">lighthouse and using dev tools because</span> <span data-start="2093.389" data-end="2095.429">they do try to point out areas where you</span> <span data-start="2095.429" data-end="2097.2">might have long tasks or heavy script</span> <span data-start="2097.2" data-end="2099.69">execution very often the solution is to</span> <span data-start="2099.69" data-end="2102.599">just break up this work serve what the</span> <span data-start="2102.599" data-end="2105.72">user needs when they need it and try to</span> <span data-start="2105.72" data-end="2108.109">look at opportunities for you know</span> <span data-start="2108.109" data-end="2110.19">minimizing main thread work as much as</span> <span data-start="2110.19" data-end="2112.52">possible sometimes people will</span> <span data-start="2112.52" data-end="2115.17">contextualize this in terms of you know</span> <span data-start="2115.17" data-end="2117.03">maybe shift some of that work some of</span> <span data-start="2117.03" data-end="2120.24">the logic work to a web worker but</span> <span data-start="2120.24" data-end="2122.099">regardless of the path you want to take</span> <span data-start="2122.099" data-end="2125.64">there the the end goal is essentially</span> <span data-start="2125.64" data-end="2127.44">just making sure that the main thread</span> <span data-start="2127.44" data-end="2128.87">isn't busy and that you</span> <span data-start="2128.87" data-end="2131.18">interactions are not delayed so we're</span> <span data-start="2131.18" data-end="2133.76">almost at the end of our journey with</span> </p>
<p><span data-start="2133.76" data-end="2136.85">Chloe here we can take a look at Chloe's</span> <span data-start="2136.85" data-end="2139.52">overall web vitals in the lab thanks to</span> <span data-start="2139.52" data-end="2141.68">their investments in performance and</span> <span data-start="2141.68" data-end="2144.35">user experience they were able to reduce</span> <span data-start="2144.35" data-end="2146.42">their cumulative layout shifts down to</span> <span data-start="2146.42" data-end="2149.93">zero and their LCP by almost half this</span> <span data-start="2149.93" data-end="2152.3">is like this is mind-blowing li awesome</span> <span data-start="2152.3" data-end="2154.22">this is like really really cool as</span> <span data-start="2154.22" data-end="2157.04">you've seen all of this work is kind of</span> <span data-start="2157.04" data-end="2160.19">the culmination of a number of smaller</span> <span data-start="2160.19" data-end="2162.62">optimizations that when added up</span> <span data-start="2162.62" data-end="2164.66">actually make a pretty significant</span> <span data-start="2164.66" data-end="2166.94">impact to your end user experience and</span> <span data-start="2166.94" data-end="2168.77">we don't have to just look at data in</span> <span data-start="2168.77" data-end="2170.36">the lab we can look at the field as well</span> <span data-start="2170.36" data-end="2173.36">here is chrome user experience report</span> <span data-start="2173.36" data-end="2176.57">data for Chloe and as we can see our</span> <span data-start="2176.57" data-end="2179.51">core web vitals metrics for LCP and CLS</span> <span data-start="2179.51" data-end="2182.45">are trending in the right direction</span> </p>
<p><span data-start="2182.45" data-end="2186.59">CLS went from 0.85 down to zero in the</span> <span data-start="2186.59" data-end="2189.11">latest data set and this is all like on</span> <span data-start="2189.11" data-end="2190.55">the whole it's tremendous work it's</span> <span data-start="2190.55" data-end="2192.35">really great to see and I know that</span> <span data-start="2192.35" data-end="2195.35">Chloe are happy to continue building on</span> <span data-start="2195.35" data-end="2198.08">this work in the future as well now if</span> <span data-start="2198.08" data-end="2200.33">you're interested in building dashboards</span> <span data-start="2200.33" data-end="2202.88">like this for your own team measuring</span> <span data-start="2202.88" data-end="2204.65">the core web vitals you might be</span> <span data-start="2204.65" data-end="2206.06">interested in checking out the chrome</span> <span data-start="2206.06" data-end="2208.49">user experience report dashboard this is</span> <span data-start="2208.49" data-end="2210.56">a great solution that just allows you to</span> <span data-start="2210.56" data-end="2213.41">drop in a URL and very quickly get</span> <span data-start="2213.41" data-end="2216.71">access to field data and distributions</span> <span data-start="2216.71" data-end="2218.15">for the different core Web vitals</span> <span data-start="2218.15" data-end="2220.88">it also summarizes the metrics so if</span> <span data-start="2220.88" data-end="2222.77">you're trying to share around this</span> <span data-start="2222.77" data-end="2224.36">report with other people on your team</span> <span data-start="2224.36" data-end="2227.27">they'll hopefully be able to also get</span> <span data-start="2227.27" data-end="2228.8">some familiarity with the core web</span> <span data-start="2228.8" data-end="2232.79">vitals — we also recently shipped a new</span> <span data-start="2232.79" data-end="2235.52">chrome user experience report API crux</span> </p>
<p><span data-start="2235.52" data-end="2238.16">API this is great for programmatically</span> <span data-start="2238.16" data-end="2239.69">being able to build out your own</span> <span data-start="2239.69" data-end="2241.79">dashboards very similar to what we were</span> <span data-start="2241.79" data-end="2243.92">just taking a look at so check that out</span> <span data-start="2243.92" data-end="2247.13">too and that's it I hope that you found</span> <span data-start="2247.13" data-end="2250.55">this talk useful go and optimize your</span> <span data-start="2250.55" data-end="2253.37">web vitals there are plenty of Doc's</span> <span data-start="2253.37" data-end="2255.53">over on web dev that cover the</span> <span data-start="2255.53" data-end="2258.02">methodology the tools as well as the</span> <span data-start="2258.02" data-end="2260.36">best practices that you can use to get</span> <span data-start="2260.36" data-end="2262.28">fast and stay fast</span> <span data-start="2262.28" data-end="2264.2">my name is addy osmani I hope this has</span> <span data-start="2264.2" data-end="2265.99">been useful thank you</span> <span data-start="2265.99" data-end="2272.49">[Music]</span> <span data-start="2272.49" data-end="2274.68">[Applause]</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
