<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>B-lipaiZII8</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/B-lipaiZII8?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="12.3" data-end="14.22">Hello and welcome. My name is Stephen Fluin.</span> <span data-start="15.22" data-end="17.47">I'm a Developer Advocate on the Angular team here at</span> <span data-start="17.47" data-end="19.93">Google. My job is really fun because I get to help</span> <span data-start="20.51" data-end="21.77">developers be successful with Angular.</span> </p>
<p><span data-start="22.27" data-end="24.77">And I get to spend a lot of time listening and engaging</span> <span data-start="24.77" data-end="27.31">with the community, so we can reflect your needs onto the</span> <span data-start="27.31" data-end="30.19">team. One things that we learned, having worked with a lot</span> <span data-start="30.4" data-end="33.4">of developers across the world, is that staying up</span> <span data-start="33.4" data-end="35.2">to date is really, really important.</span> <span data-start="35.24" data-end="37.41">And so today's talk is all about how to keep your</span> <span data-start="37.45" data-end="40.08">application as fast as possible and as fresh as possible</span> <span data-start="40.41" data-end="42.79">using Angular. We're gonna be diving into some of the best</span> <span data-start="42.79" data-end="44.71">practices that you should be following as an application</span> <span data-start="44.71" data-end="47.79">developer. And we'll take a look at live code and see how</span> <span data-start="47.79" data-end="50.59">you can actually go in and debug and build your application</span> <span data-start="50.59" data-end="52.71">out. So let's actually gets started.</span> </p>
<p><span data-start="53.05" data-end="56.26">So if we take a look at we've got here, this is a</span> <span data-start="56.38" data-end="58.43">application that I've built using the Angular CLI.</span> <span data-start="59.01" data-end="61.14">So it's a very, very basic application that should look</span> <span data-start="61.14" data-end="64.02">very, very familiar. It's basically we ran "ng new" and we</span> <span data-start="64.14" data-end="65.85">installed something called Angular Material.</span> <span data-start="65.89" data-end="68.73">And so if you take a look at the AppComponent, I've put in</span> <span data-start="68.81" data-end="71.4">an app dashboard. And so if we ran a command like "ng</span> <span data-start="71.44" data-end="74.4">serve", what we would see is a normal</span> <span data-start="74.4" data-end="76.78">dashboard of an application that's coming from Angular</span> <span data-start="76.86" data-end="78.74">Material. So we've got a few dependencies installed.</span> </p>
<p><span data-start="78.95" data-end="81.41">We've got a few other things installed and all that should</span> <span data-start="81.41" data-end="83.16">just be coming to you kind of automatically.</span> <span data-start="83.62" data-end="86.37">So here we go. This is just the default blank dashboard.</span> <span data-start="86.66" data-end="88.46">And so even though we haven't written a ton of code, we've</span> <span data-start="88.46" data-end="91.13">got the application up and running and it's pulling in</span> <span data-start="91.46" data-end="93.13">a ton of code, right? We're pulling in the features of</span> <span data-start="93.3" data-end="95.8">Angular necessary for these animations, for these menus,</span> <span data-start="95.84" data-end="98.51">for these dialogs, as well as for all of this content</span> <span data-start="98.59" data-end="100.76">around this dashboard that a user could interact with and</span> <span data-start="100.76" data-end="103.56">engage with. And so the first thing I want to do in order</span> <span data-start="103.56" data-end="106.1">to make my application fast as possible is I really want to</span> <span data-start="106.1" data-end="108.6">understand my application. And so we're gonna make a couple</span> <span data-start="108.6" data-end="111.73">changes within our build configuration in the angular.json</span> <span data-start="112.31" data-end="114.86">file. So what we're gonna do is we're gonna find the</span> <span data-start="114.9" data-end="117.15">angular.json file. You're gonna find this directly in the</span> <span data-start="117.19" data-end="118.74">root of your application.</span> </p>
<p><span data-start="119.28" data-end="121.49">And what we're gonna do is we're going to find in the</span> <span data-start="121.53" data-end="124.74">Production Build settings, we're going to change</span> <span data-start="124.74" data-end="126.25">two settings here.</span> <span data-start="126.29" data-end="128.71">We're going to say a sourceMap. I'm gonna change that from</span> <span data-start="128.71" data-end="132.04">false to true, as well as in our</span> <span data-start="132.75" data-end="134.67">namedChunks, we're gonna turn that on to true.</span> </p>
<p><span data-start="135.42" data-end="137.84">What sourceMap does is this will actually take my</span> <span data-start="138.05" data-end="141.01">application and map all of the generated JavaScript</span> <span data-start="141.39" data-end="143.72">that comes out of the build and map it back into</span> <span data-start="144.47" data-end="146.89">the code that that JavaScript came from.</span> <span data-start="146.97" data-end="149.39">So if some of the generated code came from Angular</span> <span data-start="149.69" data-end="151.69">Material, we'll see that. If it came from Angular itself,</span> <span data-start="151.69" data-end="153.98">we'll see that. And we'll even see things like the</span> <span data-start="154.02" data-end="157.15">generated JavaScript being mapped back to my HTML and</span> <span data-start="157.23" data-end="159.78">into the application code that I'm writing for all the</span> <span data-start="159.78" data-end="160.91">components that I'm creating.</span> <span data-start="160.99" data-end="163.99">So source maps are really great way for you to understand</span> <span data-start="164.24" data-end="167.12">what's going on in your application and the relationship</span> <span data-start="167.12" data-end="170.04">between what happens in the code you write in the IDE and</span> <span data-start="170.04" data-end="171.87">the code being delivered to your users.</span> </p>
<p><span data-start="172.29" data-end="174.63">And so there's a lot of steps that we end up taking along</span> <span data-start="174.63" data-end="176.55">that way, right? There's the angular compiler that takes</span> <span data-start="176.55" data-end="178.59">that HTML and turns it into JavaScript.</span> <span data-start="178.8" data-end="181.18">But there's also other steps that we do, like optimizations</span> <span data-start="181.18" data-end="183.47">where we'll change some of the property names.</span> </p>
<p><span data-start="183.72" data-end="185.97">You've got bundling so that we get all of this JavaScript</span> <span data-start="185.97" data-end="188.81">coming down as a single kind of cohesive bundle that makes</span> <span data-start="188.81" data-end="191.39">sense to browsers. And so sourceMap allows us to follow</span> <span data-start="191.39" data-end="194.36">that path, follow that process, and give us really good</span> <span data-start="194.4" data-end="196.9">insights. And so what we can do is, having made these two</span> <span data-start="196.9" data-end="199.82">changes, we can actually now go and run the ng</span> <span data-start="200.07" data-end="201.07">build  — prod.</span> </p>
<p><span data-start="202.91" data-end="205.45">What that will do is that will create a production build of</span> <span data-start="205.45" data-end="207.2">our application, which is normally what you ship down to</span> <span data-start="207.28" data-end="210.04">browsers. But because we've turned on source maps and we</span> <span data-start="210.16" data-end="213.17">turned on namedChunks, we'll actually see the JavaScript</span> <span data-start="213.17" data-end="215.08">and be able to analyze those chunks.</span> <span data-start="215.46" data-end="217.29">And so we're also going to using another tool today called</span> <span data-start="217.42" data-end="218.42">source-map-explorer.</span> <span data-start="218.84" data-end="222.01">There's a bunch of other tools out there that developers</span> <span data-start="222.01" data-end="224.43">use to analyze bundle size and chunk size.</span> <span data-start="224.68" data-end="226.72">But we on the Angular team actually really strongly</span> <span data-start="226.72" data-end="228.76">recommend that you only use source-map-explorer because</span> <span data-start="229.14" data-end="231.64">other tools out there like webpack-bundle-analyzer that</span> <span data-start="231.64" data-end="234.6">categorically misrecognize some of those steps within</span> <span data-start="234.6" data-end="236.98">our process. And so we've done that production build, and</span> <span data-start="237.4" data-end="240.07">now whenever you want to actually take a look at what a</span> <span data-start="240.86" data-end="242.32">source map looks like, we can just run source-map-explorer.</span> </p>
<p><span data-start="243.07" data-end="244.66">If you don't have this installed, you can just install it</span> <span data-start="244.66" data-end="246.87">globally: "yarn global add source-map-explorer".</span> <span data-start="248.49" data-end="251">Or you can install it local to your project.</span> <span data-start="251.12" data-end="253.41">Whichever makes sense to you, just go and do that.</span> <span data-start="254.21" data-end="255.21">What we'll do is we'll run source-map-explorer,</span> <span data-start="257.46" data-end="260.3">and we will pass it in the JavaScript file that we</span> <span data-start="260.55" data-end="262.67">want to analyze. And so we can see it, we've got our dist</span> <span data-start="262.67" data-end="264.63">folder here and we're gonna look at the es2015</span> <span data-start="265.63" data-end="267.18">version of our JavaScript.</span> </p>
<p><span data-start="267.64" data-end="270.39">So if we run that, it's gonna pop up in a web browser, and</span> <span data-start="270.64" data-end="273.31">we're going to see this visual interactive story about</span> <span data-start="273.73" data-end="276.81">our applications. So we can see our overall bundle size, in</span> <span data-start="276.81" data-end="279.23">terms of minified but not compressed, JavaScript.</span> <span data-start="279.73" data-end="281.44">So it'll actually be a little bit smaller when it goes over</span> <span data-start="281.44" data-end="282.99">the network. We have about</span> <span data-start="284.95" data-end="286.41">452 kilobytes of application.</span> <span data-start="286.78" data-end="288.74">And what's really, really helpful here is that you can see</span> <span data-start="288.74" data-end="290.28">where that bundle size is coming from.</span> </p>
<p><span data-start="290.28" data-end="293.16">So you can see animations is 64 kilobytes</span> <span data-start="293.62" data-end="295.75">and your material is about 56 kilobytes.</span> <span data-start="296.42" data-end="299.46">We've got things like HTTP where we might</span> <span data-start="299.46" data-end="301.34">not actually need these things. And we might not even know</span> <span data-start="301.34" data-end="302.92">that they are in our bundle. We might have forgotten at</span> <span data-start="302.92" data-end="304.88">some point along the way. So you can see I'm pulling in</span> <span data-start="304.88" data-end="306.43">forms and HTTP.</span> <span data-start="306.93" data-end="309.64">If we actually go into our application, now that we know</span> <span data-start="309.68" data-end="310.68">that those things are there we can say, "Hey.</span> </p>
<p><span data-start="311.31" data-end="312.68">I don't actually need that for this dashboard". Right? Like</span> <span data-start="312.68" data-end="315.56">we're not — if we look at the content I'm showing you,</span> <span data-start="315.81" data-end="317.94">there's no form data here. There's no data coming from the</span> <span data-start="317.94" data-end="320.86">internet. And I can go into my AppModule and</span> <span data-start="320.86" data-end="322.82">I could pull those out. Okay? So I'll just comment these</span> <span data-start="322.82" data-end="324.65">out because we don't need a HTTP or forms.</span> <span data-start="325.07" data-end="327.86">What should happen is when I do my next production bundle,</span> <span data-start="329.11" data-end="330.45">all of that code is going to be left out.</span> </p>
<p><span data-start="330.45" data-end="332.79">So we're going to be able to see that our bundle size will</span> <span data-start="332.79" data-end="335.95">come down from around 450 KB to a little bit less</span> <span data-start="335.95" data-end="337.5">than that, which is really, really nice. And it should</span> <span data-start="337.5" data-end="340.46">actually be exactly leaving out the size of the HTTP bundle</span> <span data-start="340.63" data-end="342.42">and the size of the forms bundle.</span> <span data-start="342.88" data-end="345.51">And so source maps are one of the best tools in your</span> <span data-start="345.59" data-end="348.3">toolbox. And we really recommend that every developer be</span> <span data-start="348.3" data-end="349.3">using source-map-explorer.</span> <span data-start="349.59" data-end="351.93">Using this on a regular basis to understand your</span> <span data-start="351.93" data-end="353.51">application, especially when you're doing any sort of</span> <span data-start="353.51" data-end="354.81">performance optimization.</span> <span data-start="355.47" data-end="357.94">Now, let's say that you are looking at your bundle and</span> <span data-start="357.94" data-end="359.85">you're saying it's still too big, but I need all of those</span> <span data-start="359.85" data-end="361.65">features. I need all of those capabilities.</span> <span data-start="362.23" data-end="365.03">Fortunately, the Angular CLI offers a lot of really smart</span> <span data-start="365.03" data-end="367.32">capabilities. One of those capabilities is being able to</span> <span data-start="367.61" data-end="370.53">take an application and build out lazy loaded modules.</span> </p>
<p><span data-start="370.53" data-end="372.45">And so let's actually go ahead and do this.</span> <span data-start="372.49" data-end="375.04">And so I'm going to use the CLI here and I'm going to say</span> <span data-start="375.08" data-end="376.37">"ng", which is the Angular command.</span> <span data-start="376.7" data-end="379.54">And I'm gonna say "generate module", and I'm going to give</span> <span data-start="379.54" data-end="381.63">it a root module that it's going to connect</span> <span data-start="382.54" data-end="384.46">back to. So what we're gonna do is we're gonna create a</span> <span data-start="384.46" data-end="387.09">separate part of our application where we can pull in</span> <span data-start="387.13" data-end="389.72">features that we need and just leave all of that code</span> <span data-start="389.76" data-end="391.51">outside of the main bundle. And so we're going to generate</span> <span data-start="391.51" data-end="394.35">a module here and I'll just link it back to the module</span> <span data-start="394.64" data-end="397.27">known as App Module, which is the root of my application.</span> <span data-start="397.85" data-end="398.85">And now I'm going to give it a route.</span> </p>
<p><span data-start="399.18" data-end="401.94">And so what this does is it automatically wires up this</span> <span data-start="401.98" data-end="405.07">module to be lazy-loaded whenever a user hits that route.</span> <span data-start="405.15" data-end="407.61">And so we'll just make, for example, an about page.</span> <span data-start="408.61" data-end="410.7">And so it is going to do it's going to generate a module</span> <span data-start="410.7" data-end="411.7">called "AboutModule".</span> <span data-start="412.61" data-end="415.03">It's gonna be able to route to it and then is gonna give me</span> <span data-start="415.03" data-end="416.03">an AboutComponent.</span> <span data-start="416.54" data-end="418.54">So we can see all of that in our source code.</span> <span data-start="418.58" data-end="421.25">So it's just close all these files and we're gonna see</span> <span data-start="421.58" data-end="423.63">it created a new About folder with our new</span> <span data-start="424.59" data-end="426.17">module and our new code.</span> <span data-start="426.67" data-end="428.63">And so if we do another production build,</span> <span data-start="430.05" data-end="431.76">what we'll actually see, because we</span> <span data-start="433.01" data-end="435.64">turned on namedChunks, we'll actually get out now, not</span> <span data-start="436.14" data-end="438.02">only a main chunk, a MainModule, we're</span> <span data-start="439.18" data-end="440.35">also going to get out an AboutModule.</span> </p>
<p><span data-start="440.73" data-end="443.77">We can see and independently verify the size of that</span> <span data-start="443.77" data-end="446.9">module and independently verify what the</span> <span data-start="447.07" data-end="449.57">dependencies of that module are doing to the overall bundle</span> <span data-start="449.57" data-end="450.61">size of our application.</span> <span data-start="450.9" data-end="452.74">And so what you'll see is that by default, an Angular</span> <span data-start="452.74" data-end="454.87">module is really, really small. It's very, very thin.</span> <span data-start="454.87" data-end="456.49">It doesn't add a ton of bundle size your application.</span> <span data-start="456.78" data-end="459.66">It's almost always the dependencies that you are pulling in</span> <span data-start="459.66" data-end="461.83">as a developer, the features that you are reaching out for.</span> <span data-start="462.66" data-end="465.67">And what Angular will do is, intelligently based on the</span> <span data-start="466.08" data-end="469.09">where you do the imports, will lazy load and split</span> <span data-start="469.09" data-end="472.09">that code. So if you remember, we pulled HTTP and forms</span> <span data-start="472.13" data-end="474.97">out of our main chunk, we can actually now pull that in.</span> </p>
<p><span data-start="475.09" data-end="477.47">And so you can see we've generated a — Let's just</span> <span data-start="478.06" data-end="480.93">clear this out. Let's take a look in our dist folder here.</span> <span data-start="481.6" data-end="484.52">You can see we've got a main chunk and now we've got</span> <span data-start="484.6" data-end="486.52">this nice new AboutModule.</span> <span data-start="486.86" data-end="489.73">And so you can see in the es2015 version our AboutModule</span> <span data-start="490.15" data-end="492.15">is only about 1.1K of code.</span> <span data-start="492.19" data-end="494.15">So it's just that AboutComponent because it doesn't have</span> <span data-start="494.15" data-end="497.16">any dependencies. But if we add back in more dependencies</span> <span data-start="497.24" data-end="499.99">into that chunk, if we wanted to pull in, for example,</span> </p>
<p><span data-start="500.04" data-end="502.62">Angular Material into that AboutModule, then it's going to</span> <span data-start="502.62" data-end="504.62">pull in that code. But it's going to do it very, very</span> <span data-start="504.62" data-end="506.79">intelligently. It's going to lazy load all of that code.</span> <span data-start="506.88" data-end="509.29">So if you haven't set up lazy loading before, it's really,</span> <span data-start="509.29" data-end="511.59">really easy. Just generate a new module with that command</span> <span data-start="511.59" data-end="514.09">that I showed where we generate a module and we hang it</span> <span data-start="514.13" data-end="516.39">onto the routing structure of our application.</span> </p>
<p><span data-start="517.51" data-end="519.6">All right. Next up, I want to talk a little bit about what</span> <span data-start="519.76" data-end="521.6">happens after we build an application, after we've been</span> <span data-start="521.6" data-end="523.43">building it out and we've added more and more features.</span> <span data-start="523.85" data-end="525.6">It's very, very easy to backslide.</span> <span data-start="525.89" data-end="528.19">One of things that the Chrome team has seen consistently is</span> <span data-start="528.19" data-end="530.52">that even applications that spend a ton of time building</span> <span data-start="530.52" data-end="533.03">great performance into their apps tend to backslide because</span> <span data-start="533.07" data-end="534.78">we as developers, we want to add more features.</span> <span data-start="534.78" data-end="537.07">We want to push more functionality to our users.</span> <span data-start="537.16" data-end="539.45">And that often comes with more dependencies, which</span> <span data-start="539.62" data-end="542.12">sometimes we don't realize is negatively affecting our</span> <span data-start="542.12" data-end="544.62">bundle size. And so one of the features that's built into</span> <span data-start="544.62" data-end="546.29">the Angular CLI is called "bundle budgets".</span> <span data-start="547" data-end="548.54">And so, again, if we go back into our angular.json.</span> <span data-start="548.54" data-end="550.25">So we'll just search for that.</span> </p>
<p><span data-start="550.92" data-end="553.55">We can see this nice little budget section.</span> <span data-start="553.84" data-end="555.59">And what this does is it allows you to set several</span> <span data-start="555.59" data-end="557.38">different budgets for your application.</span> <span data-start="558.14" data-end="559.72">By default, we give you two out of the box.</span> <span data-start="559.72" data-end="560.97">We give you an initial budget.</span> <span data-start="561.22" data-end="563.14">So this is the JavaScript that it takes</span> <span data-start="564.18" data-end="566.81">to load the initial page of your application.</span> <span data-start="566.81" data-end="569.86">So right now, we are warning at</span> <span data-start="570.06" data-end="572.65">2 MB. So we'll see a warning as part of our build if our</span> <span data-start="572.73" data-end="573.94">application is over 2 MB.</span> <span data-start="574.69" data-end="577.32">And our build will actually error out if it's more than 5</span> </p>
<p><span data-start="577.57" data-end="580.03">MB. And so those are very, very conservative defaults.</span> <span data-start="580.07" data-end="582.87">We recommend you turn those as small as you can to really</span> <span data-start="582.99" data-end="584.7">just give yourself a knowledge of when you're increasing</span> <span data-start="584.7" data-end="587.04">your bundle sizes. It's a conscious choice rather than an</span> <span data-start="587.08" data-end="589.5">accident. You'll see we also have a few other types of</span> <span data-start="589.5" data-end="591.63">budgets, including any component style.</span> <span data-start="591.92" data-end="595.05">So what this says is that any scoped styles to a component,</span> <span data-start="595.71" data-end="596.92">we want to keep those under 5 KB.</span> <span data-start="597.55" data-end="599.97">And we are going to error out if they become above 10 KB.</span> <span data-start="600.3" data-end="602.8">And there's a few more that you can see if you just take a</span> <span data-start="602.8" data-end="603.81">look in your IDE.</span> <span data-start="604.22" data-end="606.68">You've got allScript, so that's just the total sum</span> <span data-start="607.35" data-end="608.48">of all the scripts in my application.</span> <span data-start="609.19" data-end="611.06">AnyScript are any individual scripts shouldn't be bigger</span> <span data-start="611.06" data-end="613.9">than this. The whole bundle overall, all those sorts of</span> <span data-start="613.9" data-end="615.36">things, so we've got a whole bunch of different features</span> <span data-start="615.4" data-end="618.11">that allow you to really take control and understand and</span> <span data-start="618.15" data-end="620.24">prevent bundle size increases.</span> </p>
<p><span data-start="620.32" data-end="621.91">So that's a really, really helpful tool.</span> <span data-start="621.95" data-end="624.37">So those are some of the top things that you should be</span> <span data-start="624.37" data-end="626.62">doing to keep your application as fast as possible.</span> <span data-start="627" data-end="629.33">But one of the best things you can do</span> <span data-start="629.96" data-end="632.25">that doesn't take a lot of work is actually staying up to</span> <span data-start="632.25" data-end="633.25">date with Angular.</span> <span data-start="633.59" data-end="636.21">So if we jump back to the terminal here, what we'll see is</span> <span data-start="636.21" data-end="638.59">that I actually created this Angular application on an old</span> <span data-start="638.59" data-end="640.68">version of Angular, it is running version 8.</span> </p>
<p><span data-start="640.97" data-end="642.89">So version 8 is not the latest version.</span> <span data-start="643.55" data-end="646.47">Version 9 as of this filming is the latest version and</span> <span data-start="646.56" data-end="647.56">version 10 is coming out.</span> <span data-start="647.97" data-end="650.27">But it's always the same. So if you're on an out of date</span> <span data-start="650.27" data-end="652.73">version of Angular, your bundle size is going to be bigger</span> <span data-start="652.77" data-end="654.98">and slower than it needs to be. Because what happens is</span> <span data-start="655.44" data-end="658.4">over time, every time we do a release, the Angular team is</span> <span data-start="658.4" data-end="659.7">looking at what can we do better?</span> </p>
<p><span data-start="660.2" data-end="662.49">With the release of version 8, we actually made a huge step</span> <span data-start="662.49" data-end="664.78">forward by automatically doing something called</span> <span data-start="664.78" data-end="667.24">Differential Loading where because we have this opinionated</span> <span data-start="667.54" data-end="670.66">control of the entire toolchain, we understand</span> <span data-start="670.87" data-end="672.29">how to make your production bundles.</span> <span data-start="672.29" data-end="675.46">And so what we did is we said, "Hey, modern browsers</span> <span data-start="675.46" data-end="678.21">are capable of loading JavaScript differently than legacy</span> <span data-start="678.21" data-end="680.76">browsers that don't support something called ES modules.</span> <span data-start="681.13" data-end="683.76">And so using that knowledge, you can actually conditionally</span> <span data-start="683.76" data-end="686.64">force modern browsers to load modern JavaScript</span> <span data-start="686.89" data-end="688.97">and legacy browsers to load legacy JavaScript.</span> <span data-start="689.02" data-end="692.23">And this is a really nice schism that allows you to</span> <span data-start="693.06" data-end="695.98">have two bundles that really gives you the best of both</span> <span data-start="695.98" data-end="698.73">worlds. Where you can ship the smallest, fastest JavaScript</span> <span data-start="698.73" data-end="700.61">to modern browsers that support the most recent</span> <span data-start="700.61" data-end="703.61">capabilities like classes, like modules, all those sorts</span> <span data-start="703.61" data-end="706.87">of things. And you can leave an older legacy</span> <span data-start="706.87" data-end="709.29">bundle for browsers that don't have that kind of support.</span> </p>
<p><span data-start="709.37" data-end="711.37">So we actually did this out of the box by default.</span> <span data-start="711.41" data-end="713.92">So you notice when we were doing those builds, we were</span> <span data-start="713.92" data-end="716.96">actually getting the two JavaScript bundles</span> <span data-start="717.17" data-end="719.76">for each of the files. So we had about-module-es2015.js and</span> <span data-start="719.76" data-end="720.76">we had about-module-es5.js.</span> <span data-start="721.63" data-end="723.68">And so, again, this is one of the changes that the Angular</span> <span data-start="724.72" data-end="727.39">team did behind the scenes without having to make you</span> <span data-start="727.39" data-end="729.14">change any of the code in your application.</span> <span data-start="729.18" data-end="731.22">And this is something we do every single release.</span> <span data-start="731.27" data-end="733.1">And so what we're gonna do now is we're gonna make our</span> <span data-start="733.1" data-end="735.65">application as fresh as possible so we can update to the</span> <span data-start="735.69" data-end="738.4">latest version of Angular and we're gonna automatically get</span> <span data-start="738.4" data-end="739.9">more improvements to our bundle size.</span> <span data-start="739.94" data-end="742.24">This is something that just happens every time you keep</span> <span data-start="742.24" data-end="744.4">your application up to date using Angular.</span> </p>
<p><span data-start="744.45" data-end="747.03">And so we're going to again, use the @angular/cli command</span> <span data-start="747.45" data-end="748.45">and we're going to use "ng update".</span> <span data-start="748.99" data-end="750.41">And we're going to update our application in a couple</span> <span data-start="750.45" data-end="752.7">stages. First, we're going to update the Angular</span> <span data-start="753.41" data-end="756.58">core packages. So core and the core</span> <span data-start="756.58" data-end="758.25">package, as well as the CLI package.</span> <span data-start="758.59" data-end="760">And then what we're gonna do is we're going to go and update</span> <span data-start="760" data-end="762.13">our dependencies. So we're gonna do it as two steps to make</span> <span data-start="762.13" data-end="765.3">sure that we don't accidentally enter a mistake or an error</span> <span data-start="765.38" data-end="767.34">where our application is no longer compatible with one of</span> <span data-start="767.39" data-end="769.55">those dependencies. So let's go ahead and get this started.</span> <span data-start="769.55" data-end="772.6">So I'm going to run "ng update" and what we're gonna do</span> <span data-start="772.6" data-end="775.81">is going to pass it angular/cli and angular/core.</span> <span data-start="776.65" data-end="779.23">Now, if you were on an even older version, what we do is we</span> <span data-start="779.23" data-end="781.94">recommend that you go one version at a time just so we can</span> <span data-start="781.94" data-end="783.07">apply things cleanly.</span> </p>
<p><span data-start="783.61" data-end="785.28">And if you want to do that, for example, if you are in</span> <span data-start="785.28" data-end="787.61">version 6, you want to go to version 7, you just say "@7",</span> <span data-start="788.28" data-end="790.41">and that will just do it for you. But we're gonna go all</span> <span data-start="790.41" data-end="792.95">the way from version 8 up to version 9, which is the</span> <span data-start="793.2" data-end="795.87">latest. So I'm going to run this command and</span> <span data-start="796.25" data-end="797.79">theoretically things should work.</span> <span data-start="798.17" data-end="799.88">There's a few places where this might fail.</span> <span data-start="800.09" data-end="803.13">If your repository isn't clean, then what should happen is</span> <span data-start="803.13" data-end="804.67">we're gonna throw this warning, which is what we're seeing</span> <span data-start="804.67" data-end="806.47">right now. "Repository is not clean, please commit".</span> <span data-start="806.8" data-end="808.76">Because what we want is we want you to have a very clean</span> <span data-start="808.76" data-end="811.72">history so that you actually know what the Angular update</span> <span data-start="811.72" data-end="814.02">process did, because this isn't like a normal "ng update"</span> <span data-start="814.56" data-end="816.6">where we're just modifying the node modules of your</span> <span data-start="816.6" data-end="819.19">project. We're actually making changes to your application</span> <span data-start="819.48" data-end="821.36">so that you stay compatible with Angular.</span> </p>
<p><span data-start="822.36" data-end="824.11">And the reason we're able to do this is because the Angular</span> <span data-start="824.32" data-end="826.86">team at Google, we have thousands of projects across</span> <span data-start="827.61" data-end="830.28">Google that are not run by our team that are using Angular.</span> <span data-start="830.28" data-end="832.83">And it's actually, according to Google policy, our</span> <span data-start="832.83" data-end="835.7">responsibility for keeping those applications working as we</span> <span data-start="835.7" data-end="838.25">make breaking changes to Angular. And so, and only way that</span> <span data-start="838.25" data-end="840.29">we can scale is at Google is to build really great</span> <span data-start="840.33" data-end="841.75">automation and really great tooling.</span> </p>
<p><span data-start="842.13" data-end="844.38">And so what we did is we baked that same sort of tooling</span> <span data-start="844.38" data-end="846.59">into the public world, into this "ng update" command.</span> <span data-start="846.63" data-end="848.84">So whenever we need to change a method name, whenever we</span> <span data-start="848.84" data-end="850.89">need to deprecate something, we're going to try and update</span> <span data-start="851.01" data-end="852.47">your application as best we can.</span> <span data-start="852.68" data-end="854.14">And so that's why we always make sure that you want to have</span> <span data-start="854.14" data-end="856.6">a clean history. So we'll just "git add" everything.</span> <span data-start="861.15" data-end="863.77">Commit that, and now we should be able to run our update</span> <span data-start="863.77" data-end="864.77">command.</span> <span data-start="867.82" data-end="869.36">So, again, what's happening behind the scenes?</span> <span data-start="869.65" data-end="872.03">It's going to be downloading and installing the latest</span> <span data-start="872.03" data-end="875.16">version of Angular CLI and then it's going to be updating</span> <span data-start="875.16" data-end="877.79">the packages in application and changing my code where</span> <span data-start="878.25" data-end="880.75">needed. And so if there's any sort of migrations what</span> <span data-start="880.75" data-end="882.79">should happen is while you're doing the update process,</span> <span data-start="883" data-end="885.59">it's going to report what migrations it's doing.</span> </p>
<p><span data-start="885.67" data-end="888.26">So you can see in your workspace migration, so it made a</span> <span data-start="888.26" data-end="889.97">few changes to the workspace layout.</span> <span data-start="890.01" data-end="891.76">So you can see it updated my angular.json file, it updated</span> <span data-start="891.84" data-end="894.35">my tsconfig.app, it updated the package.json.</span> <span data-start="894.55" data-end="897.1">And so it's making all of these migrations, even ones that</span> <span data-start="897.1" data-end="899.1">don't really have any changes to my app.</span> <span data-start="899.35" data-end="902.27">It's still double checking all those things so that we know</span> <span data-start="902.27" data-end="903.94">that my application is going to keep working.</span> </p>
<p><span data-start="904.4" data-end="906.02">Now, there's a couple other places that you can look for</span> <span data-start="906.11" data-end="907.48">the latest information.</span> <span data-start="908.03" data-end="910.32">You'll notice here at the very, very bottom of the update,</span> <span data-start="910.9" data-end="912.95">it actually says "for more information, please see this</span> <span data-start="912.95" data-end="915.7">link". And so we actually have guides on what changes we're</span> <span data-start="915.7" data-end="917.95">making behind the scenes with every version of Angular, so</span> <span data-start="917.95" data-end="918.95">you can know about things like deprecations.</span> </p>
<p><span data-start="919.5" data-end="921.79">You can know about things like removals and changes to the</span> <span data-start="921.79" data-end="922.87">way that the APIs work.</span> <span data-start="923.42" data-end="925.92">On the other one that I want to point you out to would be</span> <span data-start="926" data-end="927">update.angular.io.</span> <span data-start="928.3" data-end="930.51">So behind the scenes, when you ran "ng update", we made a</span> <span data-start="930.51" data-end="932.68">lot of changes to your project. And so, if you actually</span> <span data-start="932.68" data-end="935.47">wanted to see what you need to do, you can just go to the</span> <span data-start="935.64" data-end="937.22">update guide. And you can say "show me how to update".</span> <span data-start="937.26" data-end="939.89">And we'll say, "Oh, make sure you're on the latest version</span> <span data-start="939.89" data-end="941.23">here. Make sure using this version of node".</span> <span data-start="941.77" data-end="943.6">It walks you through the changes that are going to affect</span> <span data-start="943.6" data-end="946.65">you as a developer. And you can even tune this based on the</span> <span data-start="946.77" data-end="949.03">number and amount of features and the depth and complexity</span> <span data-start="949.03" data-end="950.03">of your usage of Angular.</span> </p>
<p><span data-start="950.32" data-end="952.74">Because most applications don't care about all of</span> <span data-start="953.28" data-end="955.57">the changes we're making under the hood. But let's say you</span> <span data-start="955.66" data-end="957.28">have a large application, you have several hundred</span> <span data-start="957.28" data-end="958.74">components. You have component libraries.</span> <span data-start="958.74" data-end="959.87">You're using things like Universal.</span> <span data-start="960.12" data-end="961.37">You can check these boxes.</span> <span data-start="961.71" data-end="964.04">And what we'll do is we'll show you all of the information</span> <span data-start="964.04" data-end="965.75">about the update, all of the changes we're making behind</span> <span data-start="965.75" data-end="968.29">the scenes. So you can have a full, complete understanding</span> <span data-start="968.29" data-end="970.67">what's going on. And the other way you can do it, is if you</span> <span data-start="970.67" data-end="973.3">just take a look at the git history, you can now go in and</span> <span data-start="973.3" data-end="974.93">see what all the changes we made were.</span> </p>
<p><span data-start="974.93" data-end="977.39">So, for example, when we move to version 9, we turned on</span> <span data-start="977.47" data-end="980.39">ahead-of-time compilation by default.</span> <span data-start="980.39" data-end="982.48">So that's gonna make your build a lot faster.</span> <span data-start="982.52" data-end="984.98">You can see that we've installed all the dependencies.</span> <span data-start="985.31" data-end="987.31">And not just on Angular, we've also installed things like</span> <span data-start="987.36" data-end="988.65">rxjs to the latest version.</span> <span data-start="989.57" data-end="992.07">We've updated your components so that they actually</span> <span data-start="992.15" data-end="993.86">continue working as we make changes to Angular.</span> <span data-start="994.45" data-end="995.57">So this is really, really powerful.</span> <span data-start="995.86" data-end="998.91">And then we can actually do a test to see if this works.</span> <span data-start="998.95" data-end="1002.04">Let's just run "ng serve" and we can say, "Yes,</span> <span data-start="1002.45" data-end="1005.12">let's let Google Analytics track some of our CLI usage</span> <span data-start="1005.21" data-end="1006.21">anonymously".</span> <span data-start="1007.08" data-end="1009.54">And what will happen is when we return back to the browser</span> <span data-start="1009.54" data-end="1011.84">window, we're gonna get the latest version of Angular and</span> <span data-start="1011.84" data-end="1013.72">our app is generally just gonna keep working.</span> </p>
<p><span data-start="1014.51" data-end="1017.26">And then the way that this really affects you is not only</span> <span data-start="1017.26" data-end="1019.05">keeping you up to date as a developer, making sure using</span> <span data-start="1019.05" data-end="1021.35">best practices, but again, it's also going to improve the</span> <span data-start="1021.35" data-end="1022.47">performance of your application.</span> <span data-start="1022.89" data-end="1025.31">One of the things that you're going to see is</span> <span data-start="1026.31" data-end="1028.1">every time we make an update to Angular we're trying to</span> <span data-start="1028.1" data-end="1030.32">look for ways to making your more tree shakeable, to make</span> <span data-start="1030.48" data-end="1031.48">your build system better.</span> <span data-start="1031.94" data-end="1034.03">And so there's lots of experimentation, lots of ideation</span> <span data-start="1034.03" data-end="1036.78">going on there because the state of bundlers in JavaScript</span> <span data-start="1036.99" data-end="1039.78">are not static. Webpack keeps getting better, Rollup keeps</span> <span data-start="1039.95" data-end="1041.49">getting better, terser keeps getting better.</span> <span data-start="1041.74" data-end="1043.87">And these tools are changing, and they're evolving and the</span> <span data-start="1043.87" data-end="1045.33">way that they relate to each other is changing.</span> </p>
<p><span data-start="1045.33" data-end="1047.67">And so what we do is as the Angular team, we're trying to</span> <span data-start="1047.67" data-end="1049.04">stay on top of that for you.</span> <span data-start="1049.33" data-end="1051.34">And so let's go ahead and refresh.</span> <span data-start="1051.71" data-end="1054.46">And if we take a look in the DevTools, we should see we are</span> <span data-start="1054.46" data-end="1056.8">now on the latest version of Angular so 9.1.9 at the</span> <span data-start="1057.72" data-end="1059.68">ready. But whenever you use "ng update", it's just gonna</span> <span data-start="1059.68" data-end="1061.43">move you to the latest version. It's gonna do that</span> <span data-start="1061.51" data-end="1064.14">automatically for you so that you are staying up to date.</span> </p>
<p><span data-start="1064.22" data-end="1065.77">Staying fresh. Staying fast.</span> <span data-start="1066.39" data-end="1068.19">So once you've updated Angular and you've updated the CLI.</span> <span data-start="1070.15" data-end="1071.9">Now what I'm gonna do is I'm gonna go and update all the</span> <span data-start="1071.9" data-end="1074.4">other packages. So if you take a look, for example,</span> <span data-start="1075.24" data-end="1078.49">we did not in our package.json, we didn't update</span> <span data-start="1078.91" data-end="1080.57">the CDK or we didn't update @angular/material.</span> <span data-start="1081.16" data-end="1083.33">So we're going to do one more "ng update" command</span> <span data-start="1084.58" data-end="1086.16">to update @angular/material and @angular/cdk.</span> <span data-start="1087.04" data-end="1088.54">You can do with any of your dependencies.</span> <span data-start="1088.58" data-end="1090.58">A lot of dependencies are starting to support these</span> <span data-start="1090.83" data-end="1092.79">automatic migrations. This is something we've been pushing</span> <span data-start="1093.13" data-end="1094.75">very hard for in the ecosystem.</span> <span data-start="1106.64" data-end="1108.14">Let's just run that "ng update @angular/material</span> <span data-start="1108.14" data-end="1109.73">@angular/cdk" command again.</span> </p>
<p><span data-start="1110.31" data-end="1112.02">And again, it's fetching the latest version of those</span> <span data-start="1112.02" data-end="1113.77">packages. It's updating their dependencies in your</span> <span data-start="1113.82" data-end="1116.4">package.json. And then it's going to execute any migrations</span> <span data-start="1116.57" data-end="1118.95">that you need to be on the latest version.</span> <span data-start="1122.32" data-end="1124.7">And I think we're just going to run "ng serve" one last</span> <span data-start="1124.7" data-end="1127.33">time and we will see that our entire application kept on</span> <span data-start="1127.33" data-end="1130.29">working and our bundle size should have gotten a little bit</span> <span data-start="1130.29" data-end="1133.59">better. Then again, it's doing a little bit of compiling</span> <span data-start="1133.63" data-end="1136.34">ahead of time. Generally, this is a temporary thing that</span> <span data-start="1136.42" data-end="1139.3">you're going to see with Ivy and with version 9, so we do</span> <span data-start="1139.3" data-end="1140.3">this extra compilation.</span> </p>
<p><span data-start="1140.8" data-end="1143.26">That's really to offer the latest version of Angular and</span> <span data-start="1143.3" data-end="1145.1">the latest features of Angular while still staying</span> <span data-start="1145.1" data-end="1146.97">compatible with the rest of the ecosystem.</span> <span data-start="1147.06" data-end="1150.02">So this is just a extra compilation step the Angular</span> <span data-start="1150.23" data-end="1151.9">team does to optimize things.</span> <span data-start="1154.36" data-end="1156.32">All right. As soon as this completion is complete, what</span> <span data-start="1156.32" data-end="1158.19">we're gonna see is we're going to be on the latest version</span> <span data-start="1158.19" data-end="1160.74">of Angular. And again, we updated the package.json.</span> <span data-start="1161.28" data-end="1163.62">So just all the dependencies, including removing</span> <span data-start="1164.41" data-end="1167.24">things like hammer.js and our application should just keep</span> <span data-start="1167.41" data-end="1168.62">working. Yep. There it is.</span> <span data-start="1168.95" data-end="1169.95">We have a great</span> <span data-start="1172.12" data-end="1174.08">dashboard, just like we had before right in the beginning.</span> <span data-start="1174.08" data-end="1175.25">Everything works, everything animates.</span> <span data-start="1175.92" data-end="1176.92">We're now on the latest version of Angular.</span> </p>
<p><span data-start="1177.5" data-end="1179.51">We're now in the latest version material and the CDK.</span> <span data-start="1179.84" data-end="1182.38">And our application is as fast as we can be because we're</span> <span data-start="1182.59" data-end="1184.51">budgeting. We're making sure that we're understanding our</span> <span data-start="1184.55" data-end="1186.43">application, making sure it doesn't grow over time.</span> <span data-start="1186.93" data-end="1189.64">We're analyzing the application bundle size with source</span> <span data-start="1189.64" data-end="1192.44">maps. And we're doing things like lazy loading so that we</span> <span data-start="1192.64" data-end="1194.98">only make users pay for the features that they're using at</span> <span data-start="1194.98" data-end="1195.98">the current time.</span> <span data-start="1196.4" data-end="1198.19">That's going to be it for us. Thank you so much for</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
