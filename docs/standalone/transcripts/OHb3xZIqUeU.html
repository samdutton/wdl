<!DOCTYPE html>

<!--
Copyright 2019 Google LLC

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

  https://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="author" content="//google.com">
  <meta name="description" content="web.dev LIVE video transcript">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>OHb3xZIqUeU</title>
  <link rel="stylesheet" href="../css/main.css">
</head>

<body>

<iframe id="youtube" src="https://www.youtube.com/embed/OHb3xZIqUeU?enablejsapi=1"></iframe>

<div id="container">

<div id="options">
  <div id="google-translate"></div>
  <div>
    <input type="checkbox" id="videoSticky" checked>
    <label for="videoSticky">Video position sticky</label>
  </div>
  <div>
    <input type="checkbox" id="captionScroll" checked>
    <label for="captionScroll">Keep current caption visible</label>
  </div>
</div>

<section>
<p><span data-start="0.57" data-end="3.38">[Music]</span> <span data-start="3.38" data-end="5.68">[Applause]</span> <span data-start="5.68" data-end="11.33">[Music]</span> <span data-start="11.33" data-end="14.099">hi everybody I'm Paul Lewis and I'm</span> <span data-start="14.099" data-end="16.529">Philip Walton okay so we thought today</span> <span data-start="16.529" data-end="18.48">what we do is we would talk about the</span> <span data-start="18.48" data-end="21.63">core web vitals inside of dev tools now</span> <span data-start="21.63" data-end="25.05">I know about the dev tools side in fact</span> <span data-start="25.05" data-end="27.51">I implemented some of the core word</span> <span data-start="27.51" data-end="30.63">vitals in side of dev tools but Phil</span> <span data-start="30.63" data-end="31.92">you're more of the person that knows</span> <span data-start="31.92" data-end="33.899">about the actual metrics where they came</span> <span data-start="33.899" data-end="35.55">from and that kind of stuff right that's</span> <span data-start="35.55" data-end="37.2">right I know a lot about the metrics I</span> <span data-start="37.2" data-end="39.809">work on the chrome team working with</span> <span data-start="39.809" data-end="40.98">some of the people that were helping to</span> <span data-start="40.98" data-end="42.93">define the metrics and standardized them</span> <span data-start="42.93" data-end="44.76">in browsers but I don't really know much</span> <span data-start="44.76" data-end="47.28">about how they work in dev tools so Paul</span> <span data-start="47.28" data-end="48.45">you're a great person for me to talk to</span> <span data-start="48.45" data-end="51.09">here let's let's dive in and see what we</span> <span data-start="51.09" data-end="54.239">can what we can find out okay so I guess</span> </p>
<p><span data-start="54.239" data-end="55.86">I plan may still have a bit of a</span> <span data-start="55.86" data-end="58.079">conversation to go back and forth we'll</span> <span data-start="58.079" data-end="60.329">be diving in and our dev tools having a</span> <span data-start="60.329" data-end="62.28">bit of a discussion about these metrics</span> <span data-start="62.28" data-end="64.46">and just trying to kind of explore</span> <span data-start="64.46" data-end="66.51">understand and share what's kind of</span> <span data-start="66.51" data-end="69.03">going on there so I guess the first one</span> <span data-start="69.03" data-end="72.27">that I was kind of thinking about when</span> <span data-start="72.27" data-end="75.9">we were discussing this was LCP and FCP</span> <span data-start="75.9" data-end="77.79">so there guess the first thing to kind</span> <span data-start="77.79" data-end="80.49">of talk about is what are what are they</span> <span data-start="80.49" data-end="82.95">like where do they come from you know</span> <span data-start="82.95" data-end="86.18">these are both paint metrics so FCP is</span> <span data-start="86.18" data-end="89.1">first content for paint it's tan it</span> <span data-start="89.1" data-end="91.619">represents the first point in time that</span> <span data-start="91.619" data-end="93.96">the browser is able to paint any content</span> <span data-start="93.96" data-end="96.869">on the screen and LCP is largest</span> <span data-start="96.869" data-end="99.39">contentful paint and that represents the</span> <span data-start="99.39" data-end="101.729">largest single text node or image</span> <span data-start="101.729" data-end="103.71">element on the page and the idea between</span> <span data-start="103.71" data-end="106.95">these two is that FCP represents like</span> <span data-start="106.95" data-end="108.509">the first time the user sees something</span> <span data-start="108.509" data-end="112.47">and an LCP represents when you know the</span> <span data-start="112.47" data-end="114.93">main contents of the page has painted I</span> <span data-start="114.93" data-end="116.79">mean in general whatever the largest</span> <span data-start="116.79" data-end="118.86">thing on the largest image or text node</span> <span data-start="118.86" data-end="121.049">on the screen is generally the thing</span> <span data-start="121.049" data-end="122.579">that the user is going to notice and so</span> <span data-start="122.579" data-end="124.469">that kind of represents once the page is</span> <span data-start="124.469" data-end="126.63">really loaded so I guess for a lot of</span> <span data-start="126.63" data-end="127.95">people then the first thing they're</span> <span data-start="127.95" data-end="130.259">gonna think of certainly for the largest</span> <span data-start="130.259" data-end="132.03">content for paint will be something like</span> <span data-start="132.03" data-end="134.28">a hero element or something</span> <span data-start="134.28" data-end="136.14">yeah they can a big image at the top of</span> <span data-start="136.14" data-end="138.98">the page for example absolutely okay</span> <span data-start="138.98" data-end="141.72">right but it's not always that I'm</span> <span data-start="141.72" data-end="143.79">guessing because you could be deep</span> <span data-start="143.79" data-end="146.34">linking into some content like further</span> <span data-start="146.34" data-end="148.29">down the page and everything else yeah</span> <span data-start="148.29" data-end="151.35">that's up so I okay I tell you what</span> <span data-start="151.35" data-end="152.61">we'll do then let's take it I've got a</span> <span data-start="152.61" data-end="154.91">page here actually I've got this page on</span> <span data-start="154.91" data-end="158.82">web dev we perform it to tab open inside</span> <span data-start="158.82" data-end="162.75">of dev tools and I guess the the goal</span> <span data-start="162.75" data-end="166.5">here is going to be to show FCP and LCP</span> <span data-start="166.5" data-end="169.17">in context and I have web dev open here</span> <span data-start="169.17" data-end="172.56">on a page in the performance section</span> <span data-start="172.56" data-end="175.8">around using image Sirians to optimize</span> <span data-start="175.8" data-end="176.85">images so if you've not seen this</span> <span data-start="176.85" data-end="179.73">content definitely worth a look it's a</span> <span data-start="179.73" data-end="183.11">great art okay and we have yeah we have</span> </p>
<p><span data-start="183.11" data-end="186.15">I'm DCI can deep link into this section</span> <span data-start="186.15" data-end="189.99">right with the right and so this I guess</span> <span data-start="189.99" data-end="191.88">would become our hero image right and an</span> <span data-start="191.88" data-end="193.88">interesting point to make here is that</span> <span data-start="193.88" data-end="196.35">the hero image is not necessarily going</span> <span data-start="196.35" data-end="198.36">to be above the fold like in this case</span> <span data-start="198.36" data-end="200.19">you're loading a page</span> <span data-start="200.19" data-end="202.05">halfway down have we scroll down the</span> <span data-start="202.05" data-end="205.86">page and so LCP is always you know it's</span> <span data-start="205.86" data-end="207.12">only going to consider elements that are</span> <span data-start="207.12" data-end="208.44">actually visible to the user on the</span> <span data-start="208.44" data-end="213.3">screen right great points so this is</span> <span data-start="213.3" data-end="215.04">what's going to make this brilliant but</span> <span data-start="215.04" data-end="216.03">interesting so what I'm going to do is</span> </p>
<p><span data-start="216.03" data-end="218.19">I'm actually gonna going to go to fast</span> <span data-start="218.19" data-end="220.17">three G so in the performance tab you</span> <span data-start="220.17" data-end="222.03">can open the capture settings here I'm</span> <span data-start="222.03" data-end="224.61">going to change just online oh it's a</span> <span data-start="224.61" data-end="226.22">fast 3d so we're just going to switch to</span> <span data-start="226.22" data-end="229.14">a slow down on the performance you see</span> <span data-start="229.14" data-end="231.84">this little exclamation mark shows up</span> <span data-start="231.84" data-end="233.67">saying Network throttling throttling is</span> <span data-start="233.67" data-end="235.56">enabled and I'm gonna I'm gonna slow</span> <span data-start="235.56" data-end="237.66">down the CPU just a little bit and you</span> <span data-start="237.66" data-end="238.92">doing this just so that we can see</span> <span data-start="238.92" data-end="240.209">things you're doing this to simulate</span> <span data-start="240.209" data-end="241.92">maybe a lower powered device or</span> <span data-start="241.92" data-end="244.5">something like that correct yeah yeah I</span> <span data-start="244.5" data-end="246.33">am but right now as well what I wanted</span> <span data-start="246.33" data-end="248.37">to do is if I take a recording with</span> <span data-start="248.37" data-end="250.62">things just slow down a little bit it</span> <span data-start="250.62" data-end="253.11">might be easier to just to see what's</span> <span data-start="253.11" data-end="255.38">going on because I happen to be</span> <span data-start="255.38" data-end="257.79">somewhere in my house is actually a</span> <span data-start="257.79" data-end="259.26">really good internet connection so I</span> <span data-start="259.26" data-end="262.53">don't particularly see network latency</span> <span data-start="262.53" data-end="265.32">quite as much as you would in other</span> <span data-start="265.32" data-end="266.76">cases say you know if you're on a mobile</span> <span data-start="266.76" data-end="267.93">device out and</span> <span data-start="267.93" data-end="269.52">so I just thought let's just try this</span> <span data-start="269.52" data-end="270.66">and see what happens so I'm gonna hit</span> <span data-start="270.66" data-end="272.91">record I'm gonna hit command shift are</span> <span data-start="272.91" data-end="277.65">to do a reload okay and I'm gonna stop</span> <span data-start="277.65" data-end="281.46">and we can discuss what we see okay let</span> <span data-start="281.46" data-end="284.699">me just wrap this up here now the first</span> <span data-start="284.699" data-end="287.16">thing to notice I suppose would be the</span> <span data-start="287.16" data-end="291.12">timings row here to have to remind</span> <span data-start="291.12" data-end="292.59">ourselves what these are Dom content</span> <span data-start="292.59" data-end="293.97">loaded this has been around forever</span> <span data-start="293.97" data-end="297.289">hasn't it yeah but there is first paint</span> <span data-start="297.289" data-end="300.419">first content for paint first meaningful</span> <span data-start="300.419" data-end="301.65">paint which we could talk about a little</span> <span data-start="301.65" data-end="303.51">bit I suppose largest content for</span> <span data-start="303.51" data-end="304.49">painting you can see this actually</span> <span data-start="304.49" data-end="307.289">highlighted our screenshot here and then</span> <span data-start="307.289" data-end="310.11">the load event now I can use the keys on</span> <span data-start="310.11" data-end="314.4">the keyboard to come into a little bit</span> <span data-start="314.4" data-end="315.87">closer zoom in a little bit on this</span> <span data-start="315.87" data-end="318.72">particular area of interest and you see</span> <span data-start="318.72" data-end="321.69">here I suppose the first content for</span> <span data-start="321.69" data-end="327.06">paint is presumably happening and then</span> <span data-start="327.06" data-end="328.53">the largest content for paint is</span> <span data-start="328.53" data-end="330.449">happening slightly later that's right</span> <span data-start="330.449" data-end="331.889">now I think we can get a little bit more</span> <span data-start="331.889" data-end="334.199">info about this because first content</span> <span data-start="334.199" data-end="335.729">for paint is happening and then the</span> <span data-start="335.729" data-end="337.139">largest content for paper which implies</span> <span data-start="337.139" data-end="340.52">to me that the image is coming in after</span> <span data-start="340.52" data-end="342.99">the initial page content so we're</span> <span data-start="342.99" data-end="344.19">drawing something we're painting</span> <span data-start="344.19" data-end="346.26">something and then we're painting the</span> <span data-start="346.26" data-end="348.21">image after the fact so let's just even</span> <span data-start="348.21" data-end="351.84">do that with screenshots on mm-hm and we</span> <span data-start="351.84" data-end="355.849">will record again and see what we get</span> <span data-start="355.849" data-end="361.56">okay I'll stop there and hopefully I</span> <span data-start="361.56" data-end="365.37">just leave this a little bit and we</span> <span data-start="365.37" data-end="368.05">might see</span> <span data-start="368.06" data-end="374.07">okay so roundabout fact I wonder if I</span> <span data-start="374.07" data-end="375.69">can just bring this in a little bit</span> <span data-start="375.69" data-end="379.26">further let me just see if I can drag</span> <span data-start="379.26" data-end="382.5">that down throw this a little bit okay</span> <span data-start="382.5" data-end="384.539">that might be as clear as this is gonna</span> <span data-start="384.539" data-end="387.05">get I wonder</span> <span data-start="387.05" data-end="389.82">yeah it is okay I tell you what we're</span> <span data-start="389.82" data-end="390.99">gonna do we're going to make this a</span> <span data-start="390.99" data-end="392.31">little bit clearer because what's</span> <span data-start="392.31" data-end="393.63">happening is we're actually seeing the</span> <span data-start="393.63" data-end="396.06">page content before I did the refresh</span> <span data-start="396.06" data-end="398.219">and then slightly after so I can do I</span> <span data-start="398.219" data-end="400.08">can if I take this and I go to about</span> <span data-start="400.08" data-end="401.58">blank mr. sheean</span> <span data-start="401.58" data-end="403.05">testing way to do this testing if you're</span> <span data-start="403.05" data-end="405.81">ever curious about it record it from</span> <span data-start="405.81" data-end="408.569">about blank so that you start without</span> <span data-start="408.569" data-end="410.37">anything on the page can that can make</span> <span data-start="410.37" data-end="412.349">it easier to find your screenshot so I'm</span> <span data-start="412.349" data-end="416.699">gonna go paste in the URL here but not</span> <span data-start="416.699" data-end="418.56">hit enter not go to that yet okay hit</span> <span data-start="418.56" data-end="422.61">record okay and now go there okay yeah</span> <span data-start="422.61" data-end="424.199">hopefully that will make it a little</span> <span data-start="424.199" data-end="427.319">easier to see what's going on okay so</span> <span data-start="427.319" data-end="431.039">you see we've gone from here into the</span> <span data-start="431.039" data-end="432.36">screenshots we see this we see the</span> <span data-start="432.36" data-end="434.219">original page content the top of the</span> <span data-start="434.219" data-end="438.419">page and then we're going down to our</span> <span data-start="438.419" data-end="440.219">deep link just below that so my</span> <span data-start="440.219" data-end="444.03">assumption is if we if we bring our zoom</span> <span data-start="444.03" data-end="450.15">in here then around about here in fact</span> <span data-start="450.15" data-end="456.539">we can just is this here yeah OOP you</span> <span data-start="456.539" data-end="457.77">see we're just right on this line here</span> <span data-start="457.77" data-end="460.139">where we go from nothing to something</span> <span data-start="460.139" data-end="463.02">right nothing to something is exactly</span> <span data-start="463.02" data-end="464.219">the point where we actually start to see</span> <span data-start="464.219" data-end="468.24">this this the first read is the context</span> <span data-start="468.24" data-end="469.469">for paint coming in yeah this is the</span> <span data-start="469.469" data-end="471.99">first thing that the user sees but it's</span> <span data-start="471.99" data-end="473.789">not the main thing that they wanted to</span> <span data-start="473.789" data-end="474.99">see when they were when they were</span> <span data-start="474.99" data-end="478.44">loading the page yeah in fact is saying</span> <span data-start="478.44" data-end="479.669">the largest content for paint at this</span> <span data-start="479.669" data-end="482.629">point is actually this piece of text now</span> <span data-start="482.629" data-end="484.919">let's try it one more time from her just</span> <span data-start="484.919" data-end="486.81">a really really dial it in I wasn't</span> <span data-start="486.81" data-end="489.75">going to go for slow 3G I'm gonna go to</span> <span data-start="489.75" data-end="492.509">about blank again and I'm gonna hit</span> <span data-start="492.509" data-end="496.44">record and I'm gonna see what happens I</span> <span data-start="496.44" data-end="497.43">feel like we're gonna see something</span> <span data-start="497.43" data-end="499.979">reasonable here let's process that</span> <span data-start="499.979" data-end="502.86">profile okay there we go</span> <span data-start="502.86" data-end="504.96">this I think is starting to make more</span> <span data-start="504.96" data-end="510.889">sense to me over here there we go okay</span> </p>
<p><span data-start="510.889" data-end="513.269">Wow there we are</span> <span data-start="513.269" data-end="520.08">first content for paint is here there</span> <span data-start="520.08" data-end="525.959">okay and then much later Boop there</span> <span data-start="525.959" data-end="529.2">comes our image okay which is slightly</span> <span data-start="529.2" data-end="531.959">over to the right here and there so I</span> <span data-start="531.959" data-end="534.959">can select that area and as from the</span> <span data-start="534.959" data-end="537.54">based on the screenshots roughly there</span> <span data-start="537.54" data-end="539.459">and I say that's the first content for</span> <span data-start="539.459" data-end="541.11">paint and then if I select later on in</span> <span data-start="541.11" data-end="543.18">the screenshots there thanks Allah</span> <span data-start="543.18" data-end="544.35">that's the largest content for paint</span> <span data-start="544.35" data-end="546.899">which is high in me down okay let's nice</span> <span data-start="546.899" data-end="549.6">that dev tools shows you exactly what</span> <span data-start="549.6" data-end="550.95">element on the page is the largest</span> <span data-start="550.95" data-end="552.89">content for paint</span> <span data-start="552.89" data-end="556.89">absolutely I can't resist I know we're</span> <span data-start="556.89" data-end="558.81">going to talk about layout shifts next</span> <span data-start="558.81" data-end="560.61">but why don't just jump the gun a little</span> <span data-start="560.61" data-end="562.55">bit we actually have a layout shift</span> <span data-start="562.55" data-end="565.17">showing up between first at content for</span> <span data-start="565.17" data-end="567.45">paint and largest content for paint and</span> </p>
<p><span data-start="567.45" data-end="572.49">I think based on this I think the reason</span> <span data-start="572.49" data-end="574.56">is because we're going from no image to</span> <span data-start="574.56" data-end="576.36">image it's pushing the content down</span> <span data-start="576.36" data-end="578.399">their terrain so I think we're seeing</span> <span data-start="578.399" data-end="582.06">the page content move so my guess is if</span> <span data-start="582.06" data-end="583.95">we were to go and find this image here</span> <span data-start="583.95" data-end="586.02">in the elements panel we're gonna see</span> <span data-start="586.02" data-end="588.3">that it doesn't actually have yeah it</span> <span data-start="588.3" data-end="589.77">doesn't have width and height attribute</span> <span data-start="589.77" data-end="593.81">set yeah and I think that's basically</span> <span data-start="593.81" data-end="597.75">causing this to happen so if you will</span> <span data-start="597.75" data-end="599.85">come and we'll talk about layout shifts</span> <span data-start="599.85" data-end="601.41">more in a second but the reason this</span> <span data-start="601.41" data-end="603.27">page is shifting is because we have an</span> <span data-start="603.27" data-end="606.57">image here that that loads when it loads</span> <span data-start="606.57" data-end="609.99">loads asynchronously essentially and it</span> <span data-start="609.99" data-end="612.39">when it's loaded it pushes the rest of</span> <span data-start="612.39" data-end="613.86">the page content down if we added width</span> <span data-start="613.86" data-end="615.959">and height attributes to this image we</span> <span data-start="615.959" data-end="618.3">wouldn't see we wouldn't see that layout</span> <span data-start="618.3" data-end="619.649">shift as I said we'll come back to that</span> <span data-start="619.649" data-end="621">more anymore yeah that's a good general</span> </p>
<p><span data-start="621" data-end="623.22">I guess that's practice though just let</span> <span data-start="623.22" data-end="625.29">everybody know always put width and</span> <span data-start="625.29" data-end="627.779">height attributes on your images that</span> <span data-start="627.779" data-end="629.85">way the browser can render the space</span> <span data-start="629.85" data-end="632.279">that it needs it can it can allocate a</span> <span data-start="632.279" data-end="634.25">space that it needs to render them</span> <span data-start="634.25" data-end="636.269">before it actually finished loading</span> <span data-start="636.269" data-end="638.16">loading the image so then you don't get</span> <span data-start="638.16" data-end="641.94">that layout shipped exactly the other</span> <span data-start="641.94" data-end="644.12">thing I think we should talk about</span> <span data-start="644.12" data-end="648.209">before we move on is how to optimize for</span> <span data-start="648.209" data-end="650.82">this particular situation so what would</span> <span data-start="650.82" data-end="652.56">you suggest if somebody said I need to</span> <span data-start="652.56" data-end="653.91">get first content for paint</span> <span data-start="653.91" data-end="656.699">largest contentful paint nearer the star</span> <span data-start="656.699" data-end="658.5">that is taking too long to get to these</span> <span data-start="658.5" data-end="660.93">numbers these numbers are too high do</span> <span data-start="660.93" data-end="662.49">you have a do you have a kind of go to</span> <span data-start="662.49" data-end="664.05">list of things you would say to them</span> <span data-start="664.05" data-end="665.94">yeah well definitely one thing that you</span> <span data-start="665.94" data-end="670.319">you don't want to you know ever block I</span> <span data-start="670.319" data-end="671.899">mean ideally you don't ever block</span> <span data-start="671.899" data-end="674.759">painting on more than kind of one</span> <span data-start="674.759" data-end="676.709">network request that initial network</span> <span data-start="676.709" data-end="678.63">request that you make ticket the page</span> <span data-start="678.63" data-end="680.399">content you want to be able to paint at</span> <span data-start="680.399" data-end="682.92">that point if you have additional</span> <span data-start="682.92" data-end="684.779">requests like request for fonts or style</span> <span data-start="684.779" data-end="686.519">sheets or other things that are</span> <span data-start="686.519" data-end="688.589">preventing you know the browser from</span> <span data-start="688.589" data-end="690.72">painting that will just delay the time</span> <span data-start="690.72" data-end="694.019">when that paint can happen and so you</span> <span data-start="694.019" data-end="695.79">know I mean sometimes you know it</span> <span data-start="695.79" data-end="698.13">depending upon the design you're working</span> <span data-start="698.13" data-end="699.87">with you don't have a choice but in in</span> <span data-start="699.87" data-end="701.699">an ideal world you would want to be able</span> <span data-start="701.699" data-end="704.339">to paint right away and so looks like in</span> <span data-start="704.339" data-end="708.209">this case on web dev we are able to</span> <span data-start="708.209" data-end="711">paint pretty quickly and then and that's</span> <span data-start="711" data-end="713.16">why first paint is happening you know at</span> <span data-start="713.16" data-end="715.259">the beginning and then the browser is</span> <span data-start="715.259" data-end="716.94">loading this image and then larges can</span> <span data-start="716.94" data-end="718.649">different paint happens as soon as that</span> <span data-start="718.649" data-end="721.769">image gets loaded in exactly yeah I</span> <span data-start="721.769" data-end="724.05">think what we're actually also seeing</span> <span data-start="724.05" data-end="729.3">here is the app CSS which is the main</span> <span data-start="729.3" data-end="732.449">stylesheet and the fonts as well okay my</span> <span data-start="732.449" data-end="734.16">guess is that they are going to be</span> <span data-start="734.16" data-end="736.199">blocking based on the you can see that</span> <span data-start="736.199" data-end="738.3">when I roll over them the network panel</span> <span data-start="738.3" data-end="741.18">here saying highest which is the</span> <span data-start="741.18" data-end="743.55">priority that's been assigned to the CSS</span> <span data-start="743.55" data-end="745.68">and the reason I guess is because the</span> </p>
<p><span data-start="745.68" data-end="747.63">CSS is going to be blocking the render</span> <span data-start="747.63" data-end="748.649">which is what you were saying</span> <span data-start="748.649" data-end="750.449">so that's why I think some people would</span> <span data-start="750.449" data-end="752.069">inline that but I guess if we go ahead</span> <span data-start="752.069" data-end="755.339">and take a quick look in our head and if</span> <span data-start="755.339" data-end="757.649">we can find we could search for it but</span> <span data-start="757.649" data-end="759.93">I'm gonna link well link rel there's the</span> <span data-start="759.93" data-end="761.16">stylesheet yeah you see there's a</span> <span data-start="761.16" data-end="763.079">stylesheet for the fonts and right below</span> <span data-start="763.079" data-end="766.86">it up dot CSS and so this would be a</span> <span data-start="766.86" data-end="768.87">classic case of here's a style sheet</span> <span data-start="768.87" data-end="770.459">it's gonna block render because the</span> <span data-start="770.459" data-end="772.62">browser crow is gonna take a look at</span> <span data-start="772.62" data-end="773.819">that and go well I need to wait and see</span> <span data-start="773.819" data-end="775.319">what styles are before I render anything</span> <span data-start="775.319" data-end="777.63">right absolutely so there can be</span> <span data-start="777.63" data-end="779.73">something that we can sometimes take a</span> <span data-start="779.73" data-end="781.589">look at say with blocky JavaScript right</span> <span data-start="781.589" data-end="784.49">yeah we see that one sometimes I guess</span> <span data-start="784.49" data-end="786.54">gets in the way can you something like</span> <span data-start="786.54" data-end="787.24">differently</span> <span data-start="787.24" data-end="788.86">sometimes her here this referred to as</span> <span data-start="788.86" data-end="791.89">critical CSS where you identify just the</span> </p>
<p><span data-start="791.89" data-end="794.31">CSS that is needed to layout the page</span> <span data-start="794.31" data-end="796.87">not necessarily style all the components</span> <span data-start="796.87" data-end="798.91">on your entire site and so you can</span> <span data-start="798.91" data-end="802.089">inline just that CSS content in the head</span> <span data-start="802.089" data-end="803.529">of your document and so then you're not</span> <span data-start="803.529" data-end="805.029">blocking on an additional Network</span> <span data-start="805.029" data-end="806.56">request in order to paint something on</span> <span data-start="806.56" data-end="811.42">the page exactly Yeah right so that that</span> <span data-start="811.42" data-end="813.22">was FCP and they'll seep in as I say</span> <span data-start="813.22" data-end="816.73">you'll you will find those on the</span> <span data-start="816.73" data-end="820.93">timings track here in dev tools okay so</span> <span data-start="820.93" data-end="822.55">next up</span> <span data-start="822.55" data-end="824.14">layout shifts now we talked about this</span> <span data-start="824.14" data-end="825.91">very briefly just now yeah but with</span> <span data-start="825.91" data-end="827.649">these two down here but where does it</span> <span data-start="827.649" data-end="829.24">come from what what's the history of the</span> <span data-start="829.24" data-end="830.98">layout shift and cumulative layout</span> <span data-start="830.98" data-end="832.18">shifting I think I've also heard it</span> <span data-start="832.18" data-end="834.37">called yes so the metric name cumulative</span> <span data-start="834.37" data-end="837.339">layout shift or CLS for short is a</span> <span data-start="837.339" data-end="839.13">metric that tries to capture the</span> <span data-start="839.13" data-end="841.81">experience of visual stability on a page</span> <span data-start="841.81" data-end="844.27">you probably everyone's probably had</span> <span data-start="844.27" data-end="847.87">this you know experience where you go to</span> <span data-start="847.87" data-end="851.38">a website and you go to tap on you know</span> <span data-start="851.38" data-end="853.24">a button or something and right before</span> <span data-start="853.24" data-end="854.74">you tap on it it shifts out from</span> <span data-start="854.74" data-end="856">underneath you it's a very frustrating</span> <span data-start="856" data-end="858.16">experience even if you're not</span> <span data-start="858.16" data-end="859.24">interacting with the page you're just</span> <span data-start="859.24" data-end="862.48">reading it if you know some images late</span> <span data-start="862.48" data-end="863.74">loading them and just pop in some ads</span> <span data-start="863.74" data-end="867.01">pop in the content changes like a number</span> <span data-start="867.01" data-end="868.149">of things gonna happen and you lose your</span> <span data-start="868.149" data-end="869.8">place as you're reading and it's it's</span> <span data-start="869.8" data-end="871.18">just not the greatest experience as a</span> <span data-start="871.18" data-end="873.959">user from the user users point of view</span> <span data-start="873.959" data-end="877.779">so cumulative layout shift is a metric</span> <span data-start="877.779" data-end="879.579">that attempts to quantify that</span> <span data-start="879.579" data-end="882.94">experience and so there's a couple</span> <span data-start="882.94" data-end="885.42">pieces there but a layout shift is</span> <span data-start="885.42" data-end="889.27">anytime an element on the page between</span> <span data-start="889.27" data-end="892.12">one frame and the next frame it's start</span> <span data-start="892.12" data-end="894.97">position changes and so this will happen</span> <span data-start="894.97" data-end="896.38">like in this case that we just saw an</span> <span data-start="896.38" data-end="899.41">image loads in and it pushes the text</span> <span data-start="899.41" data-end="902.02">below it down and so the image that the</span> <span data-start="902.02" data-end="903.459">layout shift was not on the image the</span> <span data-start="903.459" data-end="905.41">layout shift was on the text below the</span> <span data-start="905.41" data-end="907.57">image that on the previous frame it had</span> <span data-start="907.57" data-end="909.7">you know an X and y position of</span> <span data-start="909.7" data-end="911.92">something and then on the next frame it</span> <span data-start="911.92" data-end="913.66">was pushed lower and so it's position</span> <span data-start="913.66" data-end="916.959">change so it's a bit you know tough to</span> <span data-start="916.959" data-end="921.22">explain but the CLS</span> <span data-start="921.22" data-end="924.339">is a measure of both how much of the</span> <span data-start="924.339" data-end="926.23">page content moved and also how far it</span> <span data-start="926.23" data-end="928.42">moved and so if the entire page content</span> <span data-start="928.42" data-end="930.04">shifts from being fully visible on the</span> <span data-start="930.04" data-end="932.079">page to not visible at all that would be</span> <span data-start="932.079" data-end="935.379">a CLS of one if that happened 20 times</span> <span data-start="935.379" data-end="936.879">throughout the page lifecycle that would</span> <span data-start="936.879" data-end="939.97">be a CLS of 20 you know and then if it</span> <span data-start="939.97" data-end="941.829">moves kind of half of the screen</span> <span data-start="941.829" data-end="945.009">distance and the the image itself is</span> <span data-start="945.009" data-end="947.019">only filling up half the screen that</span> <span data-start="947.019" data-end="949.959">would be roughly you know 0.25 CLS you</span> <span data-start="949.959" data-end="951.61">can go read more about how to calculate</span> </p>
<p><span data-start="951.61" data-end="953.019">CLS and whether the dev is a little bit</span> <span data-start="953.019" data-end="954.879">too complicated to explain now but that</span> <span data-start="954.879" data-end="956.649">gives you a sense it's a measure of kind</span> <span data-start="956.649" data-end="958.899">of how much visible instability there is</span> <span data-start="958.899" data-end="961.839">on the page okay so as we talked about</span> <span data-start="961.839" data-end="963.879">before then we have this one layout</span> <span data-start="963.879" data-end="968.56">shift here and so on first this is</span> <span data-start="968.56" data-end="969.91">probably the better one of the two to</span> <span data-start="969.91" data-end="972.819">actually demonstrate this and when you</span> <span data-start="972.819" data-end="974.47">click on this and it's in this</span> <span data-start="974.47" data-end="975.61">experience track if you don't get this</span> <span data-start="975.61" data-end="977.889">experience track in dev tools it means</span> <span data-start="977.889" data-end="980.319">that we didn't detect any layout shifts</span> <span data-start="980.319" data-end="982.209">in that particular recording if you do</span> <span data-start="982.209" data-end="984.04">find that it's there then you'll see</span> <span data-start="984.04" data-end="985.689">that it's populated with these kind of</span> <span data-start="985.689" data-end="988.24">records now you can click on this and it</span> <span data-start="988.24" data-end="990.519">will take you off to the detailed</span> <span data-start="990.519" data-end="993.37">information about CLS but what we try</span> <span data-start="993.37" data-end="994.72">and do is we try and give you a sense of</span> <span data-start="994.72" data-end="996.699">the score and the cumulative score of</span> <span data-start="996.699" data-end="998.47">buzzwords about what's going on but we</span> <span data-start="998.47" data-end="1001.05">also try and highlight for you you see</span> <span data-start="1001.05" data-end="1003.24">you go going from an image here that's</span> <span data-start="1003.24" data-end="1006.149">11 by 11 and we show it as this very</span> <span data-start="1006.149" data-end="1009.99">small overlay on the on the left hand</span> <span data-start="1009.99" data-end="1015.36">side there to a much bigger 801 by 4 1 4</span> <span data-start="1015.36" data-end="1017.939">so one of the the items that I actually</span> <span data-start="1017.939" data-end="1020.189">have to do in this area you can see</span> <span data-start="1020.189" data-end="1022.319">actually have a few going on here which</span> <span data-start="1022.319" data-end="1023.61">are profit probably other images that</span> <span data-start="1023.61" data-end="1026.939">are being shifted you know as we as we</span> <span data-start="1026.939" data-end="1029.28">make our way through and let me let me</span> <span data-start="1029.28" data-end="1031.26">just one of the things I wanted to step</span> <span data-start="1031.26" data-end="1032.549">back for a second and just talk about</span> <span data-start="1032.549" data-end="1034.14">why somebody would do this I mean</span> <span data-start="1034.14" data-end="1036.03">typically you'll you know you'll run</span> <span data-start="1036.03" data-end="1038">lighthouse on a page or you'll go to</span> <span data-start="1038" data-end="1040.86">search consoles new corbels report or</span> <span data-start="1040.86" data-end="1042.419">the chrome user experience report and</span> <span data-start="1042.419" data-end="1044.579">you'll see that you know you have layout</span> <span data-start="1044.579" data-end="1046.02">shifting happening on your page and you</span> <span data-start="1046.02" data-end="1047.64">might be wondering to yourself ok but I</span> <span data-start="1047.64" data-end="1050.07">don't see it when I visit my page so</span> <span data-start="1050.07" data-end="1051.39">where is this layout shifting happening</span> <span data-start="1051.39" data-end="1053.61">and so then dev tools is a great place</span> <span data-start="1053.61" data-end="1054.96">to debug that into</span> <span data-start="1054.96" data-end="1057.09">you know figure out which page on your</span> <span data-start="1057.09" data-end="1058.86">site has layout shifting and then load</span> <span data-start="1058.86" data-end="1061.14">it up in dev tools under the throttling</span> <span data-start="1061.14" data-end="1062.52">conditions that you know Paul showed</span> <span data-start="1062.52" data-end="1064.529">earlier and then you know look and see</span> <span data-start="1064.529" data-end="1065.76">what dev tools was telling you is</span> <span data-start="1065.76" data-end="1066.929">shifting because that's how you can</span> <span data-start="1066.929" data-end="1068.7">figure out what's causing the layout</span> <span data-start="1068.7" data-end="1070.08">shift and then you know you know what</span> <span data-start="1070.08" data-end="1071.88">you need to do to fix it yeah and</span> <span data-start="1071.88" data-end="1073.95">there's more I have to do here to be</span> <span data-start="1073.95" data-end="1075.57">clear I think one of the things that is</span> <span data-start="1075.57" data-end="1077.19">missing from this which is actually</span> <span data-start="1077.19" data-end="1078.529">available in the data I just need to</span> <span data-start="1078.529" data-end="1081.27">plummet through is which elements are we</span> <span data-start="1081.27" data-end="1082.679">talking about but I can show you that</span> <span data-start="1082.679" data-end="1084.69">we've got these areas but we it does</span> <span data-start="1084.69" data-end="1086.13">feel like we're missing a bit of</span> <span data-start="1086.13" data-end="1087.63">information about exactly which elements</span> <span data-start="1087.63" data-end="1089.789">it is like we do with LCP we highlight</span> <span data-start="1089.789" data-end="1091.679">the image that we're actually you know</span> <span data-start="1091.679" data-end="1093.899">referring to here we should be able to</span> <span data-start="1093.899" data-end="1097.59">do the same here so by the time this</span> <span data-start="1097.59" data-end="1099.48">goes out and you're watching this give</span> <span data-start="1099.48" data-end="1101.01">it a try in Chrome Canary because I</span> <span data-start="1101.01" data-end="1102.57">might have been able to land the feature</span> <span data-start="1102.57" data-end="1104.52">by then yeah I'm not making any promises</span> <span data-start="1104.52" data-end="1106.169">but that would be good with it and just</span> <span data-start="1106.169" data-end="1108.77">um yeah just as a kind of a quick point</span> <span data-start="1108.77" data-end="1111.059">there there's often two pieces to a</span> <span data-start="1111.059" data-end="1112.98">layout chef there's the there's the</span> <span data-start="1112.98" data-end="1115.11">element that shifted and then there's</span> <span data-start="1115.11" data-end="1117.84">the element that caused it to shift and</span> <span data-start="1117.84" data-end="1119.52">so sometimes you know figuring out one</span> <span data-start="1119.52" data-end="1122.1">or the other can be helpful in fixing</span> <span data-start="1122.1" data-end="1124.08">because it looks like here that it's</span> <span data-start="1124.08" data-end="1128.37">showing the image that came in but</span> <span data-start="1128.37" data-end="1130.44">adding images so adding elements of the</span> </p>
<p><span data-start="1130.44" data-end="1132.87">Dom doesn't in itself cause layout shift</span> <span data-start="1132.87" data-end="1134.52">but if adding an element of the Dom</span> <span data-start="1134.52" data-end="1138.029">moves the elements below it then that</span> <span data-start="1138.029" data-end="1140.88">would cause a layout shift right because</span> <span data-start="1140.88" data-end="1142.89">the the default size of this image looks</span> <span data-start="1142.89" data-end="1146.549">to be 11 by 11 pixels to begin with and</span> <span data-start="1146.549" data-end="1148.77">then when it when it gets populated with</span> <span data-start="1148.77" data-end="1153.12">the actual pixel data it pushes down the</span> <span data-start="1153.12" data-end="1154.98">rest of the page content which I guess</span> <span data-start="1154.98" data-end="1159.899">justifies be the layout shift there yeah</span> <span data-start="1159.899" data-end="1165.149">yeah okay so that's that's that you know</span> <span data-start="1165.149" data-end="1167.399">if you've got like we said earlier if</span> <span data-start="1167.399" data-end="1168.69">you put width and height on these things</span> <span data-start="1168.69" data-end="1170.669">that will help but you can also have I</span> <span data-start="1170.669" data-end="1172.95">mean let me show you this other one even</span> <span data-start="1172.95" data-end="1174.24">on the Google home page this privacy</span> <span data-start="1174.24" data-end="1176.82">reminder down here if I take a recording</span> <span data-start="1176.82" data-end="1181.59">here and I just refresh this page we're</span> <span data-start="1181.59" data-end="1183.87">gonna see a layout shift here and</span> <span data-start="1183.87" data-end="1186.299">similarly we've got this here which is</span> <span data-start="1186.299" data-end="1188.79">going from down here and</span> </p>
<p><span data-start="1188.79" data-end="1191.76">I presume there's some JavaScript or</span> <span data-start="1191.76" data-end="1193.5">something like that that's looking to</span> <span data-start="1193.5" data-end="1195.57">see whether the privacy reminders been</span> <span data-start="1195.57" data-end="1198.18">seen and if not it pushes that content</span> <span data-start="1198.18" data-end="1200.82">on them and so again this is probably</span> <span data-start="1200.82" data-end="1202.47">JavaScript based and you're gonna know</span> <span data-start="1202.47" data-end="1205.44">in your own apps we know what's going on</span> <span data-start="1205.44" data-end="1207.72">what is it third-party content is it</span> <span data-start="1207.72" data-end="1210.08">your own JavaScript is your own Styles</span> <span data-start="1210.08" data-end="1212.79">right and it's a case of so digging into</span> <span data-start="1212.79" data-end="1215.16">the specifics of your application to try</span> <span data-start="1215.16" data-end="1217.65">and figure out exactly you know what's</span> <span data-start="1217.65" data-end="1219.18">triggering now like what could be</span> <span data-start="1219.18" data-end="1221.61">happening there in order to figure it</span> <span data-start="1221.61" data-end="1222.93">out so that's just you know a couple of</span> <span data-start="1222.93" data-end="1225.51">examples of the layout shifting that you</span> <span data-start="1225.51" data-end="1225.99">can see</span> <span data-start="1225.99" data-end="1228.15">yeah and just you know right what one</span> <span data-start="1228.15" data-end="1229.98">thing to keep in mind is that in an</span> <span data-start="1229.98" data-end="1231.6">ideal world you would have no layout</span> <span data-start="1231.6" data-end="1234">shifts on your page but sometimes it's</span> <span data-start="1234" data-end="1235.02">unavoidable</span> <span data-start="1235.02" data-end="1237.18">and so the you know the threshold that</span> <span data-start="1237.18" data-end="1239.22">we recommend you know folks stay below</span> <span data-start="1239.22" data-end="1243.09">is is 0.1 and so it looks here that you</span> <span data-start="1243.09" data-end="1245.16">know this layout shift is is quite a bit</span> <span data-start="1245.16" data-end="1247.92">below that and so even though you know</span> <span data-start="1247.92" data-end="1251.31">you still want to be at at at 0 if you</span> <span data-start="1251.31" data-end="1255.09">can as long as you're below 0.14 you</span> <span data-start="1255.09" data-end="1257.04">know 75% of your users you're usually in</span> <span data-start="1257.04" data-end="1259.62">good shape so you say 0.1 I guess that's</span> <span data-start="1259.62" data-end="1262.89">like for page load because that's where</span> <span data-start="1262.89" data-end="1266.13">a lot of these all of these metrics are</span> <span data-start="1266.13" data-end="1268.38">aimed at page load right now right yeah</span> <span data-start="1268.38" data-end="1269.88">so that's actually a really good point</span> </p>
<p><span data-start="1269.88" data-end="1271.59">I'm glad to have it up</span> <span data-start="1271.59" data-end="1274.05">CLS measures layout ships that happen</span> <span data-start="1274.05" data-end="1276.24">during the entire lifecycle of the page</span> <span data-start="1276.24" data-end="1278.67">from when you load the page until when</span> <span data-start="1278.67" data-end="1281.76">you unload the page even if you leave</span> <span data-start="1281.76" data-end="1283.53">the page open for you know days or weeks</span> <span data-start="1283.53" data-end="1286.59">it does measure that entire time whereas</span> <span data-start="1286.59" data-end="1288.75">here in dev tools you ran a trace and</span> <span data-start="1288.75" data-end="1291.69">you got you saw the layout shift that</span> <span data-start="1291.69" data-end="1293.19">happened during that trace and so in</span> <span data-start="1293.19" data-end="1295.56">this particular case CLS was only</span> <span data-start="1295.56" data-end="1297.99">measuring shifts for a small period of</span> <span data-start="1297.99" data-end="1300.21">time it's important that developers keep</span> <span data-start="1300.21" data-end="1303.12">that in mind because you know the layout</span> <span data-start="1303.12" data-end="1306.03">the the actual metric definition is for</span> <span data-start="1306.03" data-end="1308.1">the entire lifespan of the page so if</span> <span data-start="1308.1" data-end="1310.2">you run a lighthouse trace or a web page</span> <span data-start="1310.2" data-end="1312.63">test trace or even in dev tools and you</span> <span data-start="1312.63" data-end="1314.76">see a certain value and it's below 0.1</span> <span data-start="1314.76" data-end="1317.01">the threshold it just mentioned just</span> <span data-start="1317.01" data-end="1318.87">keep in mind that you have to actually</span> <span data-start="1318.87" data-end="1321.24">be measuring it the entire time you know</span> <span data-start="1321.24" data-end="1322.78">that that's that's the</span> <span data-start="1322.78" data-end="1325.51">the the metric the measure that counts</span> <span data-start="1325.51" data-end="1328.42">is the entire lifecycle of the page also</span> </p>
<p><span data-start="1328.42" data-end="1330.25">I think in this area we should talk</span> <span data-start="1330.25" data-end="1332.68">about perhaps the the metrics themselves</span> <span data-start="1332.68" data-end="1336.25">as a bit of an evolving art I mean we</span> <span data-start="1336.25" data-end="1337.87">have for example first meaningful paint</span> <span data-start="1337.87" data-end="1340.78">up here but this isn't one of the</span> <span data-start="1340.78" data-end="1342.55">metrics that we would mention and say</span> <span data-start="1342.55" data-end="1343.78">something like core web vitals and</span> <span data-start="1343.78" data-end="1347.38">there's also no metric as far as I'm</span> <span data-start="1347.38" data-end="1348.97">aware for something like animation</span> <span data-start="1348.97" data-end="1352.15">performance so that's true I guess my</span> <span data-start="1352.15" data-end="1353.77">question to you is what's going on there</span> <span data-start="1353.77" data-end="1355.69">why have we got a metric here that we</span> <span data-start="1355.69" data-end="1357.76">wouldn't refer to and why do we not yet</span> <span data-start="1357.76" data-end="1359.2">have a metric for something that we</span> <span data-start="1359.2" data-end="1361.12">might be interested in tracking what's</span> <span data-start="1361.12" data-end="1363.52">the kind of history and story there yeah</span> <span data-start="1363.52" data-end="1364.21">that's a good question</span> <span data-start="1364.21" data-end="1368.35">so FMP our first meaningful paint if you</span> <span data-start="1368.35" data-end="1370.96">remember from a previous you know trace</span> <span data-start="1370.96" data-end="1375.13">that that you did Paul FOP was right</span> <span data-start="1375.13" data-end="1379.99">next to FP FCP and then LCP was Lena</span> <span data-start="1379.99" data-end="1381.67">later in the page load so what actually</span> <span data-start="1381.67" data-end="1383.41">ended up happening was that oh yeah and</span> <span data-start="1383.41" data-end="1384.58">it looks like that's that's the case</span> <span data-start="1384.58" data-end="1384.97">here</span> <span data-start="1384.97" data-end="1388.33">so yeah after a bunch of testing I mean</span> </p>
<p><span data-start="1388.33" data-end="1390.07">F and P is essentially it's a different</span> <span data-start="1390.07" data-end="1391.57">metric it has a different meaning than</span> <span data-start="1391.57" data-end="1394.12">LCP and after a bunch of research we</span> <span data-start="1394.12" data-end="1396.58">found out that FMP actually wasn't as</span> <span data-start="1396.58" data-end="1399.91">accurate at predicting when the main you</span> <span data-start="1399.91" data-end="1402.25">know what most people consider to be the</span> <span data-start="1402.25" data-end="1404.5">most important content of the page you</span> <span data-start="1404.5" data-end="1406.27">know the most meaningful part of the</span> <span data-start="1406.27" data-end="1407.62">page the metric itself has the word</span> <span data-start="1407.62" data-end="1410.26">meaningful in the name but it turns out</span> <span data-start="1410.26" data-end="1412.27">that LCP is actually a better predictor</span> <span data-start="1412.27" data-end="1414.43">and so as we come up with metrics that</span> <span data-start="1414.43" data-end="1415.99">are better at capturing the user</span> <span data-start="1415.99" data-end="1417.73">experience will you know kind of</span> <span data-start="1417.73" data-end="1419.59">deprecated older metrics and replace</span> <span data-start="1419.59" data-end="1422.89">them with with newer metrics but you</span> <span data-start="1422.89" data-end="1423.88">know we do recognize that that's</span> <span data-start="1423.88" data-end="1425.68">happened a bunch over the years and I'm</span> <span data-start="1425.68" data-end="1427.69">sure developers are getting tired of</span> <span data-start="1427.69" data-end="1429.61">hearing new metrics announced all the</span> <span data-start="1429.61" data-end="1431.05">time and so one of the things that we</span> <span data-start="1431.05" data-end="1433.27">did with core web vitals with the web</span> <span data-start="1433.27" data-end="1434.83">files initiative and specifically with</span> <span data-start="1434.83" data-end="1436.66">core web idols is we're committing to</span> <span data-start="1436.66" data-end="1439.96">you know only introducing metrics at</span> <span data-start="1439.96" data-end="1442.36">most once a year for the the core set of</span> <span data-start="1442.36" data-end="1444.61">web vitals and so developers are</span> <span data-start="1444.61" data-end="1446.65">following along they can bring you know</span> <span data-start="1446.65" data-end="1448.72">gives them a little bit of stability if</span> <span data-start="1448.72" data-end="1449.68">they're building a business on these</span> <span data-start="1449.68" data-end="1451.48">metrics or you know predictability if</span> <span data-start="1451.48" data-end="1453.28">they just kind of don't want to have to</span> <span data-start="1453.28" data-end="1455.23">you know always be following along with</span> <span data-start="1455.23" data-end="1456.49">the latest and so</span> <span data-start="1456.49" data-end="1459.76">you know recently we announced LCP was</span> <span data-start="1459.76" data-end="1461.59">one of the core wet vitals and an FMP</span> <span data-start="1461.59" data-end="1463.33">was not one of the core Mon vitals and</span> <span data-start="1463.33" data-end="1464.62">like over time that will probably be</span> <span data-start="1464.62" data-end="1466.69">deprecated so you also bet also asked</span> <span data-start="1466.69" data-end="1469.96">about animation performance this is</span> <span data-start="1469.96" data-end="1471.34">definitely a metric that we're looking</span> <span data-start="1471.34" data-end="1474.76">at for the future maybe you know in 2021</span> <span data-start="1474.76" data-end="1478.48">or 2022 so we know that the set of core</span> <span data-start="1478.48" data-end="1480.309">web vitals doesn't capture the entire</span> <span data-start="1480.309" data-end="1482.53">you know the entire story of user</span> <span data-start="1482.53" data-end="1484.77">experience and we're hoping that over</span> <span data-start="1484.77" data-end="1487.66">time we can improve it and animation</span> <span data-start="1487.66" data-end="1489.52">performance is definitely a metric that</span> <span data-start="1489.52" data-end="1491.08">are a definitely an area of performance</span> <span data-start="1491.08" data-end="1493.03">that we're exploring I think the last</span> <span data-start="1493.03" data-end="1494.53">one that we talked about talking about</span> <span data-start="1494.53" data-end="1497.89">if I gather right yep I think I did it</span> <span data-start="1497.89" data-end="1500.71">was first input first input delay which</span> <span data-start="1500.71" data-end="1506.29">is not directly shown in dev tools so</span> <span data-start="1506.29" data-end="1508.21">what is it's not sometimes called fi D</span> <span data-start="1508.21" data-end="1512.23">right what is that and and why yes so</span> <span data-start="1512.23" data-end="1515.8">first input delay or fit or F ID for</span> <span data-start="1515.8" data-end="1519.88">short represents the time from when the</span> <span data-start="1519.88" data-end="1522.07">user you know interacts with the page of</span> <span data-start="1522.07" data-end="1525.429">taps on the screen or you know clicks a</span> <span data-start="1525.429" data-end="1528.85">key a keyboard key to the point when the</span> <span data-start="1528.85" data-end="1531.97">browser is able to respond to that input</span> <span data-start="1531.97" data-end="1536.02">event so this can you might think that</span> <span data-start="1536.02" data-end="1537.04">it's always going to be instantaneous</span> <span data-start="1537.04" data-end="1539.17">like you you know you click on the</span> <span data-start="1539.17" data-end="1540.22">screen and then something will happen</span> <span data-start="1540.22" data-end="1541.84">but as users we kind of know that that's</span> <span data-start="1541.84" data-end="1544.059">not the case oftentimes you know we've</span> <span data-start="1544.059" data-end="1546.309">all had the experience of clicking on</span> <span data-start="1546.309" data-end="1547.66">something or tapping on something and</span> <span data-start="1547.66" data-end="1550.21">not having an instant response and so</span> <span data-start="1550.21" data-end="1553">this can happen if you know there's a</span> <span data-start="1553" data-end="1555.19">bunch of JavaScript running on the page</span> <span data-start="1555.19" data-end="1557.41">maybe you have a large JavaScript file</span> <span data-start="1557.41" data-end="1559.6">that the browser is currently parsing</span> <span data-start="1559.6" data-end="1561.64">and executing and then so if at that</span> <span data-start="1561.64" data-end="1564.07">exact time a user taps on the screen</span> <span data-start="1564.07" data-end="1566.23">then the browser has to wait a little</span> <span data-start="1566.23" data-end="1568.24">bit of time before it can respond to</span> <span data-start="1568.24" data-end="1571.57">that input event and so f ID quantifies</span> <span data-start="1571.57" data-end="1576.49">like that duration of of time and you</span> <span data-start="1576.49" data-end="1578.17">mentioned they it's not exposed directly</span> <span data-start="1578.17" data-end="1579.7">in dev tools and the reason is because</span> </p>
<p><span data-start="1579.7" data-end="1582.25">I'm assuming you know here you're the</span> <span data-start="1582.25" data-end="1584.08">one who helped implement this but first</span> <span data-start="1584.08" data-end="1586.09">input delay requires an input it</span> <span data-start="1586.09" data-end="1590.41">requires a user and so you know</span> <span data-start="1590.41" data-end="1592.78">in many lab scenarios there is no user</span> <span data-start="1592.78" data-end="1594.85">and so you can't always measure first</span> <span data-start="1594.85" data-end="1596.8">input delay that way but we have another</span> <span data-start="1596.8" data-end="1599.62">metric called total blocking time that</span> <span data-start="1599.62" data-end="1602.4">quantifies just that we do have yeah</span> <span data-start="1602.4" data-end="1604.18">that's great and that quantifies how</span> <span data-start="1604.18" data-end="1606.49">often the main thread how much of the</span> <span data-start="1606.49" data-end="1609.13">main like how much time the main thread</span> <span data-start="1609.13" data-end="1612.52">is blocked and a block main thread as I</span> <span data-start="1612.52" data-end="1614.92">just mentioned contributes to you know</span> <span data-start="1614.92" data-end="1617.32">the likelihood that a user will interact</span> <span data-start="1617.32" data-end="1619.03">with a page but the browser won't be</span> <span data-start="1619.03" data-end="1621.07">able to respond right away so you said</span> <span data-start="1621.07" data-end="1623.2">that total blocking time is in dev tools</span> <span data-start="1623.2" data-end="1625.66">can you show me where that is yes oh I</span> <span data-start="1625.66" data-end="1629.59">see their screen I have I have long</span> <span data-start="1629.59" data-end="1631.93">tests over here and I yeah it is down</span> <span data-start="1631.93" data-end="1633.64">there and it's currently says it's</span> <span data-start="1633.64" data-end="1634.87">unavailable and I'll talk about that</span> <span data-start="1634.87" data-end="1636.49">more a little bit I've been working on</span> <span data-start="1636.49" data-end="1639.34">that feature in fact today so I can tell</span> <span data-start="1639.34" data-end="1640.3">you a little bit more about what's going</span> <span data-start="1640.3" data-end="1643.51">on there too so what others I've come to</span> <span data-start="1643.51" data-end="1646.45">web dev and I've cleared it and I'm just</span> <span data-start="1646.45" data-end="1647.8">going to record and I'm gonna hit</span> <span data-start="1647.8" data-end="1652.78">refresh and I don't expect here that I'm</span> <span data-start="1652.78" data-end="1655.84">gonna see any particular blocking time</span> <span data-start="1655.84" data-end="1658.3">because I've got a first machine I'm on</span> <span data-start="1658.3" data-end="1660.1">a good connection and yeah you can see</span> <span data-start="1660.1" data-end="1662.2">right down at the bottom here we have</span> <span data-start="1662.2" data-end="1663.58">total blocking time and it's currently</span> <span data-start="1663.58" data-end="1665.11">set to zero millisecond right</span> <span data-start="1665.11" data-end="1667.54">so what that roughly translates to over</span> <span data-start="1667.54" data-end="1669.34">here is when we zoom in on these</span> <span data-start="1669.34" data-end="1672.28">top-level tasks which are on the main</span> <span data-start="1672.28" data-end="1673.42">thread</span> <span data-start="1673.42" data-end="1676.63">we have no task that goes over 50</span> <span data-start="1676.63" data-end="1678.46">milliseconds so 50 milliseconds is our</span> <span data-start="1678.46" data-end="1681.31">threshold for hey this task is long and</span> <span data-start="1681.31" data-end="1684.1">it's it's gonna contribute to the the</span> <span data-start="1684.1" data-end="1685.69">blocking time right because what we want</span> <span data-start="1685.69" data-end="1687.31">to do is we want to keep a track on on</span> <span data-start="1687.31" data-end="1689.98">tasks that that go over 50 milliseconds</span> <span data-start="1689.98" data-end="1691.09">because they're the ones that are most</span> <span data-start="1691.09" data-end="1693.1">likely were the user to interact they're</span> <span data-start="1693.1" data-end="1695.25">the ones that are most likely to prevent</span> <span data-start="1695.25" data-end="1697.39">the browser from being able to respond</span> <span data-start="1697.39" data-end="1699.22">in in an adequate amount of time right</span> <span data-start="1699.22" data-end="1701.77">so we currently have no tasks block to</span> <span data-start="1701.77" data-end="1705.81">blocking time is defined as any time</span> <span data-start="1705.81" data-end="1708.49">greater than 50 milliseconds in a task</span> <span data-start="1708.49" data-end="1710.92">so if a task is right forty nine</span> <span data-start="1710.92" data-end="1712.48">milliseconds there's zero blocking time</span> <span data-start="1712.48" data-end="1715.12">and if a task is 51 milliseconds there's</span> <span data-start="1715.12" data-end="1717.04">one millisecond of blocking time and</span> <span data-start="1717.04" data-end="1718.9">just out of curiosity some people asked</span> <span data-start="1718.9" data-end="1721.51">why you know why 50 milliseconds what's</span> <span data-start="1721.51" data-end="1724.21">the thinking behind that yes</span> <span data-start="1724.21" data-end="1727.03">the answer is that the idea you might</span> <span data-start="1727.03" data-end="1728.89">have heard of rail the rail performance</span> <span data-start="1728.89" data-end="1730.54">model and you've heard often times</span> <span data-start="1730.54" data-end="1731.71">people say you should always respond</span> <span data-start="1731.71" data-end="1734.56">within 100 milliseconds of user input</span> <span data-start="1734.56" data-end="1736.48">and so the question is why is 50</span> <span data-start="1736.48" data-end="1737.98">milliseconds to the blocking time and</span> <span data-start="1737.98" data-end="1739.81">the idea there is that if you ever have</span> <span data-start="1739.81" data-end="1742.78">if you keep all of your tasks below 50</span> <span data-start="1742.78" data-end="1744.13">milliseconds then there's never</span> <span data-start="1744.13" data-end="1747.04">situation where two tasks can't both run</span> <span data-start="1747.04" data-end="1750.13">within the 100 millisecond threshold and</span> <span data-start="1750.13" data-end="1751.84">so that's kind of if people are</span> <span data-start="1751.84" data-end="1753.49">wondering why that 50 millisecond time</span> <span data-start="1753.49" data-end="1755.5">exists and why we chose that for the the</span> <span data-start="1755.5" data-end="1758.34">magic number with total blocking time</span> <span data-start="1758.34" data-end="1761.11">exactly and of course if you were doing</span> <span data-start="1761.11" data-end="1764.08">an animation then your task time really</span> <span data-start="1764.08" data-end="1766.03">should be under like 10 or  that's</span> <span data-start="1766.03" data-end="1768.82">irregular seconds so so we'd sort of it</span> <span data-start="1768.82" data-end="1770.89">you got to be context aware the 50</span> <span data-start="1770.89" data-end="1772.33">milliseconds number is a it's a great</span> <span data-start="1772.33" data-end="1774.64">number to have in mind especially for</span> <span data-start="1774.64" data-end="1776.5">load performance but it does change</span> <span data-start="1776.5" data-end="1778.39">depending on the context and whether</span> <span data-start="1778.39" data-end="1780.49">you'll say animating or not now what as</span> </p>
<p><span data-start="1780.49" data-end="1783.78">I said we have no tasks here that are</span> <span data-start="1783.78" data-end="1786.64">running long and now and if I got a</span> <span data-start="1786.64" data-end="1788.68">trace like this from somebody I would be</span> <span data-start="1788.68" data-end="1790.93">very happy perfect I would say listen oh</span> <span data-start="1790.93" data-end="1793.54">yeah I wouldn't complain at this at all</span> <span data-start="1793.54" data-end="1794.89">but what I can do is I can least</span> <span data-start="1794.89" data-end="1797.2">simulate a slower device like I did</span> <span data-start="1797.2" data-end="1799.51">before over my capture settings I'm</span> <span data-start="1799.51" data-end="1801.16">going to go to like a six time slowdown</span> <span data-start="1801.16" data-end="1803.26">and I'm expecting that this 25</span> <span data-start="1803.26" data-end="1805.39">milliseconds here is gonna run long so</span> <span data-start="1805.39" data-end="1806.53">this is some JavaScript that's being</span> <span data-start="1806.53" data-end="1808.63">evaluated so I'm going 6 times slow down</span> </p>
<p><span data-start="1808.63" data-end="1810.97">I'm gonna hit record and I'm gonna</span> <span data-start="1810.97" data-end="1814.54">refresh again okay I want to do two</span> <span data-start="1814.54" data-end="1815.89">things I'm gonna stop the recording a</span> <span data-start="1815.89" data-end="1817.27">little bit earlier than I did last time</span> <span data-start="1817.27" data-end="1820.18">but the first thing to notice here is</span> <span data-start="1820.18" data-end="1822.16">our tasks are now longer because of the</span> <span data-start="1822.16" data-end="1822.58">slowdown</span> <span data-start="1822.58" data-end="1826.03">and if i zoom in on this task it's a</span> <span data-start="1826.03" data-end="1828.64">hundred and seventy-six mm 0.5 five</span> <span data-start="1828.64" data-end="1831.52">milliseconds and you said it's qualified</span> <span data-start="1831.52" data-end="1833.47">for being a long task goodbye what's a</span> <span data-start="1833.47" data-end="1835.84">hundred and twenty six point five five</span> <span data-start="1835.84" data-end="1839.74">milliseconds okay so what we do is after</span> <span data-start="1839.74" data-end="1841.81">the 50 millisecond point on this task we</span> <span data-start="1841.81" data-end="1843.97">do this candy striping here and we also</span> <span data-start="1843.97" data-end="1847.36">pop a red triangle up into the top right</span> <span data-start="1847.36" data-end="1849.1">hand corner so that when you're looking</span> <span data-start="1849.1" data-end="1851.02">at a glance like zoomed out you get a</span> <span data-start="1851.02" data-end="1853.18">sense of just how many of your tasks are</span> <span data-start="1853.18" data-end="1854.47">running a bit long</span> </p>
<p><span data-start="1854.47" data-end="1857.44">I think almost universally here the ones</span> <span data-start="1857.44" data-end="1858.37">that are running</span> <span data-start="1858.37" data-end="1860.92">javascript-based yeah so if you if you</span> <span data-start="1860.92" data-end="1862.96">again you know are looking at the chrome</span> <span data-start="1862.96" data-end="1864.43">user experience report or search</span> <span data-start="1864.43" data-end="1866.77">consoles core web files report and you</span> <span data-start="1866.77" data-end="1868.3">see that you have a first input delay</span> <span data-start="1868.3" data-end="1870.46">that's higher than you would have</span> <span data-start="1870.46" data-end="1872.38">expected for a certain page I think this</span> <span data-start="1872.38" data-end="1873.82">is a great example of how you would go</span> <span data-start="1873.82" data-end="1875.95">about debugging that so like you might</span> <span data-start="1875.95" data-end="1878.62">you know be on your fast MacBook Pro</span> <span data-start="1878.62" data-end="1881.05">laptop or something and not see any long</span> <span data-start="1881.05" data-end="1882.4">tasks but if you go into dev tools and</span> <span data-start="1882.4" data-end="1885.22">you throttle the CPU and then you start</span> <span data-start="1885.22" data-end="1886.84">seeing a bunch of long tests like shown</span> <span data-start="1886.84" data-end="1888.79">here and that would help explain why</span> <span data-start="1888.79" data-end="1891.43">because if a user tried to interact with</span> <span data-start="1891.43" data-end="1893.35">the page during one of these long tests</span> <span data-start="1893.35" data-end="1895.33">the browser would not be able to respond</span> <span data-start="1895.33" data-end="1897.07">it would have to wait until the task</span> <span data-start="1897.07" data-end="1899.29">completed before it could run those</span> <span data-start="1899.29" data-end="1900.25">event handlers</span> <span data-start="1900.25" data-end="1902.47">yes supporting and sing unavailable</span> <span data-start="1902.47" data-end="1903.79">there in the bottom in dev tools what</span> <span data-start="1903.79" data-end="1906.55">does what does that mean yeah so</span> <span data-start="1906.55" data-end="1908.08">sometimes we do say unavailable the</span> <span data-start="1908.08" data-end="1910.63">reason is we wait for blink to tell us</span> <span data-start="1910.63" data-end="1915.16">when it's happy for us to declare the</span> <span data-start="1915.16" data-end="1916.93">page interactive and at that point it</span> <span data-start="1916.93" data-end="1918.52">tells us how much blocking time it</span> <span data-start="1918.52" data-end="1921.07">measured and so sometimes if the trace</span> <span data-start="1921.07" data-end="1922.39">isn't long enough we don't actually get</span> <span data-start="1922.39" data-end="1924.28">that information so what I've been</span> <span data-start="1924.28" data-end="1925.9">working on actually recently is adding</span> <span data-start="1925.9" data-end="1927.28">in an estimate which is essentially</span> <span data-start="1927.28" data-end="1929.53">counting up the amount of candy striping</span> <span data-start="1929.53" data-end="1930.82">that we're getting right in those</span> <span data-start="1930.82" data-end="1932.11">top-level records so that we can at</span> <span data-start="1932.11" data-end="1933.97">least give you an estimate even if blink</span> <span data-start="1933.97" data-end="1936.19">hasn't given us the kind of official</span> <span data-start="1936.19" data-end="1937.96">answer so hopefully you should see that</span> <span data-start="1937.96" data-end="1940.21">in Chrome Canary them soon yeah that</span> <span data-start="1940.21" data-end="1941.13">makes sense</span> <span data-start="1941.13" data-end="1943.35">because yeah total blocking time is</span> <span data-start="1943.35" data-end="1945.37">technically the definition is the amount</span> <span data-start="1945.37" data-end="1947.98">of blocking time between first content</span> <span data-start="1947.98" data-end="1950.38">for paint and time to interactive and so</span> <span data-start="1950.38" data-end="1951.73">it makes sense that dev tools would wait</span> <span data-start="1951.73" data-end="1954.25">until the browser is interactive but</span> <span data-start="1954.25" data-end="1955.24">yeah that doesn't seem like a good</span> <span data-start="1955.24" data-end="1958.51">feature to just give like in an</span> <span data-start="1958.51" data-end="1961.03">unofficial total when it's not</span> <span data-start="1961.03" data-end="1964.33">interactive yeah exactly so now we've</span> <span data-start="1964.33" data-end="1966.7">talked about FCP LCP layout shifting and</span> <span data-start="1966.7" data-end="1972.46">long tasks and if ID or fit uh yeah if I</span> <span data-start="1972.46" data-end="1974.47">was a developer who wanted to know more</span> <span data-start="1974.47" data-end="1976.3">about these things as well as playing</span> <span data-start="1976.3" data-end="1977.71">within dev tools where would I go and</span> <span data-start="1977.71" data-end="1978.58">get more information</span> <span data-start="1978.58" data-end="1979.81">that's a great question you can go to</span> <span data-start="1979.81" data-end="1983.44">web dev slash vitals and that will have</span> <span data-start="1983.44" data-end="1984.88">you know all the information about the</span> <span data-start="1984.88" data-end="1986.59">definitions of the metrics links to</span> <span data-start="1986.59" data-end="1989.47">guides and how to optimize for them you</span> <span data-start="1989.47" data-end="1991.24">know links to more information about all</span> <span data-start="1991.24" data-end="1992.029">the tools that's</span> <span data-start="1992.029" data-end="1993.08">work them and everything like that so</span> <span data-start="1993.08" data-end="1995.119">definitely the best place is to go to</span> <span data-start="1995.119" data-end="1997.98">web dev slash vitals</span> <span data-start="1997.98" data-end="2004.44">[Music]</span> <span data-start="2004.44" data-end="2006.72">[Applause]</span> </p>
</section>

<!-- div#container ends -->
</div>

<img alt="The End" id="fin" src="../images/fin.jpg">

<script>
/*eslint-disable */
function googleTranslateElementInit() {
  new google.translate.TranslateElement({pageLanguage: 'en',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
    }, 'google-translate');
}
/* eslint-enable */
</script>

<script src="https://translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<script src="../js/main.js"></script>

</body>

</html>
