<section>
<p><span data-start="0.56" data-end="3.38">[Music]</span> <span data-start="3.38" data-end="5.66">[Applause]</span> <span data-start="5.66" data-end="12.17">[Music]</span> <span data-start="12.17" data-end="15.96">back in March 2003 Nick Fink and Steve</span> <span data-start="15.96" data-end="17.88">champion stunned the web design world</span> <span data-start="17.88" data-end="19.619">with the concept of progressive</span> <span data-start="19.619" data-end="22.05">enhancement a strategy for web design</span> <span data-start="22.05" data-end="23.97">that emphasizes core web page content</span> <span data-start="23.97" data-end="26.369">first and that then progressively adds</span> <span data-start="26.369" data-end="28.56">more nuance and technically rigorous</span> <span data-start="28.56" data-end="30.75">layers of presentation and features on</span> <span data-start="30.75" data-end="33.51">top of the web content while in 2003</span> <span data-start="33.51" data-end="35.579">progressive enhancement was about using</span> <span data-start="35.579" data-end="36.51">at the time</span> <span data-start="36.51" data-end="38.7">modern CSS features unobtrusive</span> <span data-start="38.7" data-end="40.77">javascript or even scalable vector</span> <span data-start="40.77" data-end="42.87">graphics progressive enhancement and</span> <span data-start="42.87" data-end="45.27">20/20 is about using modern browser</span> <span data-start="45.27" data-end="47.789">capabilities my name is Thomas Tanner</span> </p>
<p><span data-start="47.789" data-end="50.07">I'm a developer advocate based out of</span> <span data-start="50.07" data-end="52.44">the Google Hamburg office today I want</span> <span data-start="52.44" data-end="54.149">to talk about progressively enhancing</span> <span data-start="54.149" data-end="56.64">like it's 2003 building for modern</span> <span data-start="56.64" data-end="59.01">browsers since we all can be here</span> <span data-start="59.01" data-end="60.57">together in person due to the</span> <span data-start="60.57" data-end="62.94">coronavirus I've converted my talk into</span> <span data-start="62.94" data-end="65.309">an online trip that I want to take you</span> <span data-start="65.309" data-end="67.5">on with me for this trip you need a</span> <span data-start="67.5" data-end="69.17">solid understanding of JavaScript</span> <span data-start="69.17" data-end="71.549">talking of JavaScript the browser</span> <span data-start="71.549" data-end="74.369">support for the latest quod JavaScript</span> <span data-start="74.369" data-end="77.49">features is great promises modules</span> <span data-start="77.49" data-end="80.13">classes template literals arrow</span> <span data-start="80.13" data-end="82.77">functions you name them all supported</span> <span data-start="82.77" data-end="85.68">basic functions work across the board in</span> <span data-start="85.68" data-end="88.08">all modern browsers and even super</span> <span data-start="88.08" data-end="90.299">recent language editions like optional</span> <span data-start="90.299" data-end="92.28">chaining and knowledge coalescing reach</span> <span data-start="92.28" data-end="94.65">support really quickly when it comes to</span> </p>
<p><span data-start="94.65" data-end="96.54">CRO JavaScript features the grass</span> <span data-start="96.54" data-end="98.52">couldn't be much greener than it is</span> <span data-start="98.52" data-end="100.71">today for the trick that we are going on</span> <span data-start="100.71" data-end="102.479">the likeness should have a good</span> <span data-start="102.479" data-end="103.979">understanding of progressive web apps</span> <span data-start="103.979" data-end="106.829">for this talk I work with a simple PWA</span> <span data-start="106.829" data-end="109.259">called fugu greetings the name of this</span> <span data-start="109.259" data-end="112.14">app is a hat tip to project fugu where</span> <span data-start="112.14" data-end="114.06">we work on giving the web all the powers</span> <span data-start="114.06" data-end="116.28">of native applications you can read more</span> <span data-start="116.28" data-end="117.899">about the project at web tour death</span> <span data-start="117.899" data-end="119.7">slash food â€” status</span> <span data-start="119.7" data-end="122.31">fugu breedings is drawing up that allows</span> <span data-start="122.31" data-end="123.869">you to create virtual greeting cards</span> <span data-start="123.869" data-end="126.39">just imagine you actually had traveled</span> <span data-start="126.39" data-end="128.22">to Google i/o and wanted to send a</span> <span data-start="128.22" data-end="130.83">greeting card to your loved ones let me</span> <span data-start="130.83" data-end="133.31">recall some of the pwe concepts</span> <span data-start="133.31" data-end="135.38">fool greetings is reliable and fully</span> <span data-start="135.38" data-end="137.54">offline enabled so even if you don't</span> <span data-start="137.54" data-end="139.73">have Network you can still use it it can</span> <span data-start="139.73" data-end="141.14">be installed to the home screen of the</span> <span data-start="141.14" data-end="143.42">device and it integrates seamlessly into</span> <span data-start="143.42" data-end="144.89">the operating system as a standalone</span> <span data-start="144.89" data-end="146.9">application with this out of the way</span> <span data-start="146.9" data-end="149">let's dive into the actual topic of this</span> <span data-start="149" data-end="152.03">talk progressive enhancement starting</span> <span data-start="152.03" data-end="153.739">each greeting card from scratch can be</span> <span data-start="153.739" data-end="155.75">really cumbersome so why not have a</span> <span data-start="155.75" data-end="157.819">feature that allows users to import an</span> <span data-start="157.819" data-end="159.89">image installed from there with a</span> <span data-start="159.89" data-end="161.84">traditional approach you have used an</span> <span data-start="161.84" data-end="163.91">input type file element to make this</span> <span data-start="163.91" data-end="165.319">happen first</span> <span data-start="165.319" data-end="167.45">you'd create the element set its ID and</span> <span data-start="167.45" data-end="169.73">the to be accepted mine types and then</span> <span data-start="169.73" data-end="172.34">programmatically click it and listen for</span> <span data-start="172.34" data-end="174.62">changes and it works perfectly fine the</span> <span data-start="174.62" data-end="176.63">image is imported straight onto the</span> <span data-start="176.63" data-end="179.06">canvas when there is an import feature</span> <span data-start="179.06" data-end="181.61">that probably should also be an export</span> <span data-start="181.61" data-end="183.83">feature so users can save their greeting</span> <span data-start="183.83" data-end="186.41">cards locally similar to before the</span> <span data-start="186.41" data-end="188.39">traditional way to saving files is to</span> <span data-start="188.39" data-end="189.86">create an anchor link with the download</span> <span data-start="189.86" data-end="192.08">attribute and with the blob URL as it's</span> <span data-start="192.08" data-end="193.97">a trove you would then programmatically</span> <span data-start="193.97" data-end="196.94">click it to trigger the download and to</span> <span data-start="196.94" data-end="198.29">prevent memory leaks from happening</span> <span data-start="198.29" data-end="200.42">hopefully make sure not to forget to</span> <span data-start="200.42" data-end="202.76">revoke the blob URL but wait a minute</span> <span data-start="202.76" data-end="205.1">mentally you haven't downloaded a</span> <span data-start="205.1" data-end="207.799">greeting card you have saved it rather</span> <span data-start="207.799" data-end="209.39">than showing you a safe dial-up that</span> <span data-start="209.39" data-end="210.829">lets you choose where to put the file</span> <span data-start="210.829" data-end="213.35">the browser instead has directly down on</span> <span data-start="213.35" data-end="215.239">the greeting card without interaction</span> <span data-start="215.239" data-end="216.92">and it's put it straight into your</span> <span data-start="216.92" data-end="217.67">downloads folder</span> <span data-start="217.67" data-end="220.64">this isn't good what if there were a</span> <span data-start="220.64" data-end="223.01">better way what if you could just open a</span> <span data-start="223.01" data-end="225.35">local file edit it and then save the</span> <span data-start="225.35" data-end="227.269">modifications either through a new file</span> <span data-start="227.269" data-end="229.579">or back to the original file that you</span> <span data-start="229.579" data-end="232.459">had initially opened turns out there is</span> <span data-start="232.459" data-end="234.56">a better way the native file system API</span> <span data-start="234.56" data-end="236.42">allows you to open a grade files and</span> <span data-start="236.42" data-end="238.819">directories make modifications and save</span> <span data-start="238.819" data-end="240.68">them back let's see how it can feature</span> <span data-start="240.68" data-end="243.53">detect if the API exists the native file</span> <span data-start="243.53" data-end="245.75">system API exposes a new method choose</span> <span data-start="245.75" data-end="248.75">file system entries I can use this to</span> <span data-start="248.75" data-end="249.53">conditionally load</span> <span data-start="249.53" data-end="252.859">import image MJS and export image MJS if</span> <span data-start="252.859" data-end="255.41">the API exists and if it isn't available</span> <span data-start="255.41" data-end="256.91">load the files with the legacy</span> <span data-start="256.91" data-end="259.34">approaches from the earlier slides but</span> <span data-start="259.34" data-end="260.72">before I dive into the native file</span> <span data-start="260.72" data-end="262.849">system API let me just quickly highlight</span> <span data-start="262.849" data-end="265.49">the progressive announcement pattern and</span> <span data-start="265.49" data-end="267.2">browsers that don't support</span> <span data-start="267.2" data-end="269.69">file system API hello the legacy scripts</span> <span data-start="269.69" data-end="272.03">you can see the network tabs of Firefox</span> <span data-start="272.03" data-end="272.99">and Safari here</span> <span data-start="272.99" data-end="275.66">however on Chrome only the new scripts</span> <span data-start="275.66" data-end="277.46">are loaded this is made elegantly</span> <span data-start="277.46" data-end="279.59">possible thanks to dynamic imports that</span> <span data-start="279.59" data-end="281.93">all modern browsers support as I said</span> <span data-start="281.93" data-end="284.03">earlier the grass is pretty green these</span> <span data-start="284.03" data-end="286.31">days let's look at the actual native</span> <span data-start="286.31" data-end="288.65">file system API based implementation for</span> <span data-start="288.65" data-end="291.38">importing an image I call window choose</span> <span data-start="291.38" data-end="293.3">file system entries and pass it an</span> <span data-start="293.3" data-end="295.67">accept option parameter where I say I</span> <span data-start="295.67" data-end="298.4">want image files both file extensions as</span> <span data-start="298.4" data-end="300.98">well as mime types are supported this</span> <span data-start="300.98" data-end="303.32">results in a file handle from the file</span> <span data-start="303.32" data-end="305.51">handle I can obtain the actual file by</span> <span data-start="305.51" data-end="308.03">calling its get file method exporting an</span> <span data-start="308.03" data-end="309.74">image is almost the same but this time</span> <span data-start="309.74" data-end="312.05">you need to pass a type parameter save</span> <span data-start="312.05" data-end="314.06">file to the choose file system entries</span> <span data-start="314.06" data-end="316.67">method so I get a file save dialog</span> <span data-start="316.67" data-end="319.49">before this wasn't necessary since Open</span> </p>
<p><span data-start="319.49" data-end="322.61">File is the default I said the accept</span> <span data-start="322.61" data-end="324.47">parameter similar as before but this</span> <span data-start="324.47" data-end="327.77">time limited to just PNG images again I</span> <span data-start="327.77" data-end="329.63">get back a financial but rather than</span> <span data-start="329.63" data-end="331.79">getting the file this time I'm creating</span> <span data-start="331.79" data-end="333.86">a writable stream by calling crate</span> <span data-start="333.86" data-end="336.77">writable next I read the blog which is</span> <span data-start="336.77" data-end="338.45">my greeting card image to the file</span> <span data-start="338.45" data-end="341.18">finally I close the writable screen</span> <span data-start="341.18" data-end="343.91">everything can always Fame the disc</span> <span data-start="343.91" data-end="345.83">could be Arg space there could be a</span> <span data-start="345.83" data-end="348.47">write or read arrow or maybe simply the</span> <span data-start="348.47" data-end="350.87">user cancels the file a lot this is why</span> </p>
<p><span data-start="350.87" data-end="353.06">I always read the calls in a try-catch</span> <span data-start="353.06" data-end="355.34">statement I can now open the file as</span> <span data-start="355.34" data-end="358.19">before the imported file is drawn right</span> <span data-start="358.19" data-end="360.35">onto the canvas I can make my edits and</span> <span data-start="360.35" data-end="362.84">finally save them with a real save</span> <span data-start="362.84" data-end="364.67">dialogue where I can choose the name and</span> <span data-start="364.67" data-end="367.37">storage location of the file now the</span> <span data-start="367.37" data-end="369.32">file is ready to be preserved for the</span> <span data-start="369.32" data-end="371.99">eternity about from storing files for</span> <span data-start="371.99" data-end="374.03">the eternity maybe I actually want to</span> <span data-start="374.03" data-end="376.43">share my greeting card this is something</span> <span data-start="376.43" data-end="378.71">that the web share and web share target</span> <span data-start="378.71" data-end="381.41">API is allow me to do mobile and more</span> <span data-start="381.41" data-end="383.27">recently also district operating systems</span> <span data-start="383.27" data-end="385.22">have gained native sharing mechanisms</span> <span data-start="385.22" data-end="387.92">for example here is safaris share sheet</span> <span data-start="387.92" data-end="390.56">on Mac OS triggered from an article on</span> <span data-start="390.56" data-end="394.22">my side block Tommy icon and click the</span> <span data-start="394.22" data-end="396.38">share button you can share a link to the</span> <span data-start="396.38" data-end="398.45">article with a friend for example by the</span> <span data-start="398.45" data-end="400.11">native messages</span> <span data-start="400.11" data-end="401.43">the code to make this happen is pretty</span> <span data-start="401.43" data-end="403.98">straightforward I call navigator dot</span> <span data-start="403.98" data-end="407.13">share and pass it an optional title text</span> <span data-start="407.13" data-end="410.31">and euro but what if I want to attach an</span> <span data-start="410.31" data-end="412.53">image whether one of the web share a P I</span> <span data-start="412.53" data-end="414.48">that you can see on the screen doesn't</span> <span data-start="414.48" data-end="416.43">support this yet the good news is that</span> <span data-start="416.43" data-end="418.56">web share level two has added file</span> <span data-start="418.56" data-end="420.54">sharing capabilities let me show you how</span> <span data-start="420.54" data-end="422.01">to make this work with a fool greeting</span> <span data-start="422.01" data-end="424.59">card application first I need to prepare</span> <span data-start="424.59" data-end="426.42">a data object with a files array</span> <span data-start="426.42" data-end="429.24">consisting of one blob and then a title</span> <span data-start="429.24" data-end="432.03">and a text next as a best practice and</span> <span data-start="432.03" data-end="433.92">the use of the new navigator dot can</span> <span data-start="433.92" data-end="435.66">share method but does what its name</span> <span data-start="435.66" data-end="438.18">suggests it tells me if the data object</span> </p>
<p><span data-start="438.18" data-end="440.19">I'm trying to share can't technically be</span> <span data-start="440.19" data-end="442.71">shared by the browser if navigator can</span> <span data-start="442.71" data-end="444.03">share tells me the data can be shared</span> <span data-start="444.03" data-end="446.88">and in the final step ready to call a</span> <span data-start="446.88" data-end="449.85">navigator dot share that's before again</span> <span data-start="449.85" data-end="452.1">everything can fail in the simplest way</span> <span data-start="452.1" data-end="454.08">when the user cancels the sharing</span> <span data-start="454.08" data-end="455.82">operation so it's all wrapped in</span> <span data-start="455.82" data-end="458.7">try-catch blocks as before I use a</span> <span data-start="458.7" data-end="460.38">progressive enhancement loading strategy</span> <span data-start="460.38" data-end="463.05">if both share and can share exists on a</span> <span data-start="463.05" data-end="465.36">navigator object only then I go forward</span> <span data-start="465.36" data-end="467.43">and load shared on MJS why a dynamic</span> <span data-start="467.43" data-end="469.65">import on browsers like mobile safari</span> <span data-start="469.65" data-end="471.51">that only fulfill one of the two</span> <span data-start="471.51" data-end="472.05">conditions</span> </p>
<p><span data-start="472.05" data-end="474.78">I don't load the full functionality if I</span> <span data-start="474.78" data-end="476.19">tap the share button on a supporting</span> <span data-start="476.19" data-end="478.44">browser the native share sheet opens I</span> <span data-start="478.44" data-end="480.06">can for example choose</span> <span data-start="480.06" data-end="481.89">Gmail and the email composer Richard</span> <span data-start="481.89" data-end="484.56">pops up with the image attached up next</span> <span data-start="484.56" data-end="486.78">I want to talk about contacts and when I</span> <span data-start="486.78" data-end="489.42">say contacts I mean contacts as in the</span> <span data-start="489.42" data-end="491.4">devices address book when you write a</span> <span data-start="491.4" data-end="493.44">greeting card it may not always be easy</span> <span data-start="493.44" data-end="495.51">to correctly write someone's name for</span> <span data-start="495.51" data-end="497.31">example I have a friend who prefers the</span> <span data-start="497.31" data-end="498.72">name to be spelled in Cyrillic letters</span> </p>
<p><span data-start="498.72" data-end="501.27">I'm using a German qwertz keyboard and I</span> <span data-start="501.27" data-end="503.7">have no idea how to type their name this</span> <span data-start="503.7" data-end="505.38">is a problem that the contact picker API</span> <span data-start="505.38" data-end="507.63">sells since I have my friends stored in</span> <span data-start="507.63" data-end="509.88">my phone's contacts app by the contacts</span> <span data-start="509.88" data-end="512.13">picker API I can tap into my contacts</span> <span data-start="512.13" data-end="514.95">from the web first I need to specify the</span> <span data-start="514.95" data-end="516.54">list of properties I want to access in</span> <span data-start="516.54" data-end="519.39">this case I only want the names but for</span> <span data-start="519.39" data-end="521.19">the use cases I might be interested in</span> <span data-start="521.19" data-end="524.22">telephone numbers emails avatar icon or</span> <span data-start="524.22" data-end="527.16">physical addresses next I configure an</span> <span data-start="527.16" data-end="529.32">options object and set multiples to true</span> <span data-start="529.32" data-end="531.14">so you can select more than one account</span> <span data-start="531.14" data-end="533.88">finally I can call navigator</span> <span data-start="533.88" data-end="535.92">contacts that select which results in</span> <span data-start="535.92" data-end="537.69">the desired properties once the user</span> <span data-start="537.69" data-end="539.25">selects one or multiple of their</span> <span data-start="539.25" data-end="541.83">contacts in fugu greetings when I tap</span> <span data-start="541.83" data-end="543.87">the contacts button and select that two</span> <span data-start="543.87" data-end="546.54">best pals said again makarevich Bryn and</span> </p>
<p><span data-start="546.54" data-end="549.21">Laurence Edward Larry Page you can see</span> <span data-start="549.21" data-end="551.07">how the contacts picker is limited to</span> <span data-start="551.07" data-end="553.17">only show their names but not their</span> <span data-start="553.17" data-end="554.46">email addresses or other information</span> <span data-start="554.46" data-end="557.1">like their phone numbers the names are</span> <span data-start="557.1" data-end="559.35">then drawn onto my greeting card and by</span> <span data-start="559.35" data-end="561.27">now you probably learned the pattern I</span> <span data-start="561.27" data-end="563.61">only load the file when the API is</span> <span data-start="563.61" data-end="567.03">actually supported up next is copying</span> <span data-start="567.03" data-end="568.71">and pasting one of our favorite</span> <span data-start="568.71" data-end="570.33">operations as software developers is</span> <span data-start="570.33" data-end="572.4">copy and paste as greeting card</span> <span data-start="572.4" data-end="574.92">elephants at times and I want to do the</span> <span data-start="574.92" data-end="576.81">same either paste an image into a</span> <span data-start="576.81" data-end="578.79">greeting card and working on or on the</span> <span data-start="578.79" data-end="579.42">other way around</span> <span data-start="579.42" data-end="581.61">copy my greeting card so I can continue</span> <span data-start="581.61" data-end="583.8">editing it from somewhere else the I</span> <span data-start="583.8" data-end="586.35">simplified API about from text also</span> <span data-start="586.35" data-end="588.39">supports images let me walk you through</span> <span data-start="588.39" data-end="590.79">how I have added copy and paste to the</span> <span data-start="590.79" data-end="592.95">fugu breeding set in order to copy</span> <span data-start="592.95" data-end="594.57">something onto the system's clipboard</span> <span data-start="594.57" data-end="597.09">you need to write to it the navigated</span> <span data-start="597.09" data-end="599.37">clipboard right method takes an area of</span> <span data-start="599.37" data-end="600.84">clipper items as a parameter</span> <span data-start="600.84" data-end="603.12">each kept one item essentially as an</span> <span data-start="603.12" data-end="605.25">object with a blob as a value and the</span> <span data-start="605.25" data-end="608.82">blocks type as the key to paste I need</span> <span data-start="608.82" data-end="610.65">to loop over the clipboard items that</span> <span data-start="610.65" data-end="612.24">are obtained by calling navigated or</span> <span data-start="612.24" data-end="614.88">clipboard Audrey the reason for this is</span> <span data-start="614.88" data-end="616.47">that multiple clipboard items might be</span> <span data-start="616.47" data-end="617.85">on the clipboard in different</span> <span data-start="617.85" data-end="620.22">representations each clip pod item has a</span> <span data-start="620.22" data-end="622.11">types field that tells me in which mine</span> <span data-start="622.11" data-end="624.63">type the resource is available I simply</span> <span data-start="624.63" data-end="626.1">take the first one and call the</span> <span data-start="626.1" data-end="627.66">clipboard items get a type method</span> <span data-start="627.66" data-end="629.76">passing the mime type I obtained before</span> <span data-start="629.76" data-end="633">and almost needless to say by now I only</span> <span data-start="633" data-end="635.64">do this on supporting browsers so how</span> <span data-start="635.64" data-end="638.07">does this work here I have an image open</span> <span data-start="638.07" data-end="639.99">and the Mac OS preview app and copy it</span> <span data-start="639.99" data-end="642.69">to the clipboard when I click paste the</span> <span data-start="642.69" data-end="644.58">fugu breeding zap then asks me what I</span> <span data-start="644.58" data-end="646.29">want to allow the app to see texts and</span> <span data-start="646.29" data-end="648.69">images on the clipboard finally after</span> <span data-start="648.69" data-end="650.73">accepting the permission the images then</span> <span data-start="650.73" data-end="653.01">paste it into the application the other</span> <span data-start="653.01" data-end="655.29">way round works to let me copy a</span> <span data-start="655.29" data-end="657.21">greeting card to the clipboard when I</span> <span data-start="657.21" data-end="659.31">then open preview and click file and</span> <span data-start="659.31" data-end="662.13">then new from clipboard the greeting</span> <span data-start="662.13" data-end="663.96">card gets pasted into a new untitled</span> <span data-start="663.96" data-end="666.81">image another useful API is the badging</span> </p>
<p><span data-start="666.81" data-end="667.5">AJ</span> <span data-start="667.5" data-end="670.35">as an installable PWI fugu greetings of</span> <span data-start="670.35" data-end="672.66">course does have an app icon that users</span> <span data-start="672.66" data-end="674.43">can place on the app dock or the home</span> <span data-start="674.43" data-end="676.47">screen something fun to do with it in</span> <span data-start="676.47" data-end="678.57">the context of frugal greetings miss use</span> <span data-start="678.57" data-end="680.67">it as a pen stroke counter with a</span> <span data-start="680.67" data-end="682.35">batting okay it is a straightforward</span> <span data-start="682.35" data-end="684.72">task to do this I have added an event</span> <span data-start="684.72" data-end="686.28">less than that on pointed down</span> <span data-start="686.28" data-end="688.23">increments the pen strokes counter and</span> <span data-start="688.23" data-end="690.9">sets the icon whenever the canvas gets</span> <span data-start="690.9" data-end="692.88">cleared the counter resets and the badge</span> <span data-start="692.88" data-end="695.46">is removed in this example I've drawn</span> <span data-start="695.46" data-end="697.86">the numbers from 1 to 7 using one pen</span> <span data-start="697.86" data-end="700.05">stroke for each number the batch counter</span> <span data-start="700.05" data-end="703.02">on the icon is now at 7 this feature is</span> <span data-start="703.02" data-end="704.49">a progressive enhancement so the loading</span> <span data-start="704.49" data-end="707.16">logic is as usual want to start each day</span> <span data-start="707.16" data-end="709.98">fresh with something new a neat feature</span> <span data-start="709.98" data-end="712.32">of the fugu greetings app is that it can</span> <span data-start="712.32" data-end="713.88">inspire you each morning with a new</span> <span data-start="713.88" data-end="715.59">background image to study a breeding</span> <span data-start="715.59" data-end="717.93">card the app uses two prokaryotic</span> <span data-start="717.93" data-end="720.3">background sync API to achieve this the</span> <span data-start="720.3" data-end="722.04">first step is to register a periodic</span> <span data-start="722.04" data-end="723.09">sync event in the serviceworker</span> <span data-start="723.09" data-end="725.82">registration it listens for a sync tag</span> <span data-start="725.82" data-end="726.27">called</span> <span data-start="726.27" data-end="728.01">image of the day and as a minimum</span> <span data-start="728.01" data-end="730.11">interval of one day so the user can get</span> <span data-start="730.11" data-end="732.32">a new background image every 24 hours</span> <span data-start="732.32" data-end="734.55">the second step is to listen for the</span> <span data-start="734.55" data-end="736.26">periodic sync event in the serviceworker</span> <span data-start="736.26" data-end="738.48">if Devon Tech is the one that was</span> <span data-start="738.48" data-end="740.76">registered a slide ago the image of the</span> <span data-start="740.76" data-end="742.56">day is retrieved for the get image of</span> <span data-start="742.56" data-end="744.21">the day function and the result</span> <span data-start="744.21" data-end="746.49">propagated to all clients so they can</span> <span data-start="746.49" data-end="749.1">update their chemists and captions again</span> <span data-start="749.1" data-end="750.51">this is truly a progressive enhancement</span> <span data-start="750.51" data-end="752.82">so the code is only loaded when the API</span> <span data-start="752.82" data-end="755.19">is supported by the browser this applies</span> <span data-start="755.19" data-end="756.84">to both the client code and the</span> <span data-start="756.84" data-end="758.97">serviceworker code on lan supporting</span> <span data-start="758.97" data-end="761.4">browsers me of them is loaded note how</span> <span data-start="761.4" data-end="762.66">in the serviceworker instead of a</span> <span data-start="762.66" data-end="765.09">dynamic input I use the classic import</span> <span data-start="765.09" data-end="766.92">scripts function to the same effect</span> <span data-start="766.92" data-end="769.29">sometimes even with a lot of inspiration</span> <span data-start="769.29" data-end="771.3">you need a nudge to finish it started</span> <span data-start="771.3" data-end="773.16">reading code this is a feature that is</span> <span data-start="773.16" data-end="775.17">enabled by the notification triggers API</span> <span data-start="775.17" data-end="777.9">as a user I can enter a time and I want</span> <span data-start="777.9" data-end="779.55">to be nudged to finish my greeting card</span> <span data-start="779.55" data-end="781.38">and when the time has come and I get a</span> <span data-start="781.38" data-end="782.97">notification that my greeting card is</span> <span data-start="782.97" data-end="784.86">waiting after prompting for the target</span> <span data-start="784.86" data-end="786.6">time the application schedules a</span> <span data-start="786.6" data-end="788.61">notification with the show trigger this</span> <span data-start="788.61" data-end="790.17">can be a timestamp trigger with a</span> <span data-start="790.17" data-end="792.69">previously selected target date the</span> <span data-start="792.69" data-end="794.07">reminder notification will be triggered</span> <span data-start="794.07" data-end="796.23">locally no network or server-side is</span> <span data-start="796.23" data-end="798.21">necessary as everything else i've shown</span> <span data-start="798.21" data-end="800.01">so far this is a progressive enhancement</span> <span data-start="800.01" data-end="801.57">so the code is</span> <span data-start="801.57" data-end="803.58">me conditionally loaded I also want to</span> <span data-start="803.58" data-end="806.34">talk about the wakelock API sometimes</span> <span data-start="806.34" data-end="807.93">you need to just stare long enough on</span> <span data-start="807.93" data-end="810">the screen until the inspiration pieces</span> <span data-start="810" data-end="812.49">you the worst that can happen is for the</span> <span data-start="812.49" data-end="814.92">screen to turn off the way okay P I can</span> <span data-start="814.92" data-end="817.11">prevent this from happening in food</span> <span data-start="817.11" data-end="819.27">readings there's an insomnia checkbox</span> <span data-start="819.27" data-end="821.37">that when checked keeps your screen</span> <span data-start="821.37" data-end="823.74">awake in a first step they obtain a wake</span> <span data-start="823.74" data-end="825.39">lock with the Navigator table like dog</span> <span data-start="825.39" data-end="827.34">but request not a pass it the string</span> <span data-start="827.34" data-end="829.85">screen to obtain a screen leg lock I</span> <span data-start="829.85" data-end="832.02">then add an event listener to be</span> <span data-start="832.02" data-end="833.39">informed when the wake lock is released</span> <span data-start="833.39" data-end="835.86">this can happen for example when the tap</span> <span data-start="835.86" data-end="838.92">visibility changes if this happens I can</span> <span data-start="838.92" data-end="840.84">when this happens with will again we</span> <span data-start="840.84" data-end="842.91">obtain the wait look yes this is a</span> <span data-start="842.91" data-end="844.35">progressive announcement so you only</span> <span data-start="844.35" data-end="845.79">need to load it when the browser</span> <span data-start="845.79" data-end="848.82">supports the API at times even hysteria</span> <span data-start="848.82" data-end="852.06">the screen for hours is just useless the</span> <span data-start="852.06" data-end="853.8">idle detection API allows the app to</span> <span data-start="853.8" data-end="855.99">detect user idle time if the user's</span> <span data-start="855.99" data-end="858.48">detected to be idle for too long the app</span> <span data-start="858.48" data-end="860.25">resets to the initial state and clears</span> <span data-start="860.25" data-end="862.83">the canvas this API is currently gated</span> <span data-start="862.83" data-end="865.08">behind the notification permission since</span> <span data-start="865.08" data-end="866.79">a lot of production use cases of idle</span> <span data-start="866.79" data-end="869.46">detection or notification related for</span> <span data-start="869.46" data-end="871.29">example to only send a notification to a</span> <span data-start="871.29" data-end="873.27">device the user is currently actively</span> <span data-start="873.27" data-end="875.58">using after making sure that the</span> <span data-start="875.58" data-end="877.23">notifications permission is granted I</span> <span data-start="877.23" data-end="879.6">then instantiate the idle detector a</span> <span data-start="879.6" data-end="881.4">register an event listener that listens</span> <span data-start="881.4" data-end="883.8">for idle changes which includes the user</span> <span data-start="883.8" data-end="885.96">and the screen state the user can be</span> <span data-start="885.96" data-end="888">active or idle in a screen can be</span> <span data-start="888" data-end="890.43">unlocked or locked if the users detected</span> <span data-start="890.43" data-end="893.49">to be idle the chemist clears I give the</span> </p>
<p><span data-start="893.49" data-end="896.55">I detector a threshold of 60 seconds and</span> <span data-start="896.55" data-end="898.74">as always I unload this code and the</span> <span data-start="898.74" data-end="901.5">browser supports it whoo what a writer</span> <span data-start="901.5" data-end="904.1">so many ideas in just one sample app and</span> <span data-start="904.1" data-end="906.54">reminder we never make the use of pay</span> <span data-start="906.54" data-end="908.19">the download cost for a future that</span> <span data-start="908.19" data-end="910.32">their browser doesn't support by using</span> <span data-start="910.32" data-end="912.36">progressive enhancement and make sure</span> <span data-start="912.36" data-end="914.37">only the relevant code gets loaded and</span> <span data-start="914.37" data-end="917.07">since with HTTP 2 requests are cheap</span> <span data-start="917.07" data-end="919.11">this pattern should work well for a lot</span> <span data-start="919.11" data-end="921.48">of applications although at times you</span> <span data-start="921.48" data-end="923.16">might still want to consider a bundler</span> <span data-start="923.16" data-end="925.2">for really large apps this has been a</span> <span data-start="925.2" data-end="927.12">short overview of many of the ApS we're</span> <span data-start="927.12" data-end="928.53">working on in the context of project</span> </p>
<p><span data-start="928.53" data-end="930.78">Google definitely check out our landing</span> <span data-start="930.78" data-end="932.46">page they can find links to detailed</span> <span data-start="932.46" data-end="934.38">articles for each API that I've talked</span> <span data-start="934.38" data-end="935.1">about</span> <span data-start="935.1" data-end="936.81">if you're interested in FUBU greetings</span> <span data-start="936.81" data-end="939.66">go find and fork it on github and with</span> <span data-start="939.66" data-end="941.31">that thank you very much for watching my</span> <span data-start="941.31" data-end="943.65">talk you can find me as tomahawk on</span> <span data-start="943.65" data-end="946.76">github Twitter and the web in general</span> <span data-start="946.76" data-end="959.83">[Music]</span> </p>
</section>