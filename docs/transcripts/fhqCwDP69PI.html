<section>
<p><span data-start="0.56" data-end="3.41">[Music]</span> <span data-start="3.41" data-end="8.13">[Applause]</span> <span data-start="8.14" data-end="11.48">[Music]</span> <span data-start="11.48" data-end="15.299">hi I'm Liam a web ecosystem consultant</span> <span data-start="15.299" data-end="17.91">at Google this talk will explore how</span> <span data-start="17.91" data-end="19.92">different companies are building fast</span> <span data-start="19.92" data-end="22.38">are resilient experiences in the world</span> <span data-start="22.38" data-end="24.72">we'll use the war box libraries to show</span> <span data-start="24.72" data-end="27.09">how to implement four different patterns</span> <span data-start="27.09" data-end="29.49">in your site but all of these features</span> <span data-start="29.49" data-end="32.04">can also be implemented by manually</span> <span data-start="32.04" data-end="35.55">writing the serviceworker code our first</span> <span data-start="35.55" data-end="37.53">pattern is called resilient search</span> <span data-start="37.53" data-end="40.05">experiences and can be applied to any</span> <span data-start="40.05" data-end="42.45">site that offers some type of search</span> <span data-start="42.45" data-end="45.39">functionality when a user searches for a</span> <span data-start="45.39" data-end="47.85">topic in Google search for Chrome in</span> </p>
<p><span data-start="47.85" data-end="49.82">Android devices and loses connection</span> <span data-start="49.82" data-end="52.079">instead of the standard Network error</span> <span data-start="52.079" data-end="54.629">page they are presented with a custom</span> <span data-start="54.629" data-end="57.21">offline page asking if they want to opt</span> <span data-start="57.21" data-end="60.48">in for notifications if the user accepts</span> <span data-start="60.48" data-end="62.28">the permission once the connection is</span> <span data-start="62.28" data-end="64.439">back they will receive a web push</span> <span data-start="64.439" data-end="66.51">notification informing that the search</span> <span data-start="66.51" data-end="68.97">result is ready clicking on the</span> <span data-start="68.97" data-end="70.95">notification will take the user to the</span> <span data-start="70.95" data-end="73.59">result screen this is a great way of</span> <span data-start="73.59" data-end="76.049">keeping the user engaged while letting</span> <span data-start="76.049" data-end="78.27">them complete the task they were looking</span> <span data-start="78.27" data-end="81.33">for at the heart of this implementation</span> <span data-start="81.33" data-end="84.36">is the background sync API which lets</span> <span data-start="84.36" data-end="86.61">you differ actions until the user has</span> <span data-start="86.61" data-end="90">stable connectivity in war box this can</span> <span data-start="90" data-end="93.24">be implemented very easily first you can</span> <span data-start="93.24" data-end="95.369">define the network only cache in a</span> <span data-start="95.369" data-end="97.71">strategy for the search endpoint so this</span> <span data-start="97.71" data-end="101.4">request always go to the network then</span> <span data-start="101.4" data-end="103.619">you can pass it background sync plug-in</span> <span data-start="103.619" data-end="106.02">to take care of the offline scenarios</span> <span data-start="106.02" data-end="109.14">let's see how the plugin looks like the</span> <span data-start="109.14" data-end="110.49">waterboxx background scene plugin</span> <span data-start="110.49" data-end="112.979">receives the name of a queue to store</span> <span data-start="112.979" data-end="116.28">failed requests to be retried later the</span> <span data-start="116.28" data-end="118.649">plug-in also receives an unseen callback</span> <span data-start="118.649" data-end="120.75">which will be called once the connection</span> <span data-start="120.75" data-end="123.39">is recovered inside the callback you can</span> <span data-start="123.39" data-end="126.18">retrieve any fail request process them</span> <span data-start="126.18" data-end="129.03">and inform the user of the result for</span> <span data-start="129.03" data-end="132.06">example with a notification before</span> <span data-start="132.06" data-end="134.099">moving to the next pattern let's take a</span> <span data-start="134.099" data-end="135.99">look at an important detail for</span> <span data-start="135.99" data-end="138.69">this implementation you might have</span> <span data-start="138.69" data-end="140.64">noticed that the notification permission</span> <span data-start="140.64" data-end="142.47">is requested when the user loses</span> <span data-start="142.47" data-end="145.38">connection at that point the user</span> <span data-start="145.38" data-end="147.33">understands the value of the service and</span> <span data-start="147.33" data-end="149.64">knows that the notification will deliver</span> <span data-start="149.64" data-end="153.42">timely and relevant updates this is an</span> <span data-start="153.42" data-end="155.67">example of the good implementation of</span> <span data-start="155.67" data-end="159.06">the web push permission our next pattern</span> <span data-start="159.06" data-end="161.49">is adaptive loading with service workers</span> <span data-start="161.49" data-end="163.5">and will allow you to provide a fast</span> <span data-start="163.5" data-end="165.72">experience regardless of the network and</span> <span data-start="165.72" data-end="168.93">the device tara is one of the biggest</span> <span data-start="168.93" data-end="171.54">media sites in brazil they have a large</span> <span data-start="171.54" data-end="173.94">user base coming from slow and fast</span> <span data-start="173.94" data-end="176.54">connections to provide a more reliable</span> <span data-start="176.54" data-end="179.64">experience to all their users they are</span> <span data-start="179.64" data-end="181.98">combining service workers and the</span> <span data-start="181.98" data-end="184.65">network information API to deliver lower</span> <span data-start="184.65" data-end="187.77">quality images to users on 2g or 3G</span> <span data-start="187.77" data-end="190.89">connections tera Duda strategy to the</span> <span data-start="190.89" data-end="193.29">next level when users are navigating on</span> <span data-start="193.29" data-end="195.57">slow connections they deliver the amp</span> <span data-start="195.57" data-end="198.33">version of the articles which are more</span> <span data-start="198.33" data-end="200.13">lightweight and tend to perform better</span> <span data-start="200.13" data-end="203.88">under these conditions to implement this</span> <span data-start="203.88" data-end="206.37">functionality in war box you can first</span> <span data-start="206.37" data-end="209.33">apply a cache first strategy to images</span> <span data-start="209.33" data-end="211.8">then you can pass an exploration plugin</span> <span data-start="211.8" data-end="213.72">to limit the number of entries in the</span> <span data-start="213.72" data-end="217.05">cache you can extend this strategy by</span> <span data-start="217.05" data-end="219.63">creating a custom plugin that we will</span> <span data-start="219.63" data-end="223.29">call adaptive loading plug-in decided</span> <span data-start="223.29" data-end="225.24">plug-in you can listen for the request</span> <span data-start="225.24" data-end="227.91">will fetch callback that will be called</span> <span data-start="227.91" data-end="230.73">before the request is made so you can</span> <span data-start="230.73" data-end="233.55">apply a transformation to it inside the</span> <span data-start="233.55" data-end="235.59">callback you can check the connection</span> <span data-start="235.59" data-end="238.29">type if it's a slow connection you can</span> <span data-start="238.29" data-end="240.9">create a new URL for a lower image</span> <span data-start="240.9" data-end="244.35">quality finally you can create a new</span> <span data-start="244.35" data-end="247.32">request based on that URL and fetch the</span> <span data-start="247.32" data-end="249.84">most appropriate image file according to</span> <span data-start="249.84" data-end="252.9">these conditions if you are using cloud</span> <span data-start="252.9" data-end="255.3">inari there's a war box cloud in re</span> <span data-start="255.3" data-end="258.03">plug-in making this feature even easier</span> <span data-start="258.03" data-end="261.81">to implement check it out as you might</span> <span data-start="261.81" data-end="263.97">have noticed the first two buttons have</span> <span data-start="263.97" data-end="266.729">some things in common we have combined</span> <span data-start="266.729" data-end="268.68">the functionality of runtime caching</span> <span data-start="268.68" data-end="269.95">strategies with</span> <span data-start="269.95" data-end="272.86">plugins this shows one of the benefits</span> <span data-start="272.86" data-end="275.65">of using were box allowing you to extend</span> <span data-start="275.65" data-end="278.44">the standard features in a very easy way</span> <span data-start="278.44" data-end="280.96">let's move now to the second part of the</span> <span data-start="280.96" data-end="284.77">dock our third pattern is called instant</span> <span data-start="284.77" data-end="287.62">navigation experiences and it's useful</span> <span data-start="287.62" data-end="291.22">for any type of site performing a task</span> <span data-start="291.22" data-end="293.8">in a website might involve several steps</span> <span data-start="293.8" data-end="296.2">each of them meaning a navigation</span> <span data-start="296.2" data-end="299.32">request navigation request live request</span> <span data-start="299.32" data-end="302.26">for HTML pages are normally satisfied</span> <span data-start="302.26" data-end="305.14">via the network this means using a cache</span> <span data-start="305.14" data-end="308.23">control header of no cache or a max age</span> <span data-start="308.23" data-end="310.84">of zero to ensure that the response is</span> <span data-start="310.84" data-end="314.62">reasonably fresh having to go against</span> <span data-start="314.62" data-end="317.2">the network means that each navigation</span> <span data-start="317.2" data-end="320.26">might be slow or at the least not</span> <span data-start="320.26" data-end="322.96">reliably fast to speed up these</span> <span data-start="322.96" data-end="325">navigations you can apply a technique</span> <span data-start="325" data-end="328.66">called prefetching in this example</span> </p>
<p><span data-start="328.66" data-end="329.77">MercadoLibre</span> <span data-start="329.77" data-end="331.69">the largest e-commerce site in latin</span> <span data-start="331.69" data-end="334.6">america dynamically shakes lien prefetch</span> <span data-start="334.6" data-end="337.36">tags in listing pages to accelerate</span> <span data-start="337.36" data-end="340.03">parts of its law but prefetching is not</span> <span data-start="340.03" data-end="344.02">only useful for ecommerce sites Italian</span> <span data-start="344.02" data-end="346.12">sports port out-build Giulia sport</span> <span data-start="346.12" data-end="348.79">you see service workers to prefetch the</span> <span data-start="348.79" data-end="350.74">most popular posts that appear in the</span> <span data-start="350.74" data-end="353.02">home page before the user even clicks on</span> <span data-start="353.02" data-end="356.08">them as a result load time for</span> <span data-start="356.08" data-end="358.72">navigation two articles have improved by</span> <span data-start="358.72" data-end="362.2">78% and the number of article</span> <span data-start="362.2" data-end="366.57">impressions has increased in 45%</span> <span data-start="366.57" data-end="369.28">prefetching is commonly implemented by</span> <span data-start="369.28" data-end="372.49">using a resource hint in your pages link</span> <span data-start="372.49" data-end="375.55">prefetch the tag tells the browser to</span> <span data-start="375.55" data-end="377.44">fetch a resource at the lowest priority</span> <span data-start="377.44" data-end="381.1">and keep it in the HTTP cache for five</span> <span data-start="381.1" data-end="385.06">minutes in the serviceworker side you</span> <span data-start="385.06" data-end="388.45">can intercept requests for HTML pages so</span> <span data-start="388.45" data-end="390.61">that you can extend the lifetime of the</span> <span data-start="390.61" data-end="392.74">prefetch resource beyond the five</span> <span data-start="392.74" data-end="396.04">minutes window for HTML pages as</span> <span data-start="396.04" data-end="398.68">tailwater revalidate strategy is a good</span> <span data-start="398.68" data-end="401.38">option to respond quickly from the cache</span> <span data-start="401.38" data-end="403.54">while simultaneously keeping it</span> <span data-start="403.54" data-end="406.66">to date before moving to the final</span> <span data-start="406.66" data-end="409">pattern there's a slight variation of</span> <span data-start="409" data-end="411.07">this technique if there are using</span> <span data-start="411.07" data-end="413.17">resource hints in the page some</span> <span data-start="413.17" data-end="414.64">developers prefer to delegate</span> <span data-start="414.64" data-end="416.53">prefetching completely to the</span> <span data-start="416.53" data-end="419.38">serviceworker for that you need to</span> <span data-start="419.38" data-end="421.87">implement a page to serviceworker</span> <span data-start="421.87" data-end="424.51">communication technique the war box</span> <span data-start="424.51" data-end="426.7">window package allows you to do that</span> <span data-start="426.7" data-end="428.35">so if you're interested on following</span> <span data-start="428.35" data-end="431.1">that route you can check that out</span> <span data-start="431.1" data-end="434.14">we have reached the end of our talk</span> <span data-start="434.14" data-end="437.8">our final pattern is app shell UX with</span> <span data-start="437.8" data-end="440.41">service workers and it's useful if you</span> <span data-start="440.41" data-end="442.9">want to make multi-page apps feel like</span> <span data-start="442.9" data-end="446.77">single page applications Dirk has become</span> <span data-start="446.77" data-end="448.63">one of the favorite platforms for</span> <span data-start="448.63" data-end="451">software developers the architecture of</span> <span data-start="451" data-end="454.63">their side is a multi-page up their team</span> <span data-start="454.63" data-end="456.22">was interested in the benefits of the</span> <span data-start="456.22" data-end="458.65">app shell model but didn't want to incur</span> <span data-start="458.65" data-end="461.29">in a measure architectural change so</span> <span data-start="461.29" data-end="463.75">let's see what they did first they</span> <span data-start="463.75" data-end="466.3">created partials for the header and the</span> <span data-start="466.3" data-end="469.66">footer of the homepage these assets are</span> <span data-start="469.66" data-end="471.76">added to the cache at the serviceworker</span> <span data-start="471.76" data-end="474.52">install event what's commonly referred</span> <span data-start="474.52" data-end="478.51">to us pre-caching the content of the</span> <span data-start="478.51" data-end="480.88">page is the only part that's actually</span> <span data-start="480.88" data-end="482.95">being fetched from the network when</span> <span data-start="482.95" data-end="486.16">navigating but the key ingredient of</span> <span data-start="486.16" data-end="489">this solution is the usage of streaming</span> <span data-start="489" data-end="492.07">thanks to that bytes can start being</span> <span data-start="492.07" data-end="494.53">painted in the screen before the full</span> <span data-start="494.53" data-end="498.07">response is ready war box you can start</span> <span data-start="498.07" data-end="500.44">by creating a regular expression too</span> <span data-start="500.44" data-end="503.71">much request for patience then you can</span> <span data-start="503.71" data-end="505.72">pass an array of stream responses to</span> <span data-start="505.72" data-end="508.66">compose for the header of the footer you</span> <span data-start="508.66" data-end="511.93">can use a cache first strategy for the</span> <span data-start="511.93" data-end="515.5">content you can use a network first all</span> <span data-start="515.5" data-end="518.08">these streaming sources will be composed</span> <span data-start="518.08" data-end="520.59">by war box and sent to the client</span> <span data-start="520.59" data-end="523.81">thanks to streams the header can start</span> <span data-start="523.81" data-end="525.52">being painted as soon as you speak up</span> <span data-start="525.52" data-end="527.5">from the cache without having to wait</span> <span data-start="527.5" data-end="531.64">for the full response we have seen for</span> <span data-start="531.64" data-end="533.53">advanced patterns for speed and</span> <span data-start="533.53" data-end="536.56">resilience as a complement of this talk</span> <span data-start="536.56" data-end="537.25">will be</span> <span data-start="537.25" data-end="539.44">loading guides and cold ups so you can</span> <span data-start="539.44" data-end="542.2">see them in more detail please check web</span> <span data-start="542.2" data-end="544.99">dev slash progressive elapse and web dev</span> <span data-start="544.99" data-end="548.17">slash reliable thanks for watching</span> <span data-start="548.17" data-end="554.67">[Music]</span> <span data-start="554.67" data-end="556.92">[Applause]</span> <span data-start="556.92" data-end="558.899">[Music]</span> <span data-start="558.899" data-end="559.4">you</span> </p>
</section>